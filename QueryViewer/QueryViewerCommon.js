function IsQueryObjectPreview(){return void 0!=window.external&&void 0!=window.external.SendText}function IsDashboardEdit(){return"undefined"!==typeof UCDashboardForEditor}function UpdateQueryObjectPreview(a){for(var c=Object.keys(qv.collection)[0],c=qv.collection[c],a=JSON.parse(a),d=Object.keys(a),b=0;b<d.length;b++){var l=d[b];c[l]=a[l]}c.realShow()}
var HIGHCHARTS_COLOR_PREFIX="highcharts-color-",HIGHCHARTS_MAX_COLORS=36,HIGHCHARTS_CUSTOM_COLOR=[],qv={collection:{},fadeTimeouts:{}},QueryViewerVisible={Always:"Always",Yes:"Yes",No:"No",Never:"Never"},QueryViewerElementType={Axis:"Axis",Datum:"Datum"},QueryViewerAxisType={Rows:"Rows",Columns:"Columns",Pages:"Pages"},QueryViewerFilterType={ShowAllValues:"ShowAllValues",HideAllValues:"HideAllValues",ShowSomeValues:"ShowSomeValues"},QueryViewerAxisOrderType={None:"None",Ascending:"Ascending",Descending:"Descending",
Custom:"Custom"},QueryViewerExpandCollapseType={ExpandAllValues:"ExpandAllValues",CollapseAllValues:"CollapseAllValues",ExpandSomeValues:"ExpandSomeValues"},QueryViewerDataType={Integer:"integer",Real:"real",Character:"character",Boolean:"boolean",Date:"date",DateTime:"datetime",GUID:"guid",GeoPoint:"geopoint"},QueryViewerAggregationType={Sum:"Sum",Average:"Average",Count:"Count",Max:"Max",Min:"Min"},QueryViewerOutputType={Card:"Card",Chart:"Chart",PivotTable:"PivotTable",Table:"Table",Map:"Map",
Default:"Default"},QueryViewerMapType={Choropleth:"Choropleth",Bubble:"Bubble"},QueryViewerRegion={Country:"Country",Continent:"Continent",World:"World"},QueryViewerContinent={SouthAmerica:"SouthAmerica",NorthAmerica:"NorthAmerica",Africa:"Africa",Asia:"Asia",Europe:"Europe",Oceania:"Oceania",Antarctica:"Antarctica"},QueryViewerCountry={AF:"AF",AL:"AL",DZ:"DZ",AD:"AD",AO:"AO",AI:"AI",AG:"AG",AR:"AR",AM:"AM",AU:"AU",AT:"AT",AZ:"AZ",BH:"BH",BD:"BD",BB:"BB",BY:"BY",BE:"BE",BZ:"BZ",BJ:"BJ",BM:"BM",BT:"BT",
BO:"BO",BA:"BA",BW:"BW",BR:"BR",VG:"VG",BN:"BN",BG:"BG",BF:"BF",BI:"BI",KH:"KH",CM:"CM",CA:"CA",CV:"CV",CF:"CF",TD:"TD",CL:"CL",CN:"CN",CO:"CO",KM:"KM",CK:"CK",CR:"CR",HR:"HR",CU:"CU",CY:"CY",CZ:"CZ",CD:"CD",DK:"DK",DJ:"DJ",DM:"DM",DO:"DO",TL:"TL",EC:"EC",EG:"EG",SV:"SV",GQ:"GQ",ER:"ER",EE:"EE",SZ:"SZ",ET:"ET",FO:"FO",FJ:"FJ",FI:"FI",FR:"FR",GA:"GA",GM:"GM",GE:"GE",DE:"DE",GH:"GH",GR:"GR",GL:"GL",GD:"GD",GT:"GT",GN:"GN",GW:"GW",GY:"GY",HT:"HT",HN:"HN",HU:"HU",IS:"IS",IN:"IN",ID:"ID",IR:"IR",IQ:"IQ",
IE:"IE",IL:"IL",IT:"IT",CI:"CI",JM:"JM",JP:"JP",JO:"JO",KZ:"KZ",KE:"KE",KI:"KI",XK:"XK",KW:"KW",KG:"KG",LA:"LA",LV:"LV",LB:"LB",LS:"LS",LR:"LR",LY:"LY",LI:"LI",LT:"LT",LU:"LU",MG:"MG",MW:"MW",MY:"MY",MV:"MV",ML:"ML",MT:"MT",MH:"MH",MR:"MR",MU:"MU",MX:"MX",FM:"FM",MD:"MD",MC:"MC",MN:"MN",ME:"ME",MA:"MA",MZ:"MZ",MM:"MM",NA:"NA",NR:"NR",NP:"NP",NL:"NL",NZ:"NZ",NI:"NI",NE:"NE",NG:"NG",KP:"KP",MK:"MK",NO:"NO",OM:"OM",PK:"PK",PW:"PW",PA:"PA",PS:"PS",PG:"PG",PY:"PY",PE:"PE",PH:"PH",PL:"PL",PT:"PT",PR:"PR",
QA:"QA",CG:"CG",RO:"RO",RU:"RU",RW:"RW",KN:"KN",LC:"LC",VC:"VC",WS:"WS",SM:"SM",ST:"ST",SA:"SA",SN:"SN",RS:"RS",SC:"SC",SL:"SL",SG:"SG",SK:"SK",SI:"SI",SB:"SB",SO:"SO",ZA:"ZA",KR:"KR",SS:"SS",ES:"ES",LK:"LK",SD:"SD",SR:"SR",SE:"SE",CH:"CH",SY:"SY",TW:"TW",TJ:"TJ",TZ:"TZ",TH:"TH",BS:"BS",TG:"TG",TK:"TK",TO:"TO",TT:"TT",TN:"TN",TR:"TR",TM:"TM",TV:"TV",UG:"UG",UA:"UA",AE:"AE",GB:"GB",US:"US",UY:"UY",UZ:"UZ",VU:"VU",VA:"VA",VE:"VE",VN:"VN",EH:"EH",YE:"YE",ZM:"ZM",ZW:"ZW"},QueryViewerMapLibrary={Highcharts:"Highcharts",
ECharts:"ECharts"},QueryViewerChartType={Column:"Column",Column3D:"Column3D",StackedColumn:"StackedColumn",StackedColumn3D:"StackedColumn3D",StackedColumn100:"StackedColumn100",Bar:"Bar",StackedBar:"StackedBar",StackedBar100:"StackedBar100",Area:"Area",StackedArea:"StackedArea",StackedArea100:"StackedArea100",SmoothArea:"SmoothArea",StepArea:"StepArea",Line:"Line",StackedLine:"StackedLine",StackedLine100:"StackedLine100",SmoothLine:"SmoothLine",StepLine:"StepLine",Pie:"Pie",Pie3D:"Pie3D",Doughnut:"Doughnut",
Doughnut3D:"Doughnut3D",LinearGauge:"LinearGauge",CircularGauge:"CircularGauge",Radar:"Radar",FilledRadar:"FilledRadar",PolarArea:"PolarArea",Funnel:"Funnel",Pyramid:"Pyramid",ColumnLine:"ColumnLine",Column3DLine:"Column3DLine",Timeline:"Timeline",SmoothTimeline:"SmoothTimeline",StepTimeline:"StepTimeline",Sparkline:"Sparkline"},QueryViewerConditionOperator={Equal:"EQ",LessThan:"LT",GreaterThan:"GT",LessOrEqual:"LE",GreaterOrEqual:"GE",NotEqual:"NE",Interval:"IN"},QueryViewerConditionOperatorSymbol=
{Equal:"=",LessThan:"<",GreaterThan:">",LessOrEqual:"≤",GreaterOrEqual:"≥",NotEqual:"<>",Interval:"-"},QueryViewerOrientation={Horizontal:"Horizontal",Vertical:"Vertical"},QueryViewerPlotSeries={InTheSameChart:"InTheSameChart",InSeparateCharts:"InSeparateCharts"},QueryViewerShowDataAs={Values:"Values",Percentages:"Percentages",ValuesAndPercentages:"ValuesAndPercentages"},QueryViewerSubtotals={Yes:"Yes",Hidden:"Hidden",No:"No"},QueryViewerTrendPeriod={SinceTheBeginning:"SinceTheBeginning",LastYear:"LastYear",
LastSemester:"LastSemester",LastQuarter:"LastQuarter",LastMonth:"LastMonth",LastWeek:"LastWeek",LastDay:"LastDay",LastHour:"LastHour",LastMinute:"LastMinute",LastSecond:"LastSecond"},QueryViewerXAxisLabels={Horizontally:"Horizontally",Rotated30:"Rotated30",Rotated45:"Rotated45",Rotated60:"Rotated60",Vertically:"Vertically"},QueryViewerAutoresizeType={Both:"Both",Vertical:"Vertical",Horizontal:"Horizontal"},QueryViewerTranslationType={NoTranslation:"None",Static:"Static",RunTime:"RunTime"},QueryViewerParentPanel=
{Default:"Default",QueryPreview:"QueryPreview",DashboardEditor:"DashboardEditor",MobileWrapper:"MobileWrapper"};
qv.util={color:{getHtmlColor:function(a){return"string"==typeof a||"number"==typeof a?gx.color.toHex?-1==a?"":"#"+gx.color.toHex(a):"#"+gxToHex(a):void 0==a?"#000000":a.Html},parseCSSColor:function(a){return"rgb"==a.substring(0,3)?(a=a.replace("rgb","").replace("(","").replace(")","").split(","),this.getHtmlColor(gx.color.rgb(parseInt(a[0]),parseInt(a[1]),parseInt(a[2])))):a},convertValueToColor:function(a){a=-1==a.indexOf("#")?"#"+a:a;for(a=a.substring(1,a.length);6>a.length;)a="0"+a;return"#"+a},
IsHexaColor:function(a){return 6===a.length&&!isNaN(parseInt(a,16))},lightenDarkenColor:function(a,c){var d=!1;"#"==a[0]&&(a=a.slice(1),d=!0);var b=parseInt(a,16),l=(b>>16)+c;255<l?l=255:0>l&&(l=0);var g=(b>>8&255)+c;255<g?g=255:0>g&&(g=0);b=(b&255)+c;255<b?b=255:0>b&&(b=0);return(d?"#":"")+(b|g<<8|l<<16).toString(16)},standardize_color:function(a){var c=document.createElement("canvas").getContext("2d");c.fillStyle=a;return c.fillStyle},resolveColor:function(a,c){qv.util.startsWith(a,"#")||(a=qv.util.color.standardize_color(a));
if(!c||"1"==c)return a;var d=parseInt(a.substring(1),16);return"rgba("+(d>>16&255)+","+(d>>8&255)+","+(d&255)+","+c+")"}},css:function(){var a={};return{replaceCssClasses:function(c){for(;0<=(posIni=c.indexOf("gxpl_cssReplace("));){posFin=c.indexOf(")",posIni);className=c.substring(posIni+16,posFin);var d=className;if(void 0!=a[d])style=a[d];else{for(var b=d,l=void 0,g=gx.theme+".css",s=!1,k=void 0,u=0;u<document.styleSheets.length;u++)if(null!=document.styleSheets[u].href&&0<=document.styleSheets[u].href.indexOf(g)){s=
!0;l=document.styleSheets[u];break}s&&(l.cssRules?crossRules=l.cssRules:l.rules&&(crossRules=l.rules));l=Number.MAX_SAFE_INTEGER;for(u=0;u<crossRules.length;u++)g=crossRules[u],void 0!=g.selectorText&&(0==g.selectorText.toLowerCase().indexOf("."+b.toLowerCase())&&g.selectorText.length<l)&&(k=g.style,l=g.selectorText.length);styleObj=k;void 0!=styleObj?(b=styleObj,k="",""!=b.color&&(k+=(""==k?"":";")+"color:"+qv.util.color.parseCSSColor(b.color)),""!=b.backgroundColor&&(k+=(""==k?"":";")+"backgroundColor:"+
qv.util.color.parseCSSColor(b.backgroundColor)),""!=b.borderStyle&&(k+=(""==k?"":";")+"borderStyle:"+b.borderStyle),""!=b.borderWidth&&(k+=(""==k?"":";")+"borderThickness:"+b.borderWidth.replace("pt","").replace("px","")),""!=b.borderColor&&(k+=(""==k?"":";")+"borderColor:"+qv.util.color.parseCSSColor(b.borderColor)),""!=b.fontFamily&&(k+=(""==k?"":";")+"fontFamily:"+b.fontFamily.replace(/"/g,"").replace(/'/g,"")),""!=b.fontSize&&(k+=(""==k?"":";")+"fontSize:"+b.fontSize.replace("pt","").replace("px",
"")),""!=b.fontWeight&&(k+=(""==k?"":";")+"fontWeight:"+b.fontWeight),""!=b.fontStyle&&(k+=(""==k?"":";")+"fontStyle:"+b.fontStyle),""!=b.textDecoration&&(k+=(""==k?"":";")+"textDecoration:"+b.textDecoration),styleTransformed=k,style=a[d]=styleTransformed):style=""}toReplace=c.substring(posIni,posFin+1);c=c.replace(toReplace,style)}return c},parseStyle:function(a){var d="";if(""!=a&&void 0!=a){if(0>a.indexOf(":"))return a;for(var a=a.split(";"),b=0;b<a.length;b++)var l=a[b].split(":"),g=l[0],d=d+
((""==d?"":",")+'"'+("borderThickness"==g?"borderWidth":g)+'":"'+l[1]+("borderThickness"==g||"fontSize"==g?"px":"")+'"');return"{"+d+"}"}return"{}"},resolveVariable:function(a){return qv.util.startsWith(a,"var(")&&qv.util.endsWith(a,")")?(a=a.substr(4,a.length-5),qv.util.trim(getComputedStyle(document.documentElement).getPropertyValue(a.toLowerCase()))):a}}}(),autorefresh:function(){return{UpdateLayoutSameGroup:function(a,c,d){function b(a,b){function c(a,e){for(var b=0;b<a.Metadata.Parameters.length;b++){var f=
a.Metadata.Parameters[b];if(f.IsCollection&&f.Name==e)return[b,f]}return[null,null]}function d(a,b){for(var e=null,f=0;f<a.Parameters.length;f++)if(a.Parameters[f].Name==b){e=a.Parameters[f];break}return e}function q(a,b){for(var e="",f="I"==b.Type||"R"==b.Type||"B"==b.Type?"":'"',g=0;g<a.Filter.Values.length;g++)e+=(""==e?"":",")+f+a.Filter.Values[g]+f;return"["+e+"]"}var l=[];a._parametersCloned||(a._parametersCloned=!0,a.Parameters=qv.util.cloneObject(a.Parameters));for(var f=qv.util.GetOrderedElementsKeys(a,
b),v=a.GetMetadata(),n=0;n<f.length;n++){var y=parseInt(f[n].substr(6,4));sourceElement=b[y];var e=c(a,sourceElement.Name),y=e[0],e=e[1],h=qv.util.GetElementInCollection(v,"Name",sourceElement.Name),w=null!=h,F=!w;w&&(qv.util.MergeFields(sourceElement,h),l.push(h));F&&null!=e&&(e=q(sourceElement,e),a.Object?(h=eval(a.Object),h[y+2]=e,a.Object=JSON.stringify(h)):(y=d(a,sourceElement.Name),null==y&&(y={},y.Name=sourceElement.Name,a.Parameters.push(y)),y.Value=e))}a.Axes=l}function l(a,c,k){b(a,c);a.RememberLayout=
!1;a.AllowElementsOrderChange=k;qv.util.autorefresh.SaveAxesAndParametersState(a);a.realShow()}if(void 0!=a.AutoRefreshGroup&&null!=a.AutoRefreshGroup&&""!=a.AutoRefreshGroup&&""!=qv.util.trim(a.AutoRefreshGroup))for(index in qv.util.autorefresh.DeleteAxesAndParametersState(a),qv.collection)qViewerOther=qv.collection[index],qv.services.IsObjectSet(qViewerOther)&&(qViewerOther.userControlId()!=a.userControlId()&&a.AutoRefreshGroup==qViewerOther.AutoRefreshGroup)&&(qViewerOther._isAutorefresh=!0,void 0!=
qViewerOther.Metadata&&void 0!=qViewerOther.Metadata.Parameters?l(qViewerOther,c,d):qViewerOther.getQueryParameters(function(a,b){var k=qv.util.dom.xmlDocument(a),k=qv.util.dom.getSingleElementByTagName(k,"gxpl_ParameterCollection");void 0==b.Metadata&&(b.Metadata={});b.Metadata.Parameters=[];for(var k=qv.util.dom.getMultipleElementsByTagName(k,"gxpl_Parameter"),u=0;u<k.length;u++){var q={};q.Name=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(k[u],"Name"));q.Type=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(k[u],
"Type"));q.IsCollection=gx.lang.gxBoolean(qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(k[u],"IsCollection")));b.Metadata.Parameters.push(q)}l(b,c,d)}))},LoadAxesAndParametersState:function(a){function c(a,b){for(var c=0;c<b.length;c++){var k=b[c],d;a:{d=a;for(var q=k.Name,r=0;r<d.length;r++)if(d[r].Name.toLowerCase()==q.toLowerCase()){d=d[r];break a}d=null}null!=d&&Object.assign(d,k)}return a}var d=window.location.pathname+"_"+a.userControlId()+"_"+a.ObjectId+"_"+a.ObjectName+"_",
b=d+"Axes",d=qv.util.storage.getItem(d+"Parameters"),b=qv.util.storage.getItem(b);null!=d&&""!=d&&(a.Parameters=c(JSON.parse(d),a.Parameters),a.RememberLayout=!1);null!=b&&""!=b&&(a.Axes=c(JSON.parse(b),a.Axes),a.RememberLayout=!1)},SaveAxesAndParametersState:function(a){var c=window.location.pathname+"_"+a.userControlId()+"_"+a.ObjectId+"_"+a.ObjectName+"_",d=c+"Axes";qv.util.storage.setItem(c+"Parameters",JSON.stringify(a.Parameters));qv.util.storage.setItem(d,JSON.stringify(a.Axes))},DeleteAxesAndParametersState:function(a){var a=
window.location.pathname+"_"+a.userControlId()+"_"+a.ObjectId+"_"+a.ObjectName+"_",c=a+"Axes";qv.util.storage.removeItem(a+"Parameters");qv.util.storage.removeItem(c)}}}(),dom:{getSingleElementByTagName:function(a,c){var d;d=this.getMultipleElementsByTagName(a,c);return 0<d.length?d[0]:null},getMultipleElementsByTagName:function(a,c){return!gx.util.browser.isIE()||12<=gx.util.browser.ieVersion()?a.getElementsByTagName(c):a.selectNodes(c)},getBooleanAttribute:function(a,c,d){a=a.getAttribute(c);return null==
a?d:"true"==a.toLowerCase()},getCharacterAttribute:function(a,c,d){a=a.getAttribute(c);return null==a?d:a},getValueNode:function(a){return null==a||void 0==a?null:null!=a.firstChild&&void 0!=a.firstChild?a.firstChild.nodeValue:null},selectXPathNode:function(a,c){var d;a.evaluate?(d=a.evaluate(c,a,null,XPathResult.ANY_TYPE,null),d=d.iterateNext()):(d=a.selectNodes(c),d=0<d.length?d[0]:null);return d},xmlDocument:function(a){var c;!gx.util.browser.isIE()||12<=gx.util.browser.ieVersion()?(parser=new DOMParser,
c=parser.parseFromString(a,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(a));return c},getEmptyContainer:function(a){for(a=a.getContainerControl();a.firstChild;)a.removeChild(a.firstChild);return a},setStyle:function(a,c){for(key in c)a.style[key]=c[key]},createText:function(a,c){var d=document.createTextNode(c);a.appendChild(d);return d},createElement:function(a,c,d,b,l,g,s){c=document.createElement(c);""!=d&&(c.id=d);""!=b&&(c.className=b);qv.util.dom.setStyle(c,
l);"function"==typeof g&&(c.onclick=g);""!=s&&qv.util.dom.createText(c,s);null!=a&&a.appendChild(c);return c},createTable:function(a,c,d){a=qv.util.dom.createElement(a,"TABLE","",c,d,null,"");c=document.createElement("TBODY");a.appendChild(c);return c},createRow:function(a){return qv.util.dom.createElement(a,"TR","","",{},null,"")},createCell:function(a,c,d,b,l){a=qv.util.dom.createElement(a,"TD","","",b,null,l);1!=c&&(a.colSpan=c);""!=d&&(a.align=d);return a},createSpan:function(a,c,d,b,l,g,s){a=
qv.util.dom.createElement(a,"SPAN",c,d,l,g,s);""!=b&&(a.title=b);return a},createDiv:function(a,c,d,b,l,g){a=qv.util.dom.createElement(a,"DIV",c,d,l,null,g);""!=b&&(a.title=b);return a},createAnchor:function(a,c,d,b){return qv.util.dom.createElement(a,"A",c,"",d,null,b)},createInput:function(a,c,d,b){a=qv.util.dom.createElement(a,"INPUT",c,"",b,null,"");""!=d&&(a.type=d);return a},createSelect:function(a,c){return qv.util.dom.createElement(a,"SELECT",c,"",{},null,"")},createOption:function(a,c,d,
b){a=qv.util.dom.createElement(a,"OPTION","","",{},null,b);""!=c&&(a.value=c);d&&(a.selected=!0);return a},createIcon:function(a,c,d,b){a=qv.util.dom.createElement(a,"I","","material-icons",d,null,b);""!=c&&(a.title=c);return a},loadStylesAndScripts:function(a,c,d,b){function l(a,b,g,c){qv.util.dom._loadedStyles=qv.util.dom._loadedStyles||[];if(0>qv.util.dom._loadedStyles.indexOf(a))if(qv.util.dom._loadedStyles.push(a),a=qv.services.url.getStaticDirectory()+a,gx.O.DSO){var f=document.createElement("style");
f.setAttribute("data-gx-href",a);f.innerHTML='@import url("'+a+'") layer('+b+")";"function"===typeof c&&(f.onload=c);$(f).insertBefore(g)}else b=document.createElement("link"),b.type="text/css",b.rel="stylesheet",b.href=a,"function"===typeof c&&(b.onload=c),$(b).insertBefore(g);else c()}function g(a,b,c,d,f){"undefined"===typeof f&&(f=0);if(f>=a.length){var v=qv.services.url.getStaticDirectory();gx.http.loadScripts(c.map(function(a){return v+a}),d)}else l(a[f],s,b,function(a,f,e){g(a,b,c,f,e+1)}.closure(this,
[a,d,f]))}var s=a[0].replace(/\//g,"_").replace(/\./g,"_");l(a[0],s,gx.getThemeElement(),function(b,c){var q=qv.util.GetLinkOrStyleElement(a[0]),s=a.slice(1).concat(b);g(s,q,d,c)}.closure(this,[c,b]))}},storage:function(){function a(a,d,b){if(b){var l=new Date;l.setTime(l.getTime()+864E5*b);b="; expires="+l.toGMTString()}else b="";document.cookie=a+"="+d+b+"; path=/"}return{setItem:function(c,d){localStorage?localStorage.setItem(c,d):a(c,d,365)},getItem:function(a){if(localStorage)return localStorage.getItem(a);
a:{for(var a=a+"=",d=document.cookie.split(";"),b=0;b<d.length;b++){for(var l=d[b];" "==l.charAt(0);)l=l.substring(1,l.length);if(0==l.indexOf(a)){a=l.substring(a.length,l.length);break a}}a=null}return a},removeItem:function(c){localStorage?localStorage.removeItem(c):a(c,"",-1)}}}(),ExecuteTracker:function(a,c){for(var d=[],b=0;b<gx.fx.ctx.trackers.length;b++)gx.fx.ctx.trackers[b].types[0]==a&&(d[d.length]=gx.fx.ctx.trackers[b]);for(b=0;b<d.length;b++){var l=gx.O;gx.O=d[b].obj;var g=gx.csv.cmpCtx;
gx.csv.cmpCtx=d[b].obj.CmpContext;gx.evt.setProcessing(!1);d[b].hdl.call(d[b].obj,null,null,c);gx.O=l;gx.csv.cmpCtx=g}},satisfyStyle:function(a,c){switch(c.Operator){case QueryViewerConditionOperator.Equal:return a==c.Value1;case QueryViewerConditionOperator.GreaterThan:return a>c.Value1;case QueryViewerConditionOperator.LessThan:return a<c.Value1;case QueryViewerConditionOperator.GreaterOrEqual:return a>=c.Value1;case QueryViewerConditionOperator.LessOrEqual:return a<=c.Value1;case QueryViewerConditionOperator.NotEqual:return a!=
c.Value1;case QueryViewerConditionOperator.Interval:return a>=c.Value1&&a<=c.Value2}},isGeneXusPreview:function(){return IsQueryObjectPreview()},getGenerator:function(){return gx.gen.isDotNet()?"C#":gx.gen.isJava()?"Java":""},getErrorFromText:function(a){return'<Result OK="True"></Result>'==a?"":a.replace('<Result OK="False"><Dsc>',"").replace("</Dsc></Result>","")},trim:function(a){return"string"!=typeof a?null:a.replace(/^[\s]+/,"").replace(/[\s]+$/,"").replace(/[\s]{2,}/," ")},capitalize:function(a){return a.charAt(0).toUpperCase()+
a.slice(1)},decapitalize:function(a){return a.charAt(0).toLowerCase()+a.slice(1)},dateToString:function(a,c){var d=a.getStringWithFmt("Y4MD").replace(/\//g,"-");c&&(a.TimeFmt=24,d+=" "+a.getTimeString(!0,!0));return d},cloneObject:function(a){return JSON.parse(JSON.stringify(a))},endsWith:function(a,c){return a.substr(a.length-c.length,c.length)==c},startsWith:function(a,c){return a.substr(0,c.length)==c},formatNumber:function(a,c,d,b){a=gx.num.formatNumber(a,c,d,0,!0,!1);if(b&&0<=a.indexOf(gx.decimalPoint)){for(;qv.util.endsWith(a,
"0");)a=a.slice(0,-1);qv.util.endsWith(a,gx.decimalPoint)&&(a=a.slice(0,-1))}return a},formatDateTime:function(a,c,d,b,l,g,s){a=new gx.date.gxdate(a,"Y4MD");d=a.getStringWithFmt(d);c==QueryViewerDataType.DateTime&&(a.TimeFmt=24,d+=" "+a.getTimeString(l,g,b,s));return d},seconsdToText:function(a){return 60>a?qv.util.formatNumber(Math.round(a),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerSeconds")):3600>a?qv.util.formatNumber(Math.round(a/60),0,"ZZZZZZZZZZZZZZ9",!1)+" "+
qv.util.decapitalize(gx.getMessage("GXPL_QViewerMinutes")):86400>a?qv.util.formatNumber(Math.round(a/60/60),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerHours")):2630016>a?qv.util.formatNumber(Math.round(a/60/60/24),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerDays")):31557600>a?qv.util.formatNumber(Math.round(a/60/60/24/30.44),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerMonths")):qv.util.formatNumber(Math.round(a/
60/60/24/365.25),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerYears"))},ParseNumericPicture:function(a,c){var d,b,l="",g="";if(""==c)d=a==QueryViewerDataType.Integer?0:2,b=!1;else{0>c.indexOf(".")&&0>c.indexOf(",")?(d=0,b=!1):0<=c.indexOf(".")&&0>c.indexOf(",")?(d=a==QueryViewerDataType.Integer?0:c.length-c.indexOf(".")-1,b=!1):(d=0>c.indexOf(".")&&0<=c.indexOf(",")?0:a==QueryViewerDataType.Integer?0:c.length-c.indexOf(".")-1,b=!0);for(var s=1,k=0;k<c.length;k++){var u=
c.substr(k,1);if(("."==u||","==u||"9"==u||"Z"==u)&&1==s)s=2;"."!=u&&(","!=u&&"9"!=u&&"Z"!=u)&&2==s&&(s=3);switch(s){case 1:l+=u;break;case 3:g+=u}}}return{DecimalPrecision:d,UseThousandsSeparator:b,Prefix:l,Suffix:g}},ParseDateTimePicture:function(a,c){var d=gx.dateFormat,b=a==QueryViewerDataType.DateTime,l=a==QueryViewerDataType.DateTime,g=a==QueryViewerDataType.DateTime,s=a==QueryViewerDataType.DateTime;""!=c&&(0<=c.indexOf("9999")&&0>d.indexOf("Y4")?d=d.replace("Y","Y4"):0>c.indexOf("9999")&&0<=
d.indexOf("Y4")&&(d=d.replace("Y4","Y")),a==QueryViewerDataType.DateTime&&(b=c.indexOf(" "),0<=b?(s=c.substr(b+1,c.length-b),b=2<=s.length,l=5<=s.length,g=8<=s.length,s=12==s.length):s=g=l=b=!1));return{DateFormat:d,IncludeHours:b,IncludeMinutes:l,IncludeSeconds:g,IncludeMilliseconds:s}},evaluate:function(a,c,d){for(var b=1;b<=d.length;b++)a=a.replace(c+b.toString(),d[b-1]);return eval(a)},aggregate:function(a,c,d){var a=a||QueryViewerAggregationType.Sum,b=null,l=null,g=null,s=null;switch(a){case QueryViewerAggregationType.Sum:for(a=
0;a<c.length;a++)null!=c[a]&&(b+=c[a]);return b;case QueryViewerAggregationType.Average:for(a=0;a<c.length;a++)null!=c[a]&&(b+=c[a],l+=d[a]);return null!=b?b/l:null;case QueryViewerAggregationType.Count:for(a=0;a<d.length;a++)l+=d[a];return l;case QueryViewerAggregationType.Max:for(a=0;a<c.length;a++)s=null==s?c[a]:c[a]>s?c[a]:s;return s;case QueryViewerAggregationType.Min:for(a=0;a<c.length;a++)g=null==g?c[a]:c[a]<g?c[a]:g;return g}},anyError:function(a){return 0==a.indexOf('<Result OK="False"><Dsc>')},
showActivityIndicator:function(a){var c='qv.util.showActivityIndicatorMain("'+a.getContainerControl().id+'");',a=a.userControlId();qv.fadeTimeouts[a]&&clearTimeout(qv.fadeTimeouts[a]);qv.fadeTimeouts[a]=setTimeout(c,500)},showActivityIndicatorMain:function(a){a=document.getElementById(a);gx.dom.addClass(a,"gx-qv-loading");for(var c=0;c<a.childNodes.length;c++)gx.dom.addClass(a.childNodes[c],"gx-qv-loading-children")},hideActivityIndicator:function(a){var c=a.userControlId();qv.fadeTimeouts[c]&&(clearTimeout(qv.fadeTimeouts[c]),
qv.fadeTimeouts[c]=void 0);a=a.getContainerControl();gx.dom.removeClass(a,"gx-qv-loading");for(c=0;c<a.childNodes.length;c++)gx.dom.removeClass(a.childNodes[c],"gx-qv-loading-children")},renderError:function(a,c){if(IsQueryObjectPreview()&&!IsDashboardEdit())window.external.SendText(a.ControlName,c);else{var d=qv.util.dom.getEmptyContainer(a);qv.util.dom.createDiv(d,"","gx-qv-centered-text","",{width:gx.dom.addUnits(a.Width),height:gx.dom.addUnits(a.Height),borderColor:"silver",borderWidth:"thin",
borderStyle:"solid"},gx.getMessage("GXPL_QViewerError")+": "+c);a._ControlRenderedTo=void 0;qv.util.hideActivityIndicator(a)}},GetDesigntimeMetadata:function(a){for(var c=[],d=0;d<a.Metadata.Axes.length;d++){var b=a.Metadata.Axes[d];if(!b.IsComponent){var l={};l.Name=b.Name;l.Title=b.Title;l.DataField=b.DataField;l.Visible=b.Visible;l.Type=QueryViewerElementType.Axis;l.Axis=b.Axis;l.Filter=b.Filter;l.ExpandCollapse=b.ExpandCollapse;l.AxisOrder=b.Order;l.Format={};l.Format.Subtotals=b.Subtotals;l.Format.Picture=
b.Picture;l.Format.CanDragToPages=b.CanDragToPages;l.Format.Style=b.Style;0<b.ValuesStyles.length&&(l.Format.ValuesStyles=b.ValuesStyles);l.Actions={};l.Actions.RaiseItemClick=b.RaiseItemClick;c.push(l)}}for(d=0;d<a.Metadata.Data.length;d++)b=a.Metadata.Data[d],b.IsComponent||(l={},l.Name=b.Name,l.Title=b.Title,l.DataField=b.DataField,l.Visible=b.Visible,l.Type=QueryViewerElementType.Datum,l.Axis="",l.Aggregation=b.Aggregation,l.Format={},l.Format.Picture=b.Picture,l.Format.Style=b.Style,l.Format.TargetValue=
b.TargetValue,l.Format.MaximumValue=l.Format.TargetValue,0<b.ConditionalStyles.length&&(l.Format.ConditionalStyles=b.ConditionalStyles),l.Actions={},l.Actions.RaiseItemClick=b.RaiseItemClick,c.push(l));return c},MergeFields:function(a,c){if(c.Visible!=QueryViewerVisible.Never&&(c.Visible=a.Hidden?QueryViewerVisible.No:QueryViewerVisible.Yes,c.Type==QueryViewerElementType.Axis)){c.Axis=a.Axis;if(a.Order)switch(c.AxisOrder.Type){case QueryViewerAxisOrderType.None:case QueryViewerAxisOrderType.Ascending:case QueryViewerAxisOrderType.Descending:c.AxisOrder.Type=
a.Order;break;case QueryViewerAxisOrderType.Custom:a.Order==QueryViewerAxisOrderType.Descending&&c.AxisOrder.Values.reverse()}c.Format.Subtotals!=QueryViewerSubtotals.No&&void 0!=a.Subtotals&&(c.Format.Subtotals=a.Subtotals==QueryViewerSubtotals.Yes?QueryViewerSubtotals.Yes:QueryViewerSubtotals.Hidden);a.Filter&&(c.Filter=a.Filter);a.ExpandCollapse&&(c.ExpandCollapse=a.ExpandCollapse)}},GetOrderedElementsKeys:function(a,c){function d(a,b,g){return Array(b-(""+a).length+1).join(g||"0")+a}for(var b=
[],l=0;l<c.length;l++){var g=c[l],s=a.RealType==QueryViewerOutputType.Table?"0":g.Type==QueryViewerElementType.Axis?"1":"2";if(null!=g.Position){var k;if(a.RealType==QueryViewerOutputType.PivotTable)if(g.Type==QueryViewerElementType.Axis)switch(g.Axis){case QueryViewerAxisType.Columns:k="B";break;case QueryViewerAxisType.Pages:k="C";break;default:k="A"}else k="D";else k="A";s+=k+d(g.Position,4,"0")+d(l,4,"0")}else s+="Z"+d(l,4,"0")+d(l,4,"0");b.push(s)}b.sort();return b},GetContainerControlClass:function(a){return""!=
a.Class?a.Class+"-"+a.RealType.toLowerCase():""},GetContainerControlClasses:function(a){var c=qv.util.GetContainerControlClass(a),d;switch(a.RealType){case QueryViewerOutputType.Card:d="qv-card";break;case QueryViewerOutputType.Chart:d="qv-chart";break;case QueryViewerOutputType.PivotTable:d="qv-pivottable";break;case QueryViewerOutputType.Table:d="qv-table";break;case QueryViewerOutputType.Map:d="qv-map"}""!=c&&(d+=" "+c);return d},SetUserControlClass:function(a,c){a.getContainerControl().className=
"gx_usercontrol "+c},GetElementInCollection:function(a,c,d){for(var b=0;b<a.length;b++){var l=a[b];if(l[c]==d)return l}return null},IsInteger:function(a){return Number.isInteger?Number.isInteger(a):"number"===typeof a&&isFinite(a)&&Math.floor(a)===a},ApplyPicture:function(a,c,d,b){switch(d){case QueryViewerDataType.Integer:case QueryViewerDataType.Real:return qv.util.formatNumber(a,b.DecimalPrecision,c,!1);case QueryViewerDataType.Boolean:case QueryViewerDataType.Character:case QueryViewerDataType.GUID:case QueryViewerDataType.GeoPoint:return qv.util.trim(a);
case QueryViewerDataType.Date:case QueryViewerDataType.DateTime:return qv.util.formatDateTime(a,d,b.DateFormat,b.IncludeHours,b.IncludeMinutes,b.IncludeSeconds,b.IncludeMilliseconds)}},GetPictureProperties:function(a,c){return a==QueryViewerDataType.Integer||a==QueryViewerDataType.Real?qv.util.ParseNumericPicture(a,c):a==QueryViewerDataType.Date||a==QueryViewerDataType.DateTime?qv.util.ParseDateTimePicture(a,c):null},GetAxisByDataField:function(a,c){for(var d=0;d<a.Metadata.Axes.length;d++)if(a.Metadata.Axes[d].DataField==
c)return a.Metadata.Axes[d]},GetThemeStyleSheet:function(a){a._themeStyleSheet||(a._themeStyleSheet=gx.getThemeElement().sheet);return a._themeStyleSheet},GetNullColor:function(){return qv.util.GetColorObject("")},GetColorObject:function(a){return{IsDefault:!1,Color:a,ColorIndex:"-1"}},IsNullColor:function(a){return a.IsDefault?0>a.ColorIndex:""==a.Color},GetQueryViewerStyleSheet:function(a){if(!a._queryViewerStyleSheet){var c=qv.util.GetLinkOrStyleElement("QueryViewer.css").sheet.rules[0];a._queryViewerStyleSheet=
c.styleSheet}return a._queryViewerStyleSheet},GetLinkOrStyleElement:function(a){if(gx.O.DSO)for(var c=document.getElementsByTagName("style"),d=0;d<c.length;d++){if(c[d].attributes["data-gx-href"]&&0<=c[d].attributes["data-gx-href"].value.indexOf(a))return c[d]}else{c=document.getElementsByTagName("link");for(d=0;d<c.length;d++)if(c[d].attributes.href&&0<=c[d].attributes.href.value.indexOf(a))return c[d]}return null},XAxisDataType:function(a){for(var c=0,d="",b=0;b<a.Metadata.Axes.length;b++){var l=
a.Metadata.Axes[b];if(l.Visible==QueryViewerVisible.Yes||l.Visible==QueryViewerVisible.Always)c++,d=l.DataType}return 1==c?d:QueryViewerDataType.Character},ProcessDataAndMetadata:function(a){function c(a){for(var b=0,e=0;e<a.length;e++)"F0"!=a[e].DataField&&b++;return b}function d(a){a.Chart.Categories={};a.Chart.Categories.DataFields=[];for(var b=0;b<a.Metadata.Axes.length;b++){var e=a.Metadata.Axes[b];if(e.Visible==QueryViewerVisible.Yes||e.Visible==QueryViewerVisible.Always)(a.RealType!=QueryViewerOutputType.Map||
e.DataType==QueryViewerDataType.Character)&&a.Chart.Categories.DataFields.push(e.DataField)}a.Chart.Series={};a.Chart.Series.DataFields=[];e=c(a.Metadata.Data);for(b=0;b<a.Metadata.Data.length;b++){var f=a.Metadata.Data[b];(1==e?f.Visible==QueryViewerVisible.Yes||f.Visible==QueryViewerVisible.Always:f.Visible!=QueryViewerVisible.Never)&&a.Chart.Series.DataFields.push(f.DataField)}}function b(a){for(var b={},e=0;e<a.Metadata.Axes.length;e++){var f=a.Metadata.Axes[e],g=qv.util.GetPictureProperties(f.DataType,
f.Picture);b[f.DataField]={Picture:f.Picture,DataType:f.DataType,PictureProperties:g,Filter:f.Filter}}return b}function l(a,b){function e(a,b,f){function h(a){for(var b=!1,e=0;e<a.length;e++)if(g(a[e].StyleOrClass,!1)[0]){b=!0;break}return b}var c;if(a.RealType==QueryViewerOutputType.Map&&(a.MapType==QueryViewerMapType.Choropleth&&""!=a.Chart.colorAxis||a.MapType==QueryViewerMapType.Bubble&&""!=a.Chart.colorAxis))c=!1;else if(a.RealType==QueryViewerOutputType.Map&&(a.MapType==QueryViewerMapType.Choropleth&&
0==a.Chart.colorAxis.dataClasses.length||a.MapType==QueryViewerMapType.Bubble&&0==a.Chart.colorAxis.dataClasses.length))c=!0;a.RealType==QueryViewerOutputType.Chart&&(qv.chart.IsSingleSerieChart(a)||a.RealChartType==QueryViewerChartType.PolarArea&&1==a.Chart.Series.DataFields.length)?c=!0:a.RealType==QueryViewerOutputType.Chart&&(qv.chart.IsAreaChart(a)||qv.chart.IsLineChart(a)||a.RealChartType==QueryViewerChartType.Radar||a.RealChartType==QueryViewerChartType.FilledRadar)?c=!1:a.RealType==QueryViewerOutputType.Chart&&
1<a.Chart.Series.DataFields.length&&!qv.chart.IsSplittedChart(a)?c=!1:(a=h(b.ConditionalStyles),b=!1,null!=f&&(b=h(f.ValuesStyles)),c=a||b);return c}for(var f={},h=c(a.Metadata.Data),v=0;v<a.Metadata.Data.length;v++){var n=a.Metadata.Data[v];if(1==h?n.Visible==QueryViewerVisible.Yes||n.Visible==QueryViewerVisible.Always:n.Visible!=QueryViewerVisible.Never){var o=e(a,n,b);f[n.DataField]={Datum:n,Multicolored:o}}}return f}function g(a,b){var e="",f=!1,g=b?"backgroundcolor":"color";if(""!=a){for(var h=
a.split(";"),c=0;c<h.length;c++){var n=h[c].split(":");if(2==n.length){var v=qv.util.trim(n[0]),n=qv.util.trim(n[1]);if(v.toLowerCase()==g){e=n;f=""!=n;break}}}f&&"#"==e.substr(0,1)&&(e=e.replace("#",""))}return[f,e]}function s(a,b,e,f,c,h,n){function v(a,b){for(var e=[!1,""],f=0;f<a.ValuesStyles.length;f++){var c=a.ValuesStyles[f];if(c.Value==b){e=g(c.StyleOrClass,!1);break}}return e}function o(a,b){for(var e=[!1,""],f=!1,c=0;c<a.ConditionalStyles.length;c++){var h=a.ConditionalStyles[c];if(f=qv.util.satisfyStyle(b,
h)){e=g(h.StyleOrClass,!1);break}}return e}var m,d=-1,k=!1;if(a){if(a=!1,null!=e&&(e=v(e,h),a=e[0],m=e[1]),!a)e=o(b,n),a=e[0],m=e[1],a||(d=c%HIGHCHARTS_MAX_COLORS,k=!0)}else e=g(b.Style,!1),a=e[0],m=e[1],a||(d=f%HIGHCHARTS_MAX_COLORS,k=!0);return{IsDefault:k,Color:m,ColorIndex:d}}function k(a,b,e,f){for(var c="",g="",h=0;h<a.Chart.Categories.DataFields.length;h++){var n=a.Chart.Categories.DataFields[h],v;void 0!=b[n]?(v=qv.util.trim(b[n]),n=qv.util.ApplyPicture(v,f[n].Picture,f[n].DataType,f[n].PictureProperties)):
n=v=a.Metadata.TextForNullValues;c+=(""==c?"":", ")+v;g+=(""==g?"":", ")+n}b=[c,g];f={};f.Value=b[0];f.ValueWithPicture=b[1];a.Chart.Categories.Values.push(f);if(0==e)a.Chart.Categories.MinValue=f.Value,a.Chart.Categories.MaxValue=f.Value;else if(f.Value>a.Chart.Categories.MaxValue&&(a.Chart.Categories.MaxValue=f.Value),f.Value<a.Chart.Categories.MinValue)a.Chart.Categories.MinValue=f.Value}function u(a,b,e,f,c){for(var g=0;g<a.Chart.Series.DataFields.length;g++){var h=a.Chart.Series.ByIndex[g],n=
a.Chart.Series.DataFields[g],v=void 0!=b[n]?b[n]:null,o={};o.Value=v;var m=f[n].Datum,d=f[n].Multicolored;if(m.Aggregation==QueryViewerAggregationType.Average){var k=b[n+"_N"],n=b[n+"_D"];void 0==k&&void 0==n&&(k=v,n="1");o.Value_N=k;o.Value_D=n}o.Color=d?s(d,m,c,0,e,a.Chart.Categories.Values[e].Value,v):qv.util.GetNullColor();h.Points.push(o);0<o.Value&&(h.PositiveValues=!0);0>o.Value&&(h.NegativeValues=!0);if(0===e)h.MinValue=parseFloat(o.Value),h.MaxValue=parseFloat(o.Value);else if(parseFloat(o.Value)>
h.MaxValue&&(h.MaxValue=parseFloat(o.Value)),parseFloat(o.Value)<h.MinValue)h.MinValue=parseFloat(o.Value)}}function q(a,b){for(var e=0;e<b.ConditionalStyles.length;e++){var f=b.ConditionalStyles[e],h=g(f.StyleOrClass,!0),c=h[1];if(h[0]){plotBand={};plotBand.Color=qv.util.GetColorObject(c);if(f.Operator==QueryViewerConditionOperator.Interval)plotBand.From=parseFloat(f.Value1),plotBand.To=parseFloat(f.Value2);else if(f.Operator==QueryViewerConditionOperator.Equal)plotBand.From=parseFloat(f.Value1),
plotBand.To=parseFloat(f.Value1);else if(f.Operator==QueryViewerConditionOperator.GreaterOrEqual||f.Operator==QueryViewerConditionOperator.GreaterThan)plotBand.From=parseFloat(f.Value1);else if(f.Operator==QueryViewerConditionOperator.LessOrEqual||f.Operator==QueryViewerConditionOperator.LessThan)plotBand.To=parseFloat(f.Value1);plotBand.SeriesName=""!=b.Title?b.Title:b.Name;a.Chart.PlotBands.push(plotBand)}}}function r(a,b){for(var e=!1,f=0;f<a.Metadata.Axes.length;f++){var h=a.Metadata.Axes[f];
if(h.Visible==QueryViewerVisible.Yes||h.Visible==QueryViewerVisible.Always){var g=qv.util.trim(b[h.DataField]);if(h.Filter.Type==QueryViewerFilterType.HideAllValues){e=!0;break}else if(h.Filter.Type==QueryViewerFilterType.ShowSomeValues&&0>h.Filter.Values.indexOf(g)){e=!0;break}if(a.RealType===QueryViewerOutputType.Map&&h.DataType===QueryViewerDataType.Character)if(a.Region===QueryViewerRegion.Country){if(!qv.util.startsWith(g.toUpperCase(),a.Country+"-")){e=!0;break}}else if(a.Region===QueryViewerRegion.Continent)switch(a.Continent){case QueryViewerContinent.Africa:e=
!qv.map.IsAfricanCountry(g.toUpperCase());break;case QueryViewerContinent.Asia:e=!qv.map.IsAsianCountry(g.toUpperCase());break;case QueryViewerContinent.Europe:e=!qv.map.IsEuropeanCountry(g.toUpperCase());break;case QueryViewerContinent.NorthAmerica:e=!qv.map.IsNorthAmericanCountry(g.toUpperCase());break;case QueryViewerContinent.Oceania:e=!qv.map.IsOceanianCountry(g.toUpperCase());break;case QueryViewerContinent.SouthAmerica:e=!qv.map.IsSouthAmericanCountry(g.toUpperCase());break;default:e=!0}}}return e}
function f(a){0>=a.TargetValue&&(a.TargetValue=100);0>=a.MaximumValue&&(a.MaximumValue=100);a.MaximumValue<a.TargetValue&&(a.MaximumValue=a.TargetValue)}function v(a){for(var b=[],e=[],f="",h=0;h<a.Points.length;h++){var g,c;a.Aggregation==QueryViewerAggregationType.Count?(g=0,c=parseFloat(qv.util.trim(a.Points[h].Value))):a.Aggregation==QueryViewerAggregationType.Average?(g=parseFloat(qv.util.trim(a.Points[h].Value_N)),c=parseFloat(qv.util.trim(a.Points[h].Value_D))):(g=parseFloat(qv.util.trim(a.Points[h].Value)),
c=1);b.push(g);e.push(c);""==f&&(f=a.Points[h].Color)}b=qv.util.aggregate(a.Aggregation,b,e).toString();a.Points=[{Value:b,Value_N:b,Value_D:"1",Color:f}];a.NegativeValues=0>b;a.PositiveValues=0<b}function n(a,b){a.Chart.colorAxis=a.Chart.colorAxis||{};a.Chart.colorAxis.dataClasses=a.Chart.colorAxis.dataClasses||[];for(var e=0;e<b.ConditionalStyles.length;e++){var f=b.ConditionalStyles[e];colorAxis={dataClasses:[]};var h={};h.color=f.StyleOrClass.replace("color:","");f.Operator==QueryViewerConditionOperator.Interval?
(h.from=parseFloat(f.Value1),h.to=parseFloat(f.Value2),h.Operator=QueryViewerConditionOperatorSymbol.Interval):f.Operator==QueryViewerConditionOperator.Equal?(h.from=parseFloat(f.Value1),h.Operator=QueryViewerConditionOperatorSymbol.Equal):f.Operator==QueryViewerConditionOperator.GreaterOrEqual?(h.from=parseFloat(f.Value1),h.Operator=QueryViewerConditionOperatorSymbol.GreaterOrEqual):f.Operator==QueryViewerConditionOperator.GreaterThan?(h.from=parseFloat(f.Value1),h.Operator=QueryViewerConditionOperatorSymbol.GreaterThan):
f.Operator==QueryViewerConditionOperator.LessThan?(h.to=parseFloat(f.Value1),h.Operator=QueryViewerConditionOperatorSymbol.LessThan):f.Operator==QueryViewerConditionOperator.LessOrEqual?(h.to=parseFloat(f.Value1),h.Operator=QueryViewerConditionOperatorSymbol.LessOrEqual):f.Operator==QueryViewerConditionOperator.NotEqual&&(h.from=parseFloat(f.Value1),h.Operator=QueryViewerConditionOperatorSymbol.NotEqual);a.Chart.colorAxis.dataClasses.push(h)}}var y=function(a){var b=qv.util.XAxisDataType(a),e;switch(a.RealType){case QueryViewerOutputType.Chart:a=
qv.chart.IsDatetimeXAxis(a)?b==QueryViewerDataType.Date||b==QueryViewerDataType.DateTime:!0;e="GXPL_QViewerNoDatetimeAxis";break;case QueryViewerOutputType.Map:a=b==QueryViewerDataType.GeoPoint||b==QueryViewerDataType.Character;e="GXPL_QViewerNoMapAxis";break;default:a=!0}return{IsOK:a,Error:a?"":gx.getMessage(e)}}(a);if(y.IsOK){a.Chart={};d(a);a.Chart.Categories.MinValue=null;a.Chart.Categories.MaxValue=null;a.Chart.Categories.Values=[];y=b(a);a.Chart.Series.ByIndex=[];var e=1==a.Chart.Categories.DataFields.length?
qv.util.GetAxisByDataField(a,a.Chart.Categories.DataFields[0]):null,h=l(a,e);a.Chart.PlotBands=[];for(var w=0;w<a.Chart.Series.DataFields.length;w++){var F=a.Chart.Series.DataFields[w],o=h[F].Datum,m={MinValue:null,MaxValue:null},F=h[F].Multicolored;m.FieldName=o.Name;m.Name=o.Title;m.Visible=o.Visible;m.DataType=o.DataType;m.Aggregation=o.Aggregation;var G=o.Picture;m.Picture=""==G?m.DataType==QueryViewerDataType.Integer?"ZZZZZZZZZZZZZZ9":"ZZZZZZZZZZZZZZ9.99":G;m.NumberFormat=qv.util.ParseNumericPicture(m.DataType,
m.Picture);m.Color=F?qv.util.GetNullColor():s(F,o,e,w,0,"",0);m.TargetValue=o.TargetValue;m.MaximumValue=o.MaximumValue;f(m);m.PositiveValues=!1;m.NegativeValues=!1;m.Points=[];a.Chart.Series.ByIndex.push(m);a.RealType==QueryViewerOutputType.Chart&&q(a,o);a.RealType==QueryViewerOutputType.Map&&n(a,o)}for(w=o=0;w<a.Data.Rows.length;w++)m=a.Data.Rows[w],r(a,m)||(k(a,m,o,y),u(a,m,o,h,e),o++);if(a.RealType==QueryViewerOutputType.Chart&&qv.chart.IsGaugeChart(a))for(w=0;w<a.Chart.Series.DataFields.length;w++)m=
a.Chart.Series.ByIndex[w],v(m);return""}return y.Error},getTranslation:function(a){return qv.TranslationType==QueryViewerTranslationType.RunTime?gx.getMessage(a):a},getTranslationAlsoIfStatic:function(a){return qv.TranslationType==QueryViewerTranslationType.RunTime||qv.TranslationType==QueryViewerTranslationType.Static?gx.getMessage(a):a},aggregateData:function(a,c){for(var d={},b=0;b<a.length;b++){var l=a[b],g;g=l;for(var s=c,k=[],u=[],q=[],r=0;r<s.length;r++){var f=s[r];if(g.IsFormula){var v=0;
do{v++;var n=f[g.DataField+"_"+v.toString()];void 0!=n&&(n=parseFloat(n),0==r?q.push(n):q[v-1]+=n)}while(void 0!=n)}else g.Aggregation==QueryViewerAggregationType.Count?(v=0,f=parseFloat(f[g.DataField])):g.Aggregation==QueryViewerAggregationType.Average?(v=parseFloat(f[g.DataField+"_N"]),f=parseFloat(f[g.DataField+"_D"])):(v=parseFloat(f[g.DataField]),f=1),k.push(v),u.push(f)}g=g.IsFormula?qv.util.evaluate(g.Formula,g.DataField+"_",q):qv.util.aggregate(g.Aggregation,k,u).toString();d[l.DataField]=
g}return d},isRTL:function(a){var a=a.getContainerControl().id,a=document.getElementById(a),c=!1;cs=window.getComputedStyle?window.getComputedStyle(a,null).getPropertyValue("direction"):a.currentStyle.direction;"rtl"==cs&&(c=!0);return c}};var STATE_DONE=4,STATUS_OK=200,METADATA_VERSION=2;
qv.services=function(){function a(a){return eval(a)[1].replace(/\\/g,".")}function c(a,b){var c=qv.services.RuntimeFieldsJSON(a),d=qv.services.RuntimeParametersJSON(a),q="",l="",f;a:switch(a.RealType){case QueryViewerOutputType.Table:f="IgnoreType";break a;case QueryViewerOutputType.Chart:case QueryViewerOutputType.Card:f="IgnoreTypeAndAxis";break a;default:f="IgnoreNot"}""!=a.QueryInfo&&(l=eval("("+a.QueryInfo+")"),q=l.TextForNullValues,l=gx.json.serializeJson(l.Fields));return a.ObjectName!=b.ObjectName||
a.ObjectType!=b.ObjectType||a.ObjectId!=b.ObjectId||a.Object!=b.Object||c!=b.RuntimeFieldsJSON||d!=b.RuntimeParametersJSON||q!=b.QueryInfoTextForNullValues||l!=b.QueryInfoFieldsJSON||f!=b.MetadataType?(b.ObjectName=a.ObjectName,b.ObjectType=a.ObjectType,b.ObjectId=a.ObjectId,b.Object=a.Object,b.RuntimeFieldsJSON=c,b.RuntimeParametersJSON=d,b.QueryInfoTextForNullValues=q,b.QueryInfoFieldsJSON=l,b.MetadataType=f,!0):!1}function d(a,c){function d(a,e,f){for(var a=b(a),c=0;c<e.length;c++){var g=e[c],
n="";void 0!=g[f]&&(n=g[f].Type);""!=n&&(n=qv.services.postInfo._priv.SdtWithValuesJSON("Order",n,QueryViewerAxisOrderType.Custom,g[f].Values,!1),a+=","+n);void 0!=g.Analytics&&(a+=","+g.Analytics.ShowValuesAs,a+=","+g.Analytics.RollingAverageType,a+=","+g.Analytics.RollingAverageTerms,a+=","+g.Analytics.DifferenceFrom,a+=","+g.Analytics.ShowAsPercentage)}return a}var l=qv.services.RuntimeParametersJSON(a),q=d(a,a.Axes,"AxisOrder"),r="",f="",v="",n=a.RealType==QueryViewerOutputType.Table?"PagedRecordSet":
a.RealType==QueryViewerOutputType.PivotTable?"PagedLineSet":"NotPaged";""!=a.QueryInfo&&(v=eval("("+a.QueryInfo+")"),r=v.SQLSentence,f=gx.json.serializeJson(v.Parameters),v=d(a,v.Fields,"Order"));return a.ObjectName!=c.ObjectName||a.ObjectType!=c.ObjectType||a.ObjectId!=c.ObjectId||a.Object!=c.Object||l!=c.RuntimeParametersJSON||q!=c.FieldsJSON||r!=c.QueryInfoSQLSentence||f!=c.QueryInfoParametersJSON||v!=c.QueryInfoFieldsJSON||n!=c.DataType?(c.ObjectName=a.ObjectName,c.ObjectType=a.ObjectType,c.ObjectId=
a.ObjectId,c.Object=a.Object,c.RuntimeParametersJSON=l,c.FieldsJSON=q,c.QueryInfoSQLSentence=r,c.QueryInfoParametersJSON=f,c.QueryInfoFieldsJSON=v,c.DataType=n,!0):!1}function b(a){return a.RealType==QueryViewerOutputType.Chart&&qv.chart.IsDatetimeXAxis(a)||a.RealType==QueryViewerOutputType.Card&&(a.IncludeSparkline||a.IncludeTrend)}function l(a,b){return{Success:a,Message:b}}return{url:function(){function a(b,g){var d=qv.util.getGenerator(),f;f=(new Date).getTime();var v=b.enableServerDebug?"_debug":
"";switch(d){case "C#":var d=new gx.util.Url(location.href),n=d.path,n=n.substr(0,n.lastIndexOf("/")+1);urlresult=""==d.port?d.protocol+"://"+d.host+n:d.protocol+"://"+d.host+":"+d.port+n;return urlresult+"agxpl_get"+v+".aspx?"+g+","+f;case "Java":return c(!1)+"qviewer.services.agxpl_get"+v+"?"+g+","+f;default:return""}}function b(){var a;a=""!=gx.staticDirectory?gx.staticDirectory:this.getCookie("StaticContent");return qv.util.startsWith(a,"/")?a.substr(1,a.length-1):a}function c(a){var g=gx.util.resourceUrl(gx.basePath,
!0);a&&(g+=b());return g}return{getDefaultOutputURL:function(b){return a(b,"defaultoutput")},getRecordsetCacheKeyURL:function(b){return a(b,"recordsetcachekey")},getMetadataURL:function(b){return a(b,"metadata")},getDataURL:function(b){return a(b,"data")},getAttributeValuesURL:function(b){return a(b,"attributevalues")},getPageDataForTableURL:function(b){return a(b,"pagedatafortable")},getPageDataForPivotTableURL:function(b){return a(b,"pagedataforpivottable")},getQueryParametersURL:function(b){return a(b,
"queryparameters")},getDashboardSpecURL:function(b){return a(b,"dashboardspec")},getStaticDirectory:function(){return"Java"===qv.util.getGenerator()?c(!0):b()}}}(),postInfo:function(){function c(a,b){var g="",k,e,h,l,q,o,m,G,r,p,E,z,u,M,I,D;k=!1;for(i=0;void 0!=a.Axes[i];i++){k=!0;g+=""!=g?",":"";g+="{";e="";l=h=0;o=q="";G=m=!0;p=r="";E=0;D=I=M=u=z="";var B;B=a.Axes[i];var t="",A=!1;if(void 0!=B.Format&&void 0!=B.Format.ValuesStyles)for(var x=0;void 0!=B.Format.ValuesStyles[x];x++)A=!0,t+=""!=t?",":
"",t+="{",t+='"Value":"'+encodeURIComponent(B.Format.ValuesStyles[x].Value)+'"',t+=",",t+='"Style":"'+encodeURIComponent(B.Format.ValuesStyles[x].StyleOrClass)+'"',t+=",",t+='"Propagate":'+(B.Format.ValuesStyles[x].ApplyToRowOrColumn?"true":"false"),t+="}";A&&(t='"ValuesStyles":['+t+"]");B=t;t=a.Axes[i];A="";x=!1;if(void 0!=t.Format&&void 0!=t.Format.ConditionalStyles)for(var L=0;void 0!=t.Format.ConditionalStyles[L];L++)x=!0,A+=""!=A?",":"",A+="{",A+='"Operator":"'+t.Format.ConditionalStyles[L].Operator+
'"',A+=",",A+='"Value1":"'+encodeURIComponent(t.Format.ConditionalStyles[L].Value1)+'"',t.Format.ConditionalStyles[L].Operator==QueryViewerConditionOperator.Interval&&(A+=",",A+='"Value2":"'+encodeURIComponent(t.Format.ConditionalStyles[L].Value2)+'"'),A+=",",A+='"Style":"'+encodeURIComponent(t.Format.ConditionalStyles[L].StyleOrClass)+'"',A+="}";x&&(A='"ConditionalStyles":['+A+"]");t=A;A=a.Axes[i];x="";void 0!=A.Grouping&&(x+="{",x+='"GroupByYear":'+(A.Grouping.GroupByYear?"true":"false"),x+=",",
x+='"YearTitle":"'+A.Grouping.YearTitle+'"',x+=",",x+='"GroupBySemester":'+(A.Grouping.GroupBySemester?"true":"false"),x+=",",x+='"SemesterTitle":"'+A.Grouping.SemesterTitle+'"',x+=",",x+='"GroupByQuarter":'+(A.Grouping.GroupByQuarter?"true":"false"),x+=",",x+='"QuarterTitle":"'+A.Grouping.QuarterTitle+'"',x+=",",x+='"GroupByMonth":'+(A.Grouping.GroupByMonth?"true":"false"),x+=",",x+='"MonthTitle":"'+A.Grouping.MonthTitle+'"',x+=",",x+='"GroupByDayOfWeek":'+(A.Grouping.GroupByDayOfWeek?"true":"false"),
x+=",",x+='"DayOfWeekTitle":"'+A.Grouping.DayOfWeekTitle+'"',x+=",",x+='"HideValue":'+(A.Grouping.HideValue?"true":"false"),x+="}",x='"Grouping":'+x);A=x;void 0!=a.Axes[i].Format&&(e=a.Axes[i].Format.Picture?a.Axes[i].Format.Picture:"",h=a.Axes[i].Format.TargetValue?a.Axes[i].Format.TargetValue:0,l=a.Axes[i].Format.MaximumValue?a.Axes[i].Format.MaximumValue:0,q=a.Axes[i].Format.Style?a.Axes[i].Format.Style:"",o=a.Axes[i].Format.Subtotals?a.Axes[i].Format.Subtotals:"",m=void 0!=a.Axes[i].Format.CanDragToPages?
a.Axes[i].Format.CanDragToPages:!0);void 0!=a.Axes[i].Actions&&(G=a.Axes[i].Actions.RaiseItemClick);void 0!=a.Axes[i].Analytics&&(r=a.Axes[i].Analytics.ShowValuesAs,p=a.Axes[i].Analytics.RollingAverageType,E=a.Axes[i].Analytics.RollingAverageTerms,z=a.Axes[i].Analytics.DifferenceFrom,u=a.Axes[i].Analytics.ShowAsPercentage);void 0!=a.Axes[i].AxisOrder&&(M=a.Axes[i].AxisOrder.Type);void 0!=a.Axes[i].ExpandCollapse&&(I=a.Axes[i].ExpandCollapse.Type);void 0!=a.Axes[i].Filter&&(D=a.Axes[i].Filter.Type);
void 0==D&&(D=QueryViewerFilterType.ShowSomeValues);g+='"Name":"'+encodeURIComponent(a.Axes[i].Name)+'"';g+=",";g+='"Caption":"'+encodeURIComponent(a.Axes[i].Title)+'"';g+=",";g+='"Aggregation":"'+a.Axes[i].Aggregation+'"';g+=",";g+='"Visible":"'+a.Axes[i].Visible+'"';g+=",";g+='"Type":"'+a.Axes[i].Type+'"';g+=",";g+='"Axis":"'+a.Axes[i].Axis+'"';g+=",";g+='"Picture":"'+encodeURIComponent(e)+'"';g+=",";g+='"TargetValue":'+h;g+=",";g+='"MaximumValue":'+l;g+=",";g+='"Style":"'+q+'"';g+=",";g+='"Subtotals":"'+
o+'"';g+=",";g+='"CanDragToPages":'+m;g+=",";g+='"RaiseItemClick":'+G;""!=r&&(g+=",",g+='"Analytics":{',g+='"ShowValuesAs":"'+r+'"',g+=",",g+='"RollingAverageType":"'+p+'"',g+=",",g+='"RollingAverageTerms":'+E,g+=",",g+='"DifferenceFrom":"'+z+'"',g+=",",g+='"ShowAsPercentage":"'+u+'"',g+="}");""!=M&&(e=d("Order",M,QueryViewerAxisOrderType.Custom,a.Axes[i].AxisOrder.Values,b),g+=""!=e?","+e:"");""!=I&&(I=d("ExpandCollapse",I,QueryViewerExpandCollapseType.ExpandSomeValues,a.Axes[i].ExpandCollapse.Values,
b),g+=""!=I?","+I:"");""!=D&&a.Axes[i].Filter.Values&&(D=d("Filter",D,QueryViewerFilterType.ShowSomeValues,a.Axes[i].Filter.Values,b),g+=""!=D?","+D:"");g+=""!=B?","+B:"";g+=""!=t?","+t:"";g+=""!=A?","+A:"";g+="}"}k&&(g='"RuntimeFields":['+g+"]");return g}function d(a,b,g,c,e){var h="";if(""!=b){h=h+('"'+a+'":')+"{"+('"Type":"'+b+'"');strValues="";if(b==g){existValues=!1;for(j=0;void 0!=c[j];j++)existValues=!0,strValues+=""!=strValues?",":"",strValues=e?strValues+('"'+encodeURIComponent(c[j])+'"'):
strValues+('"'+c[j]+'"');existValues&&(strValues=',"Values":['+strValues+"]")}h+=strValues;h+="}"}return h}function k(a){var b="",g=!1;if(a.Object){a=eval(a.Object);for(i=2;i<a.length;i++)g=!0,b+=""!=b?",":"",b+="{",b+='"Value":"'+encodeURIComponent(a[i])+'"',b+="}"}else for(i=0;void 0!=a.Parameters[i];i++)g=!0,b+=""!=b?",":"",b+="{",b+='"Name":"'+a.Parameters[i].Name+'"',b+=",",b+='"Value":"'+encodeURIComponent(a.Parameters[i].Value)+'"',b+="}";g&&(b='"RuntimeParameters":['+b+"]");return b}function l(a){var b=
"",g=!1;for(i=0;void 0!=a[i];i++){g=!0;b+=""!=b?",":"";b+="{";b+='"DataField":"'+a[i].DataField+'"';b+=",";b+='"NullIncluded":'+a[i].NullIncluded;strIncludedValues="";existValues=!1;for(j=0;void 0!=a[i].NotNullValues.Included[j];j++)existValues=!0,strIncludedValues+=""!=strIncludedValues?",":"",strIncludedValues+='"'+encodeURIComponent(a[i].NotNullValues.Included[j])+'"';existValues&&(strIncludedValues=',"Included":['+strIncludedValues+"]");strExcludedValues="";existValues=!1;for(j=0;void 0!=a[i].NotNullValues.Excluded[j];j++)existValues=
!0,strExcludedValues+=""!=strExcludedValues?",":"",strExcludedValues+='"'+encodeURIComponent(a[i].NotNullValues.Excluded[j])+'"';existValues&&(strExcludedValues=',"Excluded":['+strExcludedValues+"]");b+=",";b+='"NotNullValues":{"DefaultAction":"'+a[i].NotNullValues.DefaultAction+'"'+strIncludedValues+strExcludedValues+"}";b+="}"}g&&(b='"Filters":['+b+"]");return b}function q(a){return a.UseRecordsetCache?'{"ActualKey":"'+a.RecordsetCache.ActualKey+'","OldKey":"'+a.RecordsetCache.OldKey+'","MinutesToKeep":'+
a.MinutesToKeepInRecordsetCache+',"MaximumSize":'+a.MaximumCacheSize+"}":'{"ActualKey":"","OldKey":"","MinutesToKeep":0,"MaximumSize":0}'}function r(b){var g;g=""+(""!=b.ApplicationNamespace?'"ApplicationNamespace":"'+b.ApplicationNamespace+'",':"");g+='"ParentPanel":"'+b.ParentPanel+'"';g+=",";b.Object?g+='"ObjectName":"'+a(b.Object)+'"':(g+='"ObjectName":"'+b.ObjectName+'"',g=g+","+('"Alt_ObjectType":"'+b.ObjectType+'"'),g=g+","+('"Alt_ObjectId":'+b.ObjectId));return g}return{DefaultOutput:function(a){var b;
b="{"+r(a);b+=""!=a.ObjectInfo?',"ObjectInfo":'+a.ObjectInfo:"";return"Data="+encodeURIComponent(b+"}")},RecordsetCacheKey:function(a){a="{"+r(a);return"Data="+encodeURIComponent(a+"}")},Metadata:function(a){var b="",d=k(a),l=c(a,!0),b=b+"{"+r(a),b=b+(""!=a.QueryInfo?',"QueryInfo":'+a.QueryInfo:""),b=b+(""!=a.AppSettings?',"AppSettings":'+a.AppSettings:""),b=b+(""!=d?","+d:"")+(""!=l?","+l:"")+","+('"OutputType":"'+a.RealType+'"'),b=b+","+('"AllowElementsOrderChange":'+a.AllowElementsOrderChange),
b=b+","+('"RememberLayout":'+a.RememberLayout),b=b+","+('"ShowDataLabelsIn":"'+a.ShowDataLabelsIn+'"'),b=b+","+('"RecordsetCacheInfo":'+q(a)),b=b+","+('"ReturnSampleData":'+a.ReturnSampleData),b=b+","+('"TranslationType":"'+a.TranslationType+'"');return"Data="+encodeURIComponent(b+"}")},Data:function(a){var d="",l=k(a),s=c(a,!0),d=d+"{"+r(a),d=d+(""!=a.QueryInfo?',"QueryInfo":'+a.QueryInfo:""),d=d+(""!=a.AppSettings?',"AppSettings":'+a.AppSettings:""),d=d+(""!=l?","+l:"")+(""!=s?","+s:"")+","+('"OutputType":"'+
a.RealType+'"'),d=d+","+('"SortAscendingForced":'+b(a)),d=d+","+('"AllowElementsOrderChange":'+a.AllowElementsOrderChange),d=d+","+('"RecordsetCacheInfo":'+q(a)),d=d+","+('"ReturnSampleData":'+a.ReturnSampleData),d=d+","+('"TranslationType":"'+a.TranslationType+'"');return"Data="+encodeURIComponent(d+"}")},AttributeValues:function(a,b,d,l,e){var h="",w=k(a),s=c(a,!0),h=h+"{"+r(a),h=h+","+('"DataField":"'+b+'"')+","+('"PageNumber":'+d)+","+('"PageSize":'+l)+","+('"Filter":"'+e+'"')+(""!=a.QueryInfo?
',"QueryInfo":'+a.QueryInfo:""),h=h+(""!=a.AppSettings?',"AppSettings":'+a.AppSettings:""),h=h+(""!=w?","+w:"")+(""!=s?","+s:"")+","+('"OutputType":"'+a.RealType+'"'),h=h+","+('"AllowElementsOrderChange":'+a.AllowElementsOrderChange),h=h+","+('"RecordsetCacheInfo":'+q(a)),h=h+","+('"ReturnSampleData":'+a.ReturnSampleData),h=h+","+('"TranslationType":"'+a.TranslationType+'"');return"Data="+encodeURIComponent(h+"}")},TablePageData:function(a,b,d,s,e,h,w,F){var o="",m=k(a),G=c(a,!0),w=l(w),o=o+"{"+r(a),
o=o+","+('"PageNumber":'+b)+","+('"PageSize":'+(gx.lang.gxBoolean(a.Paging)?d:0)),o=o+","+('"ReturnTotPages":'+s)+","+('"Order":'+('{"DataField":"'+e+'","Type":"'+h+'"}'))+(""!=w?","+w:"")+(""!=a.QueryInfo?',"QueryInfo":'+a.QueryInfo:""),o=o+(""!=a.AppSettings?',"AppSettings":'+a.AppSettings:""),o=o+(""!=m?","+m:"")+(""!=G?","+G:"")+","+('"AllowElementsOrderChange":'+a.AllowElementsOrderChange),o=o+","+('"RecordsetCacheInfo":'+q(a)),o=o+","+('"LayoutChanged":'+F)+","+('"ReturnSampleData":'+a.ReturnSampleData),
o=o+","+('"TranslationType":"'+a.TranslationType+'"');return"Data="+encodeURIComponent(o+"}")},PivotTablePageData:function(a,b,d,s,e,h,w,F,o){for(var m="",G=k(a),N=c(a,!0),p="",E=!1,z=0;void 0!=e[z];z++)E=!0,p+=""!=p?",":"",p+="{",p+='"DataField":"'+e[z].DataField+'"',p+=",",p+='"Visible":'+!e[z].Hidden,p+=",",p+='"Axis":"'+e[z].Axis.Type+'"',p+=",",p+='"Position":'+(qv.util.IsInteger(e[z].Axis.Position)?e[z].Axis.Position:0),p+=",",p+='"Order":"'+e[z].Order+'"',p+=",",p+='"Subtotals":'+e[z].Subtotals,
p+="}";E&&(p='"AxesInfo":['+p+"]");e=p;p="";E=!1;for(z=0;void 0!=h[z];z++)E=!0,p+=""!=p?",":"",p+="{",p+='"DataField":"'+h[z].DataField+'"',p+=",",p+='"Visible":'+!h[z].Hidden,p+=",",p+='"Position":'+(qv.util.IsInteger(h[z].Position)?h[z].Position:0),p+="}";E&&(p='"DataInfo":['+p+"]");h=p;w=l(w);p="";E=!1;for(z=0;void 0!=F[z];z++){E=!0;p+=""!=p?",":"";p+="{";p+='"DataField":"'+F[z].DataField+'"';p+=",";p+='"NullExpanded":'+F[z].NullExpanded;strExpandedValues="";existValues=!1;for(var H=0;void 0!=
F[z].NotNullValues.Expanded[H];H++)existValues=!0,strExpandedValues+=""!=strExpandedValues?",":"",strExpandedValues+='"'+encodeURIComponent(F[z].NotNullValues.Expanded[H])+'"';existValues&&(strExpandedValues=',"Expanded":['+strExpandedValues+"]");strCollapsedValues="";existValues=!1;for(H=0;void 0!=F[z].NotNullValues.Collapsed[H];H++)existValues=!0,strCollapsedValues+=""!=strCollapsedValues?",":"",strCollapsedValues+='"'+encodeURIComponent(F[z].NotNullValues.Collapsed[H])+'"';existValues&&(strCollapsedValues=
',"Collapsed":['+strCollapsedValues+"]");p+=",";p+='"NotNullValues":{"DefaultAction":"'+F[z].NotNullValues.DefaultAction+'"'+strExpandedValues+strCollapsedValues+"}";p+="}"}E&&(p='"ExpandCollapse":['+p+"]");F=p;m=m+"{"+r(a);m=m+","+('"PageNumber":'+b)+","+('"PageSize":'+(gx.lang.gxBoolean(a.Paging)?d:0));m=m+","+('"ReturnTotPages":'+s)+","+('"ShowDataLabelsIn":"'+a.ShowDataLabelsIn+'"');m=m+","+('"TotalForRows":"'+a.TotalForRows+'"');m=m+","+('"TotalForColumns":"'+a.TotalForColumns+'"');m=m+(""!=
e?","+e:"")+(""!=h?","+h:"")+(""!=w?","+w:"")+(""!=F?","+F:"")+(""!=a.QueryInfo?',"QueryInfo":'+a.QueryInfo:"");m+=""!=a.AppSettings?',"AppSettings":'+a.AppSettings:"";m=m+(""!=G?","+G:"")+(""!=N?","+N:"")+","+('"AllowElementsOrderChange":'+a.AllowElementsOrderChange);m=m+","+('"RecordsetCacheInfo":'+q(a));m=m+","+('"LayoutChanged":'+o)+","+('"ReturnSampleData":'+a.ReturnSampleData);m=m+","+('"TranslationType":"'+a.TranslationType+'"');return"Data="+encodeURIComponent(m+"}")},getQueryParameters:function(a){var b;
b="{"+r(a);b+=""!=a.ObjectInfo?',"ObjectInfo":'+a.ObjectInfo:"";return"Data="+encodeURIComponent(b+"}")},DashboardSpec:function(b){var g="";b.Object&&(g=a(b.Object));b=JSON.stringify({ApplicationNamespace:b.ApplicationNamespace,ObjectName:g,Alt_ObjectId:0});return"Data="+encodeURIComponent(b)},_priv:{RuntimeParametersJSON:function(a){return k(a)},RuntimeFieldsJSON:function(a){return c(a)},SdtWithValuesJSON:function(a,b,g,c,e){return d(a,b,g,c,e)}}}}(),RuntimeParametersJSON:function(a){return this.postInfo._priv.RuntimeParametersJSON(a)},
RuntimeFieldsJSON:function(a,b){return this.postInfo._priv.RuntimeFieldsJSON(a,b)},getXMLHttpRequest:function(){if(window.XMLHttpRequest)return new window.XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(a){return null}},CallServerSync:function(a,b,c,d){d=d||[];d.unshift(a);a=b.call(qv.services.url,a);c=c.apply(qv.services.postInfo,d);d=qv.services.getXMLHttpRequest();d.open("POST",a,!1);d.setRequestHeader("Content-Type","application/x-www-form-urlencoded");d.send(c);return d.responseText},
createAsyncServerCallFn:function(a,b,c,d,l){return function(r,f){f=f||[];f.unshift(a);var v=function(b){l&&a.RealType!=QueryViewerOutputType.Card&&(b=l.call(qv.util.css,b));r(b,a)};if(gx.lang.gxBoolean(a.IsExternalQuery))v(a.ExternalQueryResultObj()[d]);else{var n=b.call(qv.services.url,a),y=c.apply(qv.services.postInfo,f),e=qv.services.getXMLHttpRequest(),h=function(){e.readyState==STATE_DONE&&e.status==STATUS_OK&&v(e.responseText)};gx.util.browser.isIE()?e.onreadystatechange=h:e.onload=h;e.open("POST",
n);e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");e.send(y)}}},parseRecordsetCacheKeyXML:function(a){""!=a.xml.recordsetCacheKey&&(a.RecordsetCache=a.RecordsetCache||{},a.RecordsetCache.OldKey=a.RecordsetCache.ActualKey?a.RecordsetCache.ActualKey:"",a.RecordsetCache.ActualKey=a.xml.recordsetCacheKey)},parseDataXML:function(a){if(""!=a.xml.data){var b=qv.util.dom.xmlDocument(a.xml.data),b=qv.util.dom.getSingleElementByTagName(b,"Recordset");a.Data=a.Data||{};b=gx.util.browser.isIE()?
qv.util.dom.getMultipleElementsByTagName(qv.util.dom.getSingleElementByTagName(b,"Page"),"Record"):qv.util.dom.getMultipleElementsByTagName(b,"Record");a.Data.Rows=[];for(var c=0;c<b.length;c++){for(var d={},l=0;l<b[c].childNodes.length;l++){var r=b[c].childNodes[l];1==r.nodeType&&(d[r.nodeName]=1==r.childNodes.length?r.childNodes[0].nodeValue:"")}a.Data.Rows.push(d)}}},parseMetadataXML:function(a){function b(a,e){if("greaterequal"==a&&"lessequal"==e)return QueryViewerConditionOperator.Interval;switch(a){case "equal":return QueryViewerConditionOperator.Equal;
case "less":return QueryViewerConditionOperator.LessThan;case "greater":return QueryViewerConditionOperator.GreaterThan;case "lessequal":return QueryViewerConditionOperator.LessOrEqual;case "greaterequal":return QueryViewerConditionOperator.GreaterOrEqual;case "notequal":return QueryViewerConditionOperator.NotEqual}}function c(a,b,e,g){var h={},a=qv.util.dom.getSingleElementByTagName(a,b);if(null!=a){h.GroupFound=!0;h.TotalValueFound=!1;e=qv.util.dom.getMultipleElementsByTagName(a,e);h.Values=[];
for(a=0;a<e.length;a++)b=null!=e[a].firstChild?e[a].firstChild.nodeValue:"","TOTAL"==b&&g?h.TotalValueFound=!0:h.Values.push(b)}else h.GroupFound=!1;return h}function d(a){if(0==a.indexOf("gxpl_cssReplace("))var b=a.indexOf("gxpl_cssReplace("),e=a.indexOf(")",b),a=a.substring(b+16,e);return a}function q(a){for(var a=qv.util.dom.getSingleElementByTagName(a,"formatValues"),a=null!=a?qv.util.dom.getMultipleElementsByTagName(a,"value"):[],b=[],e=0;e<a.length;e++){var c={};c.Value=qv.util.trim(null!=a[e].firstChild?
a[e].firstChild.nodeValue:"");c.StyleOrClass=d(a[e].getAttribute("format"));c.ApplyToRowOrColumn="yes"==a[e].getAttribute("recursive");b.push(c)}return b}function r(a){for(var a=qv.util.dom.getSingleElementByTagName(a,"conditionalFormats"),a=null!=a?qv.util.dom.getMultipleElementsByTagName(a,"rule"):[],e=[],c=0;c<a.length;c++){var g={};g.Operator=b(a[c].getAttribute("op1"),a[c].getAttribute("op2"));g.Value1=parseFloat(a[c].getAttribute("value1"));g.Operator==QueryViewerConditionOperator.Interval&&
(g.Value2=parseFloat(a[c].getAttribute("value2")));g.StyleOrClass=d(a[c].getAttribute("format"));e.push(g)}return e}if(""!=a.xml.metadata){var f=qv.util.dom.xmlDocument(a.xml.metadata),v=qv.util.dom.getSingleElementByTagName(f,"OLAPCube"),f=v.getAttribute("Version");if(null==f||parseInt(f)==METADATA_VERSION){a.Metadata=a.Metadata||{};a.Metadata.TextForNullValues=v.getAttribute("textForNullValues");var n=qv.util.dom.getMultipleElementsByTagName(v,"OLAPDimension");a.Metadata.Axes=[];for(f=0;f<n.length;f++){var y=
{};y.Name=n[f].getAttribute("name");y.Title=n[f].getAttribute("displayName");y.DataField=n[f].getAttribute("dataField");y.DataType=n[f].getAttribute("dataType");y.Visible=n[f].getAttribute("visible");y.Axis=n[f].getAttribute("axis");y.Picture=n[f].getAttribute("picture");if(""==y.Picture)switch(y.DataType){case QueryViewerDataType.Integer:y.Picture="ZZZZZZZZZZZZZZ9";break;case QueryViewerDataType.Real:y.Picture="ZZZZZZZZZZZZZZ9.99";break;case QueryViewerDataType.Date:y.Picture="99/99/9999";break;
case QueryViewerDataType.DateTime:y.Picture="99/99/9999 99:99:99";break;case QueryViewerDataType.GUID:y.Picture="XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX"}y.CanDragToPages=qv.util.dom.getBooleanAttribute(n[f],"canDragToPages",!0);y.RaiseItemClick=qv.util.dom.getBooleanAttribute(n[f],"raiseItemClick",!0);y.IsComponent=qv.util.dom.getBooleanAttribute(n[f],"isComponent",!1);y.Style=n[f].getAttribute("format");var e=c(n[f],"include","value",!0),h=c(n[f],"exclude","value",!0),w=c(n[f],"expand","value",!1),
F=c(n[f],"customOrder","Value",!1);y.Subtotals="no"==n[f].getAttribute("summarize")?QueryViewerSubtotals.No:h.GroupFound&&h.TotalValueFound?QueryViewerSubtotals.Hidden:QueryViewerSubtotals.Yes;y.Filter={};!e.GroupFound&&!h.GroupFound?(y.Filter.Type=QueryViewerFilterType.ShowAllValues,y.Filter.Values=[]):!e.GroupFound&&h.GroupFound&&0==h.Values.length&h.TotalValueFound?(y.Filter.Type=QueryViewerFilterType.ShowAllValues,y.Filter.Values=[]):e.GroupFound&&!h.GroupFound&&0==e.Values.length?(y.Filter.Type=
QueryViewerFilterType.HideAllValues,y.Filter.Values=[]):(y.Filter.Type=QueryViewerFilterType.ShowSomeValues,y.Filter.Values=e.Values);y.ExpandCollapse={};w.GroupFound?w.GroupFound&&0==w.Values.length?(y.ExpandCollapse.Type=QueryViewerExpandCollapseType.CollapseAllValues,y.ExpandCollapse.Values=[]):(y.ExpandCollapse.Type=QueryViewerExpandCollapseType.ExpandSomeValues,y.ExpandCollapse.Values=w.Values):(y.ExpandCollapse.Type=QueryViewerExpandCollapseType.ExpandAllValues,y.ExpandCollapse.Values=[]);y.Order=
{};e=n[f].getAttribute("order");null==e?(y.Order.Type=QueryViewerAxisOrderType.None,y.Order.Values=[]):(y.Order.Type=qv.util.capitalize(e),y.Order.Values=y.Order.Type==QueryViewerAxisOrderType.Custom?F.Values:[]);y.ValuesStyles=q(n[f]);a.Metadata.Axes.push(y)}v=qv.util.dom.getMultipleElementsByTagName(v,"OLAPMeasure");a.Metadata.Data=[];for(f=0;f<v.length;f++)n={},n.Name=v[f].getAttribute("name"),n.Title=v[f].getAttribute("displayName"),n.DataField=v[f].getAttribute("dataField"),n.Aggregation=v[f].getAttribute("aggregation"),
n.DataType=v[f].getAttribute("dataType"),n.Visible=v[f].getAttribute("visible"),n.Picture=v[f].getAttribute("picture"),n.RaiseItemClick=qv.util.dom.getBooleanAttribute(v[f],"raiseItemClick",!0),n.IsComponent=qv.util.dom.getBooleanAttribute(v[f],"isComponent",!1),""==n.Picture&&(n.Picture=n.DataType==QueryViewerDataType.Integer?"ZZZZZZZZZZZZZZ9":"ZZZZZZZZZZZZZZ9.99"),n.Aggregation=qv.util.capitalize(n.Aggregation),n.TargetValue=parseFloat(v[f].getAttribute("targetValue")),n.MaximumValue=parseFloat(v[f].getAttribute("maximumValue")),
n.Style=v[f].getAttribute("format"),0>=n.TargetValue&&(n.TargetValue=100),0>=n.MaximumValue&&(n.MaximumValue=100),n.ConditionalStyles=r(v[f]),y=qv.util.dom.getCharacterAttribute(v[f],"formula",""),n.IsFormula=""!=y,n.Formula=y,a.Metadata.Data.push(n);a.Metadata.ParserResult=l(!0,"")}else a.Metadata.ParserResult=l(!1,gx.getMessage("GXPL_QViewerWrongMetadataVersion").replace("{0}",METADATA_VERSION))}},GetDataIfNeeded:function(a,b){a.Data=a.Data||{};a.Data.LastServiceCallKey=a.Data.LastServiceCallKey||
{};void 0==a.xml.data||d(a,a.Data.LastServiceCallKey)||gx.lang.gxBoolean(a.IsExternalQuery)?a.calculatePivottableData(b):b(a.xml.data,a)},GetMetadataIfNeeded:function(a,b){a.Metadata=a.Metadata||{};a.Metadata.LastServiceCallKey=a.Metadata.LastServiceCallKey||{};void 0==a.xml.metadata||c(a,a.Metadata.LastServiceCallKey)||gx.lang.gxBoolean(a.IsExternalQuery)?a.calculatePivottableMetadata(b):b(a.xml.metadata,a)},GetDashboardSpecIfNeeded:function(b,c){b.DashboardSpec=b.DashboardSpec||"";b.LastServiceCallKey=
b.LastServiceCallKey||{};var d;if(!(d=void 0==b.DashboardSpec))if(d=b.LastServiceCallKey,b.Object){var l=a(b.Object);l!=d.ObjectName?(d.ObjectName=l,d=!0):d=!1}else d=""==b.DashboardSpec;d?(b.LoadingSpec=!0,b.GetDashboardSpec(c)):c(b.DashboardSpec,b)},GetRecordsetCacheKeyIfNeeded:function(a,b){a.UseRecordsetCache&&!gx.lang.gxBoolean(a.IsExternalQuery)?(a.RecordsetCache=a.RecordsetCache||{},a.RecordsetCache.LastServiceCallKey=a.RecordsetCache.LastServiceCallKey||{},void 0==a.xml.recordsetCacheKey||
d(a,a.RecordsetCache.LastServiceCallKey)?a.getRecordsetCacheKey(b):b(a.xml.recordsetCacheKey,a)):b("",a)},IsObjectSet:function(a){return a.Object||""!=a.ObjectName||""!=a.ObjectType&&0!=a.ObjectId}}}();
qv.pivot=function(){function a(a){var c=qv.util.GetContainerControlClasses(a);""!=c&&qv.util.SetUserControlClass(a,c);c=a.userControlId()+"_"+a.RealObjectName().replace(/,/g,"").replace(/\./g,"")+"_pivot_page";a.pivotParams={};a.pivotParams.page=c;var g=a.userControlId()+"_"+a.RealObjectName().replace(/,/g,"").replace(/\./g,"")+"_pivot_content";a.pivotParams.content=g;if(a._ControlRenderedTo!=a.RealType||0==jQuery("#"+g).length)if(a._ControlRenderedTo!=a.RealType&&a.RealType==QueryViewerOutputType.PivotTable){var d=
qv.util.dom.getEmptyContainer(a);a.Title&&qv.util.dom.createDiv(d,c.replace("_pivot_page","_title_div"),"","",{},"");qv.util.dom.createDiv(d,c,"","",{},"");qv.util.dom.createDiv(d,g,"","",{},"")}else a.Title&&jQuery("#"+a.ContainerName).find(".pivot_title_div").attr("id",c.replace("_pivot_page","_title_div")),jQuery("#"+a.ContainerName).find(".pivot_filter_div").attr("id",c),jQuery("#"+a.ContainerName).find(".conteiner_table_div").attr("id",g);a.pivotParams.container=a.getContainerControl();a.pivotParams.RealType=
a.RealType;a.pivotParams.ObjectName=a.RealObjectName();a.pivotParams.ControlName=a.ControlName;a.pivotParams.PageSize=a.Paging&&"false"!=a.Paging?a.PageSize:void 0;a.pivotParams.metadata=a.xml.metadata;c=gx.lang.gxBoolean(a.IsExternalQuery)?a.xml.data:a.RealType==QueryViewerOutputType.Table?a.ServerPagingForTable?a.xml.pageData:a.xml.data:a.ServerPagingForPivotTable?a.xml.pageData:a.xml.data;a.pivotParams.data=c;a.pivotParams.UcId=a.userControlId();a.pivotParams.AutoResize=gx.lang.gxBoolean(a.AutoResize)||
gx.lang.gxBoolean(a.ShrinkToFit);a.pivotParams.DisableColumnSort=a.DisableColumnSort;a.pivotParams.RememberLayout=a.RememberLayout;a.pivotParams.ShowDataLabelsIn=a.ShowDataLabelsIn;a.pivotParams.ServerPaging=a.ServerPagingForTable&&!gx.lang.gxBoolean(a.IsExternalQuery);a.pivotParams.ServerPagingPivot=a.ServerPagingForPivotTable&&!gx.lang.gxBoolean(a.IsExternalQuery);a.pivotParams.ServerPagingCacheSize=0;a.pivotParams.UseRecordsetCache=a.UseRecordsetCache&&!gx.lang.gxBoolean(a.IsExternalQuery);a.pivotParams.AllowSelection=
a.AllowSelection;a.pivotParams.SelectLine=!0;a.pivotParams.TotalForColumns=a.TotalForColumns;a.pivotParams.TotalForRows=a.TotalForRows;a.pivotParams.Title=qv.util.getTranslation(a.Title);void 0!=OAT.Loader?renderJSPivot(a.pivotParams,qv.collection,a):OAT.Loader.addListener(function(){renderJSPivot(a.pivotParams,qv.collection,a)});a._ControlRenderedTo=a.RealType;a.RealType==QueryViewerOutputType.Table&&qv.util.hideActivityIndicator(a)}function c(b){for(var c="",g="",d=0;d<b.Metadata.Axes.length;d++){var k=
b.Metadata.Axes[d];if(k.Order.Type==QueryViewerAxisOrderType.Ascending||k.Order.Type==QueryViewerAxisOrderType.Descending){c=k.DataField;g=k.Order.Type;break}}b.getPageDataForTable(function(b,c){(new Date).getTime();qv.util.anyError(b)?(errMsg=qv.util.getErrorFromText(b),qv.util.renderError(c,errMsg)):(""!=b&&(c.xml.pageData=b),a(c))},[1,b.PageSize,!0,c,g,[],!1])}function d(a,c){var g=[];if(null!=a)for(var d=-1,k=0;k<a.childNodes.length;k++)if("ITEM"==a.childNodes[k].nodeName){var u=a.childNodes[k].getAttribute("name");
if(0>c.indexOf(u)){d++;g[d]={};g[d].Name=u;g[d].Values=[];for(var u=-1,q=a.childNodes[k],r=0;r<a.childNodes[k].childNodes.length;r++)if("VALUES"==a.childNodes[k].childNodes[r].nodeName){q=a.childNodes[k].childNodes[r];break}for(r=0;r<q.childNodes.length;r++)"VALUE"==q.childNodes[r].nodeName&&(u++,g[d].Values[u]=null!=q.childNodes[r].firstChild?q.childNodes[r].firstChild.nodeValue:"")}}return g}return{tryToRenderPivotTable:function(b){var d="",g=(new Date).getTime();b.xml=b.xml||{};qv.services.GetRecordsetCacheKeyIfNeeded(b,
function(b,k){var u=!1;b!=k.xml.recordsetCacheKey&&(k.xml.recordsetCacheKey=b,u=!0);qv.util.anyError(b)?(d=qv.util.getErrorFromText(b),qv.util.renderError(k,d)):(u&&qv.services.parseRecordsetCacheKeyXML(k),qv.services.GetMetadataIfNeeded(k,function(b,k){var f=false;if(b!=k.xml.metadata){k.xml.metadata=b;f=true}var v=(new Date).getTime();if(qv.util.anyError(b)){d=qv.util.getErrorFromText(b);qv.util.renderError(k,d)}else{f&&qv.services.parseMetadataXML(k);if(k.Metadata.ParserResult.Success)if(k.ServerPagingForTable&&
k.RealType==QueryViewerOutputType.Table&&!gx.lang.gxBoolean(k.IsExternalQuery)){f=false;OAT.getStateWhenServingPaging&&(f=OAT.getStateWhenServingPaging(k.userControlId()+"_"+k.ObjectName,k.ObjectName));!f||!k.RememberLayout?c(k,g,v):a(k)}else if(k.ServerPagingForPivotTable&&k.RealType==QueryViewerOutputType.PivotTable&&!gx.lang.gxBoolean(k.IsExternalQuery)){f=false;OAT.getStateWhenServingPaging&&(f=OAT.getStateWhenServingPaging(k.userControlId()+"_"+k.ObjectName,k.ObjectName));a(k)}else qv.services.GetDataIfNeeded(k,
function(b,c){if(b!=c.xml.data)c.xml.data=b;(new Date).getTime();if(qv.util.anyError(b)){d=qv.util.getErrorFromText(b);qv.util.renderError(c,d)}else a(c)});else qv.util.renderError(k,k.Metadata.ParserResult.Message)}}))})},GetMetadataPivot:function(a){var c=qv.util.GetDesigntimeMetadata(a);if(0<c.length){for(var g=a.oat_element.getMetadataXML(),g=qv.pivot.GetRuntimeMetadata(g,a.RealType),d=[],a=qv.util.GetOrderedElementsKeys(a,g),k=0;k<a.length;k++)for(var u=parseInt(a[k].substr(6,4)),u=g[u],q,r=
0;r<c.length;r++)if(q=c[r],q.Name==u.Name){q=qv.util.cloneObject(q);qv.util.MergeFields(u,q);d.push(q);break}return d}return[]},GetRuntimeMetadata:function(a,c){function d(a,b,e,c,h){var b=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(a,b)),g=[];if(b==c&&(a=qv.util.dom.getSingleElementByTagName(a,e),null!=a)){a=qv.util.dom.getMultipleElementsByTagName(a,"value");for(e=0;e<a.length;e++)c=qv.util.trim(qv.util.dom.getValueNode(a[e])),null!=c&&("TOTAL"!=c.toUpperCase()||!h)&&g.push(c)}return{Type:b,
Values:g}}var s=qv.util.dom.xmlDocument(a),s=qv.util.dom.getSingleElementByTagName(s,"OLAPCube"),k=[],u;u=qv.util.dom.getMultipleElementsByTagName(s,"OLAPDimension");for(var q=0;q<u.length;q++){var r={},f=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(u[q],"name")),v="true"==qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(u[q],"hidden")),n=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(u[q],"axis")),y=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(u[q],
"position")),e=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(u[q],"summarize")),h=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(u[q],"order"));r.Name=f;r.Type=QueryViewerElementType.Axis;r.Hidden=v;r.Axis=null!=n&&""!=n&&"null"!=n?qv.util.capitalize(n):null;r.Position=y;r.Order=null!=h&&""!=h&&"null"!=h?qv.util.capitalize(h):null;c==QueryViewerOutputType.Table?(r.Filter=d(u[q],"","include",null,!0),r.Filter.Type=QueryViewerFilterType.ShowSomeValues):(r.Subtotals=
"no"==e?QueryViewerSubtotals.No:QueryViewerSubtotals.Yes,r.Filter=d(u[q],"filterType","include",QueryViewerFilterType.ShowSomeValues,!0),r.ExpandCollapse=d(u[q],"collapseType","includeExpand",QueryViewerExpandCollapseType.ExpandSomeValues,!1));k.push(r)}u=qv.util.dom.getMultipleElementsByTagName(s,"OLAPMeasure");for(q=0;q<u.length;q++)r={},f=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(u[q],"name")),v="true"==qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(u[q],"hidden")),
y=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(u[q],"position")),r.Name=f,r.Type=QueryViewerElementType.Datum,r.Hidden=v,r.Position=y,k.push(r);return k},GetDataPivot:function(a){return a.oat_element.getDataXML()},GetFilteredDataPivot:function(a){return a.oat_element.getFilteredDataXML()},onOAT_PIVOTDragAndDropEvent:function(a,c){if(a.RealType==QueryViewerOutputType.PivotTable&&(IsQueryObjectPreview()&&window.external.SendText(a.ControlName,c),a.DragAndDrop)){var d=qv.util.dom.xmlDocument(c),
d=qv.util.dom.selectXPathNode(d,"/DATA");a.DragAndDropData.Name=d.getAttribute("name");a.DragAndDropData.Type=QueryViewerElementType.Axis;axis=d.getAttribute("axis");a.DragAndDropData.Axis="rows"==axis?QueryViewerAxisType.Rows:"columns"==axis?QueryViewerAxisType.Columns:QueryViewerAxisType.Pages;a.DragAndDropData.Position=d.getAttribute("position");a.DragAndDrop()}},onItemClickEvent:function(a,c,g){var s,k;if(a.ItemClick&&!g||a.ItemDoubleClick&&g){k=g?k=a.ItemDoubleClickData:a.ItemClickData;var u=
qv.util.dom.xmlDocument(c),q=qv.util.dom.selectXPathNode(u,"/DATA/ITEM"),c=qv.util.dom.selectXPathNode(u,"/DATA/CONTEXT/RELATED"),u=qv.util.dom.selectXPathNode(u,"/DATA/CONTEXT/FILTERS");k.Name=q.getAttribute("name");s=q.getAttribute("location");switch(s){case "rows":k.Type=QueryViewerElementType.Axis;k.Axis=QueryViewerAxisType.Rows;break;case "columns":k.Type=QueryViewerElementType.Axis;k.Axis=QueryViewerAxisType.Columns;break;case "pages":k.Type=QueryViewerElementType.Axis;k.Axis=QueryViewerAxisType.Pages;
break;default:k.Type=QueryViewerElementType.Datum,k.Axis=""}k.Value=null!=q.firstChild?q.firstChild.nodeValue:"";k.Selected="true"==q.getAttribute("selected");q=[];for(s=0;s<a.Metadata.Axes.length;s++)a.Metadata.Axes[s].IsComponent&&q.push(a.Metadata.Axes[s].Name);for(s=0;s<a.Metadata.Data.length;s++)a.Metadata.Data[s].IsComponent&&q.push(a.Metadata.Data[s].Name);k.Context=d(c,q);k.Filters=d(u,q);g?a.ItemDoubleClick():a.ItemClick()}},onItemExpandCollapseEvent:function(a,c,d){var s;IsQueryObjectPreview()&&
window.external.SendText(a.ControlName,c);if(a.ItemExpand&&!d||a.ItemCollapse&&d){s=d?s=a.ItemCollapseData:a.ItemExpandData;var c=qv.util.dom.xmlDocument(c),k=qv.util.dom.selectXPathNode(c,"/DATA/ITEM"),c=qv.util.dom.selectXPathNode(c,"/DATA/CONTEXT/EXPANDEDVALUES");s.Name=k.getAttribute("name");s.Value=k.firstChild.nodeValue;s.ExpandedValues=[];for(var k=-1,u=0;u<c.childNodes.length;u++)"VALUE"==c.childNodes[u].nodeName&&(k++,s.ExpandedValues[k]=c.childNodes[u].firstChild.nodeValue);d?a.ItemCollapse():
a.ItemExpand()}},Select:function(a,c){a.oat_element.selectValue(c)},Deselect:function(a){a.oat_element.deselectValue()}}}();var HCChart,_highChartsDrawPointsWrapped,DEFAULTCHARTSPACING=10;
qv.chart=function(){function a(a){return a.RealChartType==QueryViewerChartType.Timeline||a.RealChartType==QueryViewerChartType.SmoothTimeline||a.RealChartType==QueryViewerChartType.StepTimeline}function c(b){return a(b)||b.RealChartType==QueryViewerChartType.Sparkline}function d(a){return a.RealChartType==QueryViewerChartType.Pie||a.RealChartType==QueryViewerChartType.Pie3D||a.RealChartType==QueryViewerChartType.Doughnut||a.RealChartType==QueryViewerChartType.Doughnut3D}function b(a){return a.RealChartType==
QueryViewerChartType.Funnel||a.RealChartType==QueryViewerChartType.Pyramid}function l(a){return a.RealChartType==QueryViewerChartType.Radar||a.RealChartType==QueryViewerChartType.FilledRadar||a.RealChartType==QueryViewerChartType.PolarArea}function g(a){return(a.RealChartType==QueryViewerChartType.ColumnLine||a.RealChartType==QueryViewerChartType.Column3DLine)&&1<a.Chart.Series.DataFields.length}function s(a){return a.RealChartType==QueryViewerChartType.CircularGauge||a.RealChartType==QueryViewerChartType.LinearGauge}
function k(a){return a.RealChartType==QueryViewerChartType.StackedColumn||a.RealChartType==QueryViewerChartType.StackedColumn3D||a.RealChartType==QueryViewerChartType.StackedColumn100||a.RealChartType==QueryViewerChartType.StackedBar||a.RealChartType==QueryViewerChartType.StackedBar100||a.RealChartType==QueryViewerChartType.StackedArea||a.RealChartType==QueryViewerChartType.StackedArea100||a.RealChartType==QueryViewerChartType.StackedLine||a.RealChartType==QueryViewerChartType.StackedLine100?!1:(a.PlotSeries==
QueryViewerPlotSeries.InSeparateCharts||d(a)||b(a))&&1<a.Chart.Series.DataFields.length}function u(a,b){for(var e=[],c=0;c<a.Charts.length;c++)for(var h=0;h<a.Charts[c].series.length;h++)e.push(a.Charts[c].series[h].data[b]);return e}function q(a,b,e,c,h){for(var d=0;d<a.Charts.length;d++)if(b.id!=a.Charts[d].container.id)for(var g=0;g<a.Charts[d].series.length;g++){var f=a.Charts[d].series[g].data[e];c?(h&&f.setState("hover"),a.Charts[d].tooltip.hide(0)):f.setState()}}function r(a){switch(a){case QueryViewerChartType.Column:case QueryViewerChartType.Column3D:case QueryViewerChartType.StackedColumn:case QueryViewerChartType.StackedColumn3D:case QueryViewerChartType.StackedColumn100:case QueryViewerChartType.PolarArea:return"column";
case QueryViewerChartType.Bar:case QueryViewerChartType.StackedBar:case QueryViewerChartType.StackedBar100:case QueryViewerChartType.LinearGauge:return"bar";case QueryViewerChartType.Area:case QueryViewerChartType.StackedArea:case QueryViewerChartType.StackedArea100:case QueryViewerChartType.FilledRadar:case QueryViewerChartType.StepArea:return"area";case QueryViewerChartType.SmoothArea:return"areaspline";case QueryViewerChartType.Line:case QueryViewerChartType.StackedLine:case QueryViewerChartType.StackedLine100:case QueryViewerChartType.Radar:case QueryViewerChartType.Timeline:case QueryViewerChartType.StepTimeline:case QueryViewerChartType.Sparkline:case QueryViewerChartType.StepLine:return"line";
case QueryViewerChartType.SmoothLine:case QueryViewerChartType.SmoothTimeline:return"spline";case QueryViewerChartType.ColumnLine:case QueryViewerChartType.Column3DLine:return"column";case QueryViewerChartType.Pie:case QueryViewerChartType.Pie3D:case QueryViewerChartType.Doughnut:case QueryViewerChartType.Doughnut3D:return"pie";case QueryViewerChartType.Funnel:return"funnel";case QueryViewerChartType.Pyramid:return"pyramid";case QueryViewerChartType.CircularGauge:return"solidgauge";default:return"line"}}
function f(a,b,e,c,h,d,g){function f(a,b){var e={};e.Name=a.Name;var c=qv.util.GetPictureProperties(a.DataType,a.Picture),c=qv.util.ApplyPicture(b,a.Picture,a.DataType,c);e.Values=[c];return e}a.Name=e;a.Type=c;a.Axis="";a.Value=h;a.Selected=d;a.Context=[];for(e=0;e<b.Metadata.Axes.length;e++)c=b.Metadata.Axes[e],c.IsComponent||(c=f(c,g[c.DataField]),a.Context.push(c));for(e=0;e<b.Metadata.Data.length;e++)c=b.Metadata.Data[e],c.IsComponent||(c=f(c,g[c.DataField]),a.Context.push(c));a.Filters=[]}function v(a,
b){for(var e=!1,c=0;c<a.length;c++)for(var h=a[c],d=0;d<h.series.length;d++){var g=h.series[d].points[b];if(g.selected){g.select();break}else g.select(!0,0<d),e=!0}return e}function n(a){for(var b=0;b<a.length;b++){var e=a[b].getSelectedPoints();0<e.length&&e[0].select(!1,!1)}}function y(a){var b=qv.collection[this.chart.options.qv.viewerId],e=k(b)?this.chart.options.qv.seriesIndex:a.point.series.index,c=!1;if(b.SelectionAllowed())if("Point"==b.SelectionType){if(a.point.select(),c=a.point.selected,
b.PlotSeries==QueryViewerPlotSeries.InSeparateCharts&&c)for(var h=0;h<b.Charts.length;h++){var d=b.Charts[h].series[0].points[a.point.index];d!=a.point&&d.select(!1)}}else c=v(b.Charts,a.point.index);b.ItemClick&&b.Metadata.Data[e].RaiseItemClick&&(e=b.Chart.Series.ByIndex[e],h=qv.util.formatNumber(a.point.y,e.NumberFormat.DecimalPrecision,e.Picture,!1),f(b.ItemClickData,b,e.FieldName,QueryViewerElementType.Datum,h,c,b.Data.Rows[a.point.index]),b.ItemClick())}function e(a){return qv.util.dom.createSpan(null,
"","","",{fontWeight:"bold"},null,a).outerHTML}function h(a){return qv.util.dom.createSpan(null,"","","",{fontWeight:"bold",textAlign:"right"},null,a).outerHTML}function w(a,b){k(b);var e=Math.min(b.getContainerControl().offsetHeight,b.getContainerControl().offsetWidth)/(k(b)?b.Chart.Series.DataFields.length:1)/13;return qv.util.dom.createSpan(null,"","","",{color:z(b,a),fontSize:e+"px"},null,qv.util.formatNumber(a.point.y,2,"ZZZZZZZZZZZZZZ9.99",!0)+"%").outerHTML}function F(a,b,c){if(c){var d;a.points?
(c=a.points[0],d=c.point.index):(c=a.point,d=c.index);c=qv.collection[c.series.chart.options.qv.viewerId];d=u(c,d);var g=!a.key?!a.x?"":a.x:a.key,a=""!=g&&c.RealChartType!=QueryViewerChartType.Sparkline,C="";a&&(qv.util.isRTL(c)?C+=h(g):C+=e(g));for(var f=0;f<d.length;f++){var k=d[f],g=k.series.chart.options.qv.seriesIndex,g=b[g];qv.util.isRTL(c)?(C+=(a||0<f?"<br/>":"")+qv.util.formatNumber(k.y,g.NumberFormat.DecimalPrecision,g.Picture,!1),C+=" :"+k.series.name):(C+=(a||0<f?"<br/>":"")+k.series.name+
": ",C+=qv.util.formatNumber(k.y,g.NumberFormat.DecimalPrecision,g.Picture,!1))}return C}c=qv.collection[a.series.chart.options.qv.viewerId];g=a.series.index;g=b[g];b=s(c)?"ZZZZZZZZZZZZZZ9.99":g.Picture;d=s(c)?2:g.NumberFormat.DecimalPrecision;C=s(c);return qv.util.isRTL(c)?(s(c)?"%":"")+qv.util.formatNumber(a.point.y,d,b,C)+"<b>: "+(""!=a.point.name?a.point.name:a.series.name)+"<b>":"<b>"+(""!=a.point.name?a.point.name:a.series.name)+"</b>: "+qv.util.formatNumber(a.point.y,d,b,C)+(s(c)?"%":"")}function o(a,
b){function c(a){for(var b=a.y,e=a.series.data,a=a.index,h="",h=a,d=a+1;d<e.length&&e[d].y==b;d++)h=d;h<e.length-1&&h++;for(var g=a,d=a-1;0<=d&&e[d].y==b;d--)g=d;b=(e[h].x-e[g].x)/1E3;return h=" ("+gx.getMessage("GXPL_QViewerDuration")+": "+qv.util.seconsdToText(b)+")"}var d,g=a.points[0].series.chart.options.qv.viewerId,C=qv.collection[g];k(C)?d=u(C,a.points[0].point.index):(d=[],jQuery.each(a.points,function(a,b){d.push(b.point)}));for(var f={},g=gx.dom.el(g+"_options_compare_enable").checked,m=
0;m<d.length;m++){var o=(g?Math.trunc(d[m].series.index/2):d[m].series.index).toString();void 0==f[o]&&(f[o]=[]);f[o].push(d[m])}var m="",E,q;for(o in f)for(var l=parseInt(o),l=b[l],w=l.Name,z=f[o],n=0;void 0!=z[n];n++){var p=z[n],x=parseInt(p.real_x?p.real_x:p.x);g?q!=w&&(qv.util.isRTL(C)?m+=h(w)+"<br/>":m+=e(w)+"<br/>",q=w):E!=x&&(qv.util.isRTL(C)?m+=h(p.name)+"<br/>":m+=e(p.name)+"<br/>",E=x);var x=C.RealChartType==QueryViewerChartType.StepTimeline?c(p):"",t,G=qv.util.dom.createSpan(null,"","",
"",{},null,qv.util.formatNumber(p.y,l.NumberFormat.DecimalPrecision,l.Picture,!1)).outerHTML;qv.util.isRTL(C)?t=qv.util.dom.createSpan(null,"","","",{},null,": "+(g?p.name:w)).outerHTML:t=qv.util.dom.createSpan(null,"","","",{},null,(g?p.name:w)+": ").outerHTML;qv.util.isRTL(C)?m+=x+G+t+"<br/>":m+=t+G+x+"<br/>"}return m}function m(a){"undefined"===typeof _avoidSelectionEventHandler&&(_avoidSelectionEventHandler=!1);if(!_avoidSelectionEventHandler){B(W,"none");W=null;if(a.xAxis){var b=a.target.options.qv,
c=a.xAxis[0];ea(a.target.options.qv.viewerId,100*((c.min-b.dataMin)/(b.dataMax-b.dataMin)),100*((c.max-b.dataMin)/(b.dataMax-b.dataMin)))}else ea(a.target.options.qv.viewerId,0,100);b=qv.collection[a.target.options.qv.viewerId];if(k(b)){var b=b.getContainerControl().id,b=jQuery("[id^="+b+"_chart]"),e=[];jQuery.each(b,function(b,c){if(c.id!=a.target.renderTo.id){var h=jQuery("#"+c.id).highcharts();e.push(h)}});jQuery.each(e,function(b,e){a.xAxis?e.get("xaxis").setExtremes(c.min,c.max):(_avoidSelectionEventHandler=
!0,e.zoomOut(),_avoidSelectionEventHandler=!1)})}}}function G(a,b,c,e,h){function d(a,b,c,e,h){function g(a,b){return a==QueryViewerDataType.Date?10==b.length:" "==b.charAt(10)}function f(a,b,c,e,h){var d=a.substr(0,4),g=a.substr(5,2),a=a.substr(8,2);e||(b=b.replace("M",""));h||(b=b.replace("D",""));for(var C="",m=0;m<b.length;m++)C+=0==m?"":"/",C+=b.charAt(m);b=C.replace("Y",c?d:d.substr(2,2));e&&(b=b.replace("M",g));h&&(b=b.replace("D",a));return b}var C,m;if(""!=a)switch(h=h||(c==QueryViewerDataType.Date?
"Days":"Seconds"),h){case "Years":C=a.substr(0,4)+"-01-01";m=f(C,e,g(c,b),!1,!1);break;case "Months":C=a.substr(0,7)+"-01";m=f(C,e,g(c,b),!0,!1);break;case "Semesters":C="06">=a.substr(5,2)?"01":"07";C=a.substr(0,5)+C+"-01";h="06">=a.substr(5,2)?"01":"02";dateStrSemester=a.substr(0,5)+h+"-01";m=f(dateStrSemester,e,g(c,b),!0,!1);break;case "Quarters":C="03">=a.substr(5,2)?"01":"06">=a.substr(5,2)?"04":"09">=a.substr(5,2)?"07":"10";C=a.substr(0,5)+C+"-01";h="03">=a.substr(5,2)?"01":"06">=a.substr(5,
2)?"02":"09">=a.substr(5,2)?"03":"04";dateStrQuarter=a.substr(0,5)+h+"-01";m=f(dateStrQuarter,e,g(c,b),!0,!1);break;case "Weeks":a=new gx.date.gxdate(a,"Y4MD");C=gx.date.dow(a);a=gx.date.dtadd(a,-86400*(C-1));C=qv.util.dateToString(a,!1);m=f(C,e,g(c,b),!0,!0);break;case "Days":C=c==QueryViewerDataType.Date?a:a.substr(0,10);m=c==QueryViewerDataType.Date?b:b.substr(0,10);break;case "Hours":C=a.substr(0,13)+":00:00";m=b.substr(0,13)+":00";break;case "Minutes":C=a.substr(0,16)+":00";m=b.substr(0,16);
break;case "Seconds":C=a,m=b}else m=C="";return{dateStr:C,name:m}}var g;g={dateStr:null,name:null};var f=[],m=[],k=[];for(i=0;i<b.length;i++){var o=a.Values[i].ValueWithPicture,E=a.Values[i].Value,q,l;null!=b[i].Value?e==QueryViewerAggregationType.Count?(q=0,l=parseFloat(qv.util.trim(b[i].Value))):e==QueryViewerAggregationType.Average?(q=parseFloat(qv.util.trim(b[i].Value_N)),l=parseFloat(qv.util.trim(b[i].Value_D))):(q=parseFloat(qv.util.trim(b[i].Value)),l=1):(q=null,l=0);o=d(E,o,c,gx.dateFormat,
h);o.dateStr==g.dateStr||0==i?(null!=q&&(f.push(q),m.push(l)),0==i&&(g=o)):(g={x:g.dateStr,y:qv.util.aggregate(e,f,m),name:g.name},k.push(g),g=o,f=[q],m=[l])}0<f.length&&0<m.length&&(g={x:g.dateStr,y:qv.util.aggregate(e,f,m),name:g.name},k.push(g));return k}function N(b){var c,e,h;a(b)?(b=DEFAULTCHARTSPACING,c=0,e=DEFAULTCHARTSPACING,h=0):h=e=c=b=DEFAULTCHARTSPACING;return[b,c,e,h]}function p(a,b){var c,e;c=3>=a?24:50/(a-1)-1;e=100-(c+1)*(b-1);return{Width:c,Center:e,LowerExtreme:e-c/2,UpperExtreme:e+
c/2}}function E(a,b){var c=1/a/2,e=-0.5+(b-0.5)/a;return{Width:c,Center:e,LowerExtreme:e-c/2,UpperExtreme:e+c/2}}function z(a,b){function c(a){function b(a,e,c,h){h||(h=0);for(var d=0;d<e.length;d++){var g=e[d];if(g instanceof CSSStyleRule){if(g.selectorText&&0==g.selectorText.indexOf(c)){var f=g.selectorText.replace(c,"");a[f]=g.style.fill;h++}if(h===HIGHCHARTS_MAX_COLORS)break}else g instanceof CSSImportRule?b(a,g.styleSheet.rules||g.styleSheet.cssRules,c,h):g instanceof CSSLayerBlockRule&&b(a,
g.cssRules,c,h)}}if(!a._HighchartsDefaultColors){a._HighchartsDefaultColors=[];var e={},h,d;h=qv.util.GetQueryViewerStyleSheet(a);b(e,h.cssRules,".highcharts-color-");""!=a.Class&&(h=qv.util.GetThemeStyleSheet(a),d="."+qv.util.GetContainerControlClass(a)+" .highcharts-color-",b(e,h.cssRules,d));for(h=0;h<HIGHCHARTS_MAX_COLORS;h++)a._HighchartsDefaultColors.push(e[h.toString()])}return a._HighchartsDefaultColors}var e;e=b.className&&0==b.className.indexOf("highcharts-color-")?parseInt(b.className.replace("highcharts-color-",
"")):b.colorIndex;e<HIGHCHARTS_MAX_COLORS?e=c(a)[e]:(e=HIGHCHARTS_CUSTOM_COLOR[e-HIGHCHARTS_MAX_COLORS],qv.util.color.IsHexaColor(e)&&(e="#"+e));return e}function H(a,b,e,c){if(!qv.util.IsNullColor(e)){if(e.IsDefault)a=e.ColorIndex;else{var h=e.Color,e=HIGHCHARTS_CUSTOM_COLOR.indexOf(h);if(0>e){HIGHCHARTS_CUSTOM_COLOR.push(h);var e=HIGHCHARTS_CUSTOM_COLOR.length-1,e=HIGHCHARTS_MAX_COLORS+e,d=qv.util.color.IsHexaColor(h)?"#":"",h="."+HIGHCHARTS_COLOR_PREFIX+e+" {fill: "+d+h+"; stroke: "+d+h+";}",a=
qv.util.GetThemeStyleSheet(a);a.insertRule(h,a.cssRules.length)}else e=HIGHCHARTS_MAX_COLORS+e;a=e}c?b.colorIndex=a:b.className=HIGHCHARTS_COLOR_PREFIX+a}}function M(f,z,n){var x=qv.util.XAxisDataType(f)==QueryViewerDataType.Date?"Days":"Seconds",t={qv:{}};t.qv.viewerId=f.userControlId();t.qv.seriesIndex=n;t.chart=function(b,e){var c={styledMode:!0};c.spacing=N(b);if(k(b)){var h=b.userControlId(),h=a(b)?L(h):h;c.renderTo=document.getElementById(h+"_chart"+e.toString())}else c.renderTo=a(b)?document.getElementById(L(b.userControlId())):
b.getContainerControl();g(b)||(c.type=r(b.RealChartType));b.RealChartType==QueryViewerChartType.Radar||b.RealChartType==QueryViewerChartType.FilledRadar||b.RealChartType==QueryViewerChartType.PolarArea?c.polar=!0:b.RealChartType==QueryViewerChartType.Column3D||b.RealChartType==QueryViewerChartType.StackedColumn3D||b.RealChartType==QueryViewerChartType.Column3DLine?c.options3d={enabled:!0,alpha:15,beta:15,depth:50,viewDistance:25}:b.RealChartType==QueryViewerChartType.Pie3D||b.RealChartType==QueryViewerChartType.Doughnut3D?
c.options3d={enabled:!0,alpha:45,beta:0}:a(b)&&(c.zoomType="x",c.resetZoomButton={theme:{display:"none"}},c.events={},c.events.selection=function(a){m(a)});return c}(f,n);t.credits={enabled:!1};t.legend={enabled:1<f.Chart.Series.DataFields.length&&!k(f)||d(f)||b(f),margin:0,rtl:qv.util.isRTL(f)};t.title=""==f.Title?{text:null}:{text:null==n||0==n?qv.util.getTranslation(f.Title):null};t.subtitle=function(a,e){var c={};if(k(a)&&(d(a)||b(a)||a.RealChartType==QueryViewerChartType.CircularGauge))c.text=
e.Name,c.floating=!0,c.align=qv.util.isRTL(a)?"right":"left",c.verticalAlign="middle";return c}(f,z);t.pane=function(a,b){var e={};if(a.RealChartType==QueryViewerChartType.CircularGauge){e.background=[];var c;k(a)&&(c=p(1,1));for(var h=0;h<a.Chart.Series.ByIndex.length;h++)if(!k(a)||h==b){var d=a.Chart.Series.ByIndex[h],g={};k(a)||(c=p(a.Chart.Series.DataFields.length,h+1));g.outerRadius=c.UpperExtreme.toString()+"%";g.innerRadius=c.LowerExtreme.toString()+"%";d=qv.util.IsNullColor(d.Color)?d.Points[0].Color:
d.Color;H(a,g,d,!1);g.borderWidth=0;e.background.push(g)}}return e}(f,n);t.xAxis=function(a,b){xAxis={tickWidth:1,tickLength:10};xAxis.reversed=qv.util.isRTL(a);if(a.RealChartType!=QueryViewerChartType.CircularGauge){var e=c(a);if(a.RealChartType!=QueryViewerChartType.Radar&&a.RealChartType!=QueryViewerChartType.FilledRadar&&a.RealChartType!=QueryViewerChartType.PolarArea&&a.RealChartType!=QueryViewerChartType.LinearGauge&&a.RealChartType!=QueryViewerChartType.Sparkline){var h=xAxis,d="";if(""==a.XAxisTitle)for(var g=
0;g<a.Metadata.Axes.length;g++){var f=a.Metadata.Axes[g];if(f.Visible==QueryViewerVisible.Yes||f.Visible==QueryViewerVisible.Always)d+=(""==d?"":", ")+qv.util.getTranslation(f.Title)}else d=qv.util.getTranslationAlsoIfStatic(a.XAxisTitle);h.title={text:d}}else{a.RealChartType==QueryViewerChartType.Sparkline&&k(a)&&(xAxis.title={text:a.Chart.Series.ByIndex[b].Name});xAxis.lineWidth=0;if(a.RealChartType==QueryViewerChartType.LinearGauge||a.RealChartType==QueryViewerChartType.Sparkline)xAxis.tickPositions=
[];xAxis.tickmarkPlacement=a.RealChartType==QueryViewerChartType.Radar||a.RealChartType==QueryViewerChartType.FilledRadar?"on":"between"}if(a.RealChartType==QueryViewerChartType.LinearGauge){var m;k(a)&&(m=E(1,1));xAxis.plotBands=[];for(h=0;h<a.Chart.Series.ByIndex.length;h++)if(!k(a)||h==b)d=a.Chart.Series.ByIndex[h],k(a)||(m=E(a.Chart.Series.DataFields.length,h+1)),plotBand={},d=qv.util.IsNullColor(d.Color)?d.Points[0].Color:d.Color,H(a,plotBand,d,!1),plotBand.from=m.LowerExtreme,plotBand.to=m.UpperExtreme,
xAxis.plotBands.push(plotBand)}e||(xAxis.categories=[]);m=!1;for(h=0;h<a.Chart.Categories.Values.length;h++)""!=a.Chart.Categories.Values[h].ValueWithPicture&&(m=!0),e||(xAxis.categories[h]=a.Chart.Categories.Values[h].ValueWithPicture);if(e)xAxis.type="datetime",xAxis.id="xaxis",xAxis.minRange=1,qv.util.XAxisDataType(a)==QueryViewerDataType.Date&&(null!=a.Chart.Categories.MaxValue&&null!=a.Chart.Categories.MinValue)&&(e=new gx.date.gxdate(a.Chart.Categories.MinValue,"Y4MD"),864E6>(new gx.date.gxdate(a.Chart.Categories.MaxValue,
"Y4MD")).Value.getTime()-e.Value.getTime()&&(xAxis.tickInterval=864E5));else if(xAxis.labels={},xAxis.labels.enabled=m,a.XAxisLabels!=QueryViewerXAxisLabels.Horizontally&&!(a.RealChartType==QueryViewerChartType.Bar||a.RealChartType==QueryViewerChartType.StackedBar||a.RealChartType==QueryViewerChartType.StackedBar100)&&!l(a))a.XAxisLabels==QueryViewerXAxisLabels.Vertically?(e=90,m=5):(e=parseInt(a.XAxisLabels.replace("Rotated","")),m=10),xAxis.labels.rotation=360-e,xAxis.labels.y=m,xAxis.labels.align=
"right";l(a)?xAxis.className="highcharts-no-axis-line highcharts-yes-grid-line":a.RealChartType==QueryViewerChartType.Sparkline&&(xAxis.className="highcharts-no-axis-line highcharts-no-grid-line");if(a.RealChartType==QueryViewerChartType.Bar||a.RealChartType==QueryViewerChartType.StackedBar||a.RealChartType==QueryViewerChartType.StackedBar100)xAxis.opposite=qv.util.isRTL(a)}return xAxis}(f,n);t.yAxis=function(a,e,c){function h(a){if(0==a.length)return!1;for(var b,e=0;e<a.length;e++)if(0==e)b=a[e].Picture;
else if(a[e].Picture!=b)return!1;return!0}if(a.RealChartType==QueryViewerChartType.Sparkline)yAxis={visible:!1};else{var f;f=a.RealChartType==QueryViewerChartType.CircularGauge?null:k(a)?e.Name:I(a);g(a)&&!k(a)?(yAxis=[],yAxis[0]={title:{text:f}},yAxis[1]={title:{text:""},opposite:!0}):yAxis={title:{text:f}};yAxis.plotLines=[];yAxis.plotBands=[];if(!d(a)&&!b(a)&&!s(a)){for(var m=0;m<a.Chart.PlotBands.length;m++){var o=a.Chart.PlotBands[m];if(null==e||e.Name==o.SeriesName)o.From==o.To&&null!=o.From?
(f={value:o.From,width:1,zIndex:3},H(a,f,o.Color,!1),yAxis.plotLines.push(f)):(f={},H(a,f,o.Color,!1),f.from=!o.From?Number.MIN_VALUE:o.From,f.to=!o.To?Number.MAX_VALUE:o.To,yAxis.plotBands.push(f))}if(k(a)||1==a.Chart.Series.ByIndex.length||h(a.Chart.Series.ByIndex)){var q=k(a)?e:a.Chart.Series.ByIndex[0];yAxis.labels={};yAxis.labels.formatter=function(){return qv.util.formatNumber(this.value,q.NumberFormat.DecimalPrecision,q.Picture,true)}}}if(a.RealChartType==QueryViewerChartType.Radar||a.RealChartType==
QueryViewerChartType.FilledRadar||a.RealChartType==QueryViewerChartType.PolarArea)yAxis.min=0,yAxis.gridLineInterpolation=a.RealChartType==QueryViewerChartType.Radar||a.RealChartType==QueryViewerChartType.FilledRadar?"polygon":"circle";if(s(a)){yAxis.min=0;for(m=yAxis.max=0;m<a.Chart.Series.ByIndex.length;m++)if(!k(a)||m==c)f=a.Chart.Series.ByIndex[m],yAxis.max=Math.max(yAxis.max,100*f.MaximumValue/f.TargetValue);if(a.RealChartType==QueryViewerChartType.LinearGauge||100!=yAxis.max){f={className:"highcharts-dashed-plot-line",
value:100};if(k(a)||1==a.Chart.Series.DataFields.length)c=k(a)?e:a.Chart.Series.ByIndex[0],a.RealChartType==QueryViewerChartType.LinearGauge?(e=-10,m=-5,o="right"):(e=15,m=0,o="center"),f.label={text:c.TargetValue,verticalAlign:"bottom",rotation:0,y:e,x:m,align:o};yAxis.plotLines.push(f)}}a.RealChartType==QueryViewerChartType.LinearGauge?(yAxis.className="highcharts-no-axis-line highcharts-no-grid-line",yAxis.labels={enabled:!1}):a.RealChartType==QueryViewerChartType.CircularGauge&&(yAxis.lineWidth=
0,yAxis.tickPositions=[]);a.RealChartType==QueryViewerChartType.Bar||a.RealChartType==QueryViewerChartType.StackedBar||a.RealChartType==QueryViewerChartType.StackedBar100||a.RealChartType==QueryViewerChartType.LinearGauge?yAxis.reversed=qv.util.isRTL(a):yAxis.opposite=qv.util.isRTL(a);m=e=!1;for(c=0;c<a.Chart.Series.ByIndex.length;c++)f=a.Chart.Series.ByIndex[c],f.PositiveValues&&(e=!0),f.NegativeValues&&(m=!0);if(!m&&!e)g(a)&&!k(a)?(yAxis[0].min=0,yAxis[1].min=0,yAxis[0].max=1,yAxis[1].max=1):(yAxis.min=
0,yAxis.max=1);else if(gx.lang.gxBoolean(a.XAxisIntersectionAtZero)&&(m||(g(a)&&!k(a)?(yAxis[0].min=0,yAxis[1].min=0):yAxis.min=0),!e))g(a)&&!k(a)?(yAxis[0].max=0,yAxis[1].max=0):yAxis.max=0}return yAxis}(f,z,n);t.plotOptions=function(b,e){function c(a){var b;b=k(a)||1==a.Chart.Series.DataFields.length?23*(k(a)?a.Chart.Series.DataFields.length:1):29;return a.getContainerControl().offsetHeight-b}function h(a){var b={radius:3,symbol:"circle",states:{hover:{radius:4}}};a.SelectionAllowed()&&(b.states.select=
{radius:5,lineWidth:1});return b}function d(a,b,e){b=b.touchingSliceAt;return["M",a.x+("left"===a.alignment?1:-1)*e.connectorPadding,a.y,"L",b.x,a.y,"L",b.x,b.y]}var g=gx.lang.gxBoolean(e.ShowValues),f={series:{}};f.series.events={};e.RealChartType==QueryViewerChartType.CircularGauge?(f.series.dataLabels={},f.series.dataLabels.enabled=1==e.Chart.Series.DataFields.length&&gx.lang.gxBoolean(e.ShowValues)||k(e),f.series.dataLabels.y=0,f.series.dataLabels.borderWidth=0,f.series.dataLabels.formatter=function(){return w(this,
e)},f.series.marker={enabled:!1}):g&&(f.series.dataLabels={},f.series.dataLabels.enabled=!0,f.series.dataLabels.connectorColor="#000000",f.series.dataLabels.formatter=function(){var a=k(e)?this.series.chart.options.qv.seriesIndex:this.series.index,a=a%e.Chart.Series.ByIndex.length,a=e.Chart.Series.ByIndex[a];return qv.util.formatNumber(this.point.y*(e.RealChartType==QueryViewerChartType.LinearGauge?a.TargetValue/100:1),a.NumberFormat.DecimalPrecision,a.Picture,!1)},e.RealChartType==QueryViewerChartType.LinearGauge&&
(f.series.dataLabels.inside=!0));if(k(e)&&e.RealChartType!=QueryViewerChartType.CircularGauge){f.series.point={};f.series.point.events={};var m=e.RealChartType!=QueryViewerChartType.LinearGauge;f.series.point.events.mouseOver=function(){q(e,this.series.chart.container,this.index,true,m)};f.series.point.events.mouseOut=function(){q(e,this.series.chart.container,this.index,false,m)}}if(e.ItemClick||e.SelectionAllowed())f.series.events.click=y;switch(b){case "bar":f.bar={};e.RealChartType==QueryViewerChartType.StackedBar?
(f.series.stacking="normal",f.bar.stacking="normal"):e.RealChartType==QueryViewerChartType.StackedBar100&&(f.series.stacking="percent",f.bar.stacking="percent");if(e.RealChartType==QueryViewerChartType.LinearGauge){g=E(e.Chart.Series.DataFields.length,1).Width*c(e);f.bar.pointWidth=g;f.bar.pointPadding=0;f.bar.groupPadding=0;for(var o=Number.MAX_VALUE,da=0;da<e.Chart.Series.DataFields.length;da++){var l=e.Chart.Series.ByIndex[da],l=l.Points[0].Value/l.TargetValue;l<o&&(o=l)}o*=e.getContainerControl().offsetWidth;
f.bar.borderRadius=Math.min(g/2,o/2)}break;case "column":f.column={};e.RealChartType==QueryViewerChartType.StackedColumn||e.RealChartType==QueryViewerChartType.StackedColumn3D||e.RealChartType==QueryViewerChartType.PolarArea?(f.series.stacking="normal",f.column.stacking="normal"):e.RealChartType==QueryViewerChartType.StackedColumn100&&(f.series.stacking="percent",f.column.stacking="percent");e.RealChartType==QueryViewerChartType.PolarArea&&(f.column.pointPadding=0,f.column.groupPadding=0);break;case "area":f.area=
{};e.RealChartType==QueryViewerChartType.StepArea&&(f.area.step="center");f.area.marker=h(e);e.RealChartType==QueryViewerChartType.StackedArea?f.area.stacking="normal":e.RealChartType==QueryViewerChartType.StackedArea100&&(f.area.stacking="percent");break;case "areaspline":f.areaspline={};f.areaspline.marker=h(e);break;case "line":f.line={};f.line.marker=h(e);e.RealChartType==QueryViewerChartType.StepLine?f.line.step="center":e.RealChartType==QueryViewerChartType.StepTimeline&&(f.line.step="left");
a(e)?f.series.connectNulls=!0:e.RealChartType==QueryViewerChartType.StackedLine?f.line.stacking="normal":e.RealChartType==QueryViewerChartType.StackedLine100&&(f.line.stacking="percent");break;case "spline":f.spline={};f.spline.marker=h(e);break;case "pie":f.pie={};if(e.RealChartType==QueryViewerChartType.Doughnut||e.RealChartType==QueryViewerChartType.Doughnut3D)f.pie.innerSize="35%";if(e.RealChartType==QueryViewerChartType.Pie3D||e.RealChartType==QueryViewerChartType.Doughnut3D)f.pie.depth=35;f.pie.dataLabels=
{enabled:g,connectorColor:"#c3c4c8",connectorShape:d};f.pie.showInLegend=!0;break;case "solidgauge":f.solidgauge={};f.solidgauge.showInLegend=!0;f.solidgauge.rounded=!0;break;case "funnel":f.funnel={};f.funnel.showInLegend=!0;f.funnel.dataLabels={enabled:g,connectorColor:"#c3c4c8",connectorShape:d};break;case "pyramid":f.pyramid={},f.pyramid.showInLegend=!0,f.pyramid.dataLabels={enabled:g,connectorColor:"#c3c4c8",connectorShape:d}}return f}(t.chart.type,f);t.tooltip=function(b){var c={};a(b)?(c.borderRadius=
1,c.shadow=!0,c.shared=1<b.Metadata.Data.length,c.formatter=function(){return 1===b.Metadata.Data.length?F(this,b.Chart.Series.ByIndex,k(b)):o(this,b.Chart.Series.ByIndex)}):b.RealChartType==QueryViewerChartType.StackedColumn100||b.RealChartType==QueryViewerChartType.StackedBar100||b.RealChartType==QueryViewerChartType.StackedArea100||b.RealChartType==QueryViewerChartType.StackedLine100?c.formatter=function(){var a=Math.round(100*this.point.percentage)/100;return qv.util.isRTL(b)?"%"+a+"<b>: "+(""!=
this.point.id?this.point.id:this.series.name)+"</b>":"<b>"+(""!=this.point.id?this.point.id:this.series.name)+"</b>: "+a+"%"}:d(b)?c.formatter=function(){var a;var c=k(b);a=qv.collection[this.point.series.chart.options.qv.viewerId];if(c){var c=u(a,this.point.index),d=0<c.length?c[0].id:"",g=""!=d,f="";g&&(qv.util.isRTL(a)?f+=h(d):f+=e(d));for(d=0;d<c.length;d++){var m=c[d],o=Math.round(100*m.percentage)/100;qv.util.isRTL(a)?(f+=(g||0<d?"<br/>":"")+"%"+o,f+=" :"+m.series.name):(f+=(g||0<d?"<br/>":
"")+m.series.name+": ",f+=o+"%")}a=f}else{var o=Math.round(100*this.point.percentage)/100;a=qv.util.isRTL(a)?"%"+o+"<b>: "+(""!=this.point.name?this.point.name:this.point.series.name)+"</b>":"<b>"+(""!=this.point.name?this.point.name:this.point.series.name)+"</b>: "+o+"%"}return a}:b.RealChartType==QueryViewerChartType.CircularGauge?(c.enabled=(1<b.Chart.Series.DataFields.length||!gx.lang.gxBoolean(b.ShowValues))&&!k(b),c.formatter=function(){return w(this,b)},c.positioner=function(a){return{x:(this.chart.plotWidth-
a)/2,y:this.chart.plotHeight/2}}):c.formatter=function(){return F(this,b.Chart.Series.ByIndex,k(b)&&!s(b))};c.useHTML=qv.util.isRTL(b);return c}(f);t.series=function(b,e,h){function d(b,e,h,f,g){f={};b.ItemClick&&b.Metadata.Data[h].RaiseItemClick&&(f.className="highcharts-drilldown-point");f.visible=e.Visible==QueryViewerVisible.Yes||e.Visible==QueryViewerVisible.Always;f.events={legendItemClick:function(a){if(e.Visible==QueryViewerVisible.Always)a.preventDefault();else{var c=qv.chart.GetRuntimeMetadata(b),
a=qv.util.GetElementInCollection(c,"Name",b.Chart.Series.ByIndex[a.target.index].FieldName);a.Hidden=!a.Hidden;qv.util.autorefresh.UpdateLayoutSameGroup(b,c,false)}}};if(a(b)){f.name=e.Name;f.data=[];f.turboThreshold=0;qv.util.IsNullColor(e.Color)||H(b,f,e.Color,!0);var m=G(b.Chart.Categories,e.Points,qv.util.XAxisDataType(b),e.Aggregation,g);for(j=0;j<m.length;j++){var h=m[j].name,o=m[j].x,g=m[j].y,o=new gx.date.gxdate(o,"Y4MD");f.data[j]={x:o.Value.getTime()-6E4*o.Value.getTimezoneOffset(),y:g,
name:h};qv.util.IsNullColor(e.Color)&&H(b,f.data[j],e.Points[j].Color,!0)}}else{b.RealChartType==QueryViewerChartType.CircularGauge&&(m=k(b)?p(1,1):p(b.Chart.Series.DataFields.length,h+1));f.name=e.Name;f.data=[];f.turboThreshold=0;qv.util.IsNullColor(e.Color)||H(b,f,e.Color,!0);if(b.RealChartType==QueryViewerChartType.Radar||b.RealChartType==QueryViewerChartType.FilledRadar||b.RealChartType==QueryViewerChartType.PolarArea)f.pointPlacement=b.RealChartType==QueryViewerChartType.Radar||b.RealChartType==
QueryViewerChartType.FilledRadar?"on":null;for(j=0;j<e.Points.length;j++)(g=null!=e.Points[j].Value?parseFloat(qv.util.trim(e.Points[j].Value).replace(",",".")):null,s(b)&&(g=100*(g/e.TargetValue)),h=b.Chart.Categories.Values[j].ValueWithPicture,f.data[j]={},f.data[j].y=g,f.data[j].name=s(b)?"":h,f.data[j].id=f.data[j].name,c(b)&&(o=b.Chart.Categories.Values[j].Value,o=new gx.date.gxdate(o,"Y4MD"),f.data[j].x=o.Value.getTime()-6E4*o.Value.getTimezoneOffset(),f.data[j].id=o),b.RealChartType==QueryViewerChartType.CircularGauge&&
(f.data[j].radius=m.UpperExtreme.toString()+"%",f.data[j].innerRadius=m.LowerExtreme.toString()+"%"),b.RealChartType==QueryViewerChartType.CircularGauge)?(h=qv.util.IsNullColor(e.Color)?e.Points[0].Color:e.Color,H(b,f.data[j],h,!0)):qv.util.IsNullColor(e.Color)&&H(b,f.data[j],e.Points[j].Color,!0)}return f}for(var f=[],m=0;m<b.Chart.Series.ByIndex.length;m++)if(!k(b)||m==e){var o=d(b,b.Chart.Series.ByIndex[m],m,f,h),q=null!=e?e:m;g(b)&&(0==q%2?(o.type="column",o.yAxis=0):(o.type="line",o.yAxis=k(b)?
0:1));f.push(o)}return f}(f,n,x);return t}function I(a){var b="";if(""==a.YAxisTitle){if(1==a.Chart.Series.DataFields.length){var e;a:for(b=0;b<a.Metadata.Data.length;b++)if(a.Metadata.Data[b].DataField==a.Chart.Series.DataFields[0]){e=a.Metadata.Data[b];break a}b=qv.util.getTranslation(e.Title)}}else b=qv.util.getTranslationAlsoIfStatic(a.YAxisTitle);return b}function D(a){return!isNaN(parseFloat(a))&&isFinite(a)?gx.dom.el(U+"_Zoom_"+a+"m"):gx.dom.el(a)}function B(a,b){if(zoom=D(a))zoom.style.textDecoration=
b}function t(a){if(zoom=D(a))zoom.onclick();else if(0!=a){var b;switch(a){case 12:b=6;break;case 6:b=3;break;case 3:b=2;break;case 2:b=1;break;case 1:b=0}t(b)}}function A(a,b){gx.dom.el(a+"_options_compare_enable").disabled=!b;gx.dom.el(a+"_options_compare_text").disabled=!b;gx.dom.el(a+"_options_compare_text").style.opacity=!b?0.5:1;gx.dom.el(a+"_options_compare_options").disabled=!b;gx.dom.el(a+"_options_compare_options").style.opacity=!b?0.5:1}function x(a){return a+"_options"}function L(a){return a+
"_center"}function T(a){return a+"_footer_slider"}function ca(a){return a+"_footer_chart"}function V(a){return a+"_footer_range"}function K(a){return a+"_footer_left_cursor"}function J(a){return a+"_footer_right_cursor"}function X(a){return a+"_footer_center"}function ea(a,b,e){var c=Math.max(b,0),b=Math.min(c,100),c=Math.max(e,0),e=Math.min(c,100);jQuery("#"+(a+"_footer")).css("width","100%").css("height",R.toString()+"px");jQuery("#"+ca(a)).css("width","100%").css("height",(R-2).toString()+"px");
c=qv.collection[a].getContainerControl().offsetWidth;b=b*c/100;e=(100-e)*c/100;if(c-b-e<2*S){var h=2*S-(c-b-e),f;f=0==h%2?h/2:(h+1)/2;b-=f;e-=h-f;0>b&&(e+=b,b=0);0>e&&(b+=e,e=0)}jQuery("#"+T(a)).css("width","100%").css("height",R.toString()+"px").css("padding-left",(100*b/c).toString()+"%").css("padding-right",(100*e/c).toString()+"%");jQuery("#"+V(a)).css("width","100%").css("height",R.toString()+"px");jQuery("#"+K(a)).css("width",S.toString()+"px").css("height",R.toString()+"px");jQuery("#"+J(a)).css("width",
S.toString()+"px").css("height",R.toString()+"px");jQuery("#"+X(a)).css("width","calc(100% - "+2*S+"px)").css("height",R.toString()+"px").css("left",S.toString()+"px")}function ia(a,b){var e=parseInt(jQuery("#"+T(a)).css("padding-left")),c=parseInt(jQuery("#"+V(a)).css("width")),h;h=b.originalEvent.touches?b.originalEvent.touches[0].pageX-b.originalEvent.touches[0].target.offsetLeft:b.offsetX;switch(b.target.id){case T(a):return h;case K(a):return h+e;case X(a):return h+e;case J(a):return h+e+c-S}}
function ka(b){function e(a){a.preventDefault();O=b;var c=jQuery("#"+T(O)),h=jQuery("#"+V(O));parseInt(c.css("padding-left"));ja=ia(O,a);aa=parseInt(c.css("padding-left"));fa=parseInt(c.css("padding-right"));ba=parseInt(c.css("width"));ga=parseInt(h.css("width"))}function c(){if(Y||P||Q){var b=jQuery("#"+T(O)),e=qv.collection[O],h=gx.dom.el(O+"_options_compare_enable").checked,f=e.getContainerControl().offsetWidth,d;d=a(e)?L(e.userControlId()):e.getContainerControl().id;var e=k(e)?jQuery("[id^="+
d+"_chart]"):jQuery("#"+d),g=[];jQuery.each(e,function(a,b){var e=jQuery("#"+b.id).highcharts();g.push(e)});e=g[0];d=parseInt(b.css("padding-left"));var m=parseInt(b.css("padding-right")),b=100*d/f,f=100*(1-m/f);if(0==b&&100==f)jQuery.each(g,function(a,b){b.zoomOut()});else{e.get("xaxis").getExtremes();var e=e.options.qv,o=e.dataMin+b/100*(e.dataMax-e.dataMin),q=e.dataMin+f/100*(e.dataMax-e.dataMin),E=h?!1:!0;jQuery.each(g,function(a,b){b.get("xaxis").setExtremes(o,q,E)})}h&&Z(g);if(P||Q)B(W,"none"),
W=null}P=Q=Y=!1}function h(a){if(Y||P||Q)if(a=ia(O,a)-ja,a=Q?Math.min(a,ga-2*S):Math.min(a,fa),a=P?Math.max(a,-ga+2*S):Math.max(a,-aa),0!=a){jQuery("#"+X(O));var b=jQuery("#"+T(O));jQuery("#"+V(O));Q?b.css("padding-left",(100*(aa+a)/ba).toString()+"%"):(P||b.css("padding-left",(100*(aa+a)/ba).toString()+"%"),b.css("padding-right",(100*(fa-a)/ba).toString()+"%"))}}var f=jQuery("#"+K(b)),d=jQuery("#"+J(b)),g=jQuery("#"+X(b)),m=jQuery("#"+T(b));jQuery("#"+V(b));f.mousedown(function(a){a.preventDefault();
Q=!0});d.mousedown(function(a){a.preventDefault();P=!0});g.mousedown(function(a){a.preventDefault();!Q&&!P&&(Y=!0)});m.mousedown(function(a){e(a)});jQuery(document).mouseup(function(a){c(a)});m.mousemove(function(a){h(a)});f.on("touchstart",function(a){a.preventDefault();Q=!0});d.on("touchstart",function(a){a.preventDefault();P=!0});g.on("touchstart",function(a){a.preventDefault();!Q&&!P&&(Y=!0)});m.on("touchstart",function(a){e(a)});jQuery(document).on("touchend",function(a){c(a)});jQuery(document).on("touchcancel",
function(a){c(a)});m.on("touchmove",function(a){h(a)})}function la(a,b){var e=qv.util.dom.createDiv(a,T(b),"gx-qv-footer-slider","",{},""),e=qv.util.dom.createDiv(e,V(b),"gx-qv-footer-range","",{},"");qv.util.dom.createDiv(e,K(b),"gx-qv-footer-left-cursor","",{},"");qv.util.dom.createDiv(e,J(b),"gx-qv-footer-right-cursor","",{},"");qv.util.dom.createDiv(e,X(b),"gx-qv-footer-center","",{},"");qv.util.dom.createDiv(a,ca(b),"gx-qv-footer-chart","",{},"")}function ma(a,b){var e=ca(a.userControlId()),
c=a.RealChartType==QueryViewerChartType.SmoothTimeline?"spline":"line",h=a.RealChartType==QueryViewerChartType.StepTimeline?"left":"",f=[];if(k(a))for(d=0;d<b.length;d++)f.push(b[d].series[0]);else for(var d=0;d<b[0].series.length;d++)f.push(b[0].series[d]);return qv.chart.getSparklineChartOptions(a,e,c,!1,h,f)}function Z(a){var b=a[0],e=b.options.qv.viewerId,c=qv.collection[e],h=gx.dom.el(e+"_options_compare_enable").checked,f=b.get("xaxis").getExtremes();void 0!=f.userMin&&(f.min=f.userMin);void 0!=
f.userMax&&(f.max=f.userMax);if(h){var d=gx.dom.el(e+"_options_compare_options").children,g;for(ind=0;void 0!=d[ind]&&void 0==g;ind++)d[ind].selected&&(g=d[ind].value);var m,o;"PrevPeriod"==g?(o=new Date(f.min),m=new Date(f.min-(f.max-f.min))):"PrevYear"==g&&(m=new Date(f.min),m=new Date(m.setFullYear(m.getFullYear()-1)),o=new Date(f.max),o=new Date(o.setFullYear(o.getFullYear()-1)));m=m.getTime();o=o.getTime();if(zoom=D(e+"_Zoom_0m"))zoom.style.display="none"}else if(zoom=D(e+"_Zoom_0m"))zoom.style.display=
"";jQuery.each(a,function(a,b){for(var e=[];b.series.length>0;){b.options.qv.colorIndexesUsed||e.push(b.series[0].colorIndex);b.series[0].remove(true)}if(!b.options.qv.colorIndexesUsed)b.options.qv.colorIndexesUsed=e});for(var q=d=0;q<c.Chart.Series.ByIndex.length;q++){var E=c.Chart.Series.ByIndex[q];seriesName=E.Name;var l,w;k(c)?(l=a[d],w=l.options.qv.colorIndexesUsed[0]):(l=b,w=l.options.qv.colorIndexesUsed[d]);var n={turboThreshold:0};n.colorIndex=w;n.id=seriesName+"1";n.name=seriesName;n.data=
[];if(h){var z={className:"highcharts-dashed-series-line",turboThreshold:0};z.colorIndex=w;z.id=seriesName+"2";z.name=seriesName;z.data=[]}w=document.getElementById(e+"_options_group_options").value;E=G(c.Chart.Categories,E.Points,qv.util.XAxisDataType(c),E.Aggregation,w);for(i=0;i<E.length;i++){w=E[i].y;var t=new gx.date.gxdate(E[i].x,"Y4MD"),p=E[i].name,x=t.Value.getTime()-6E4*t.Value.getTimezoneOffset(),t=t.Value.getTime()-6E4*t.Value.getTimezoneOffset();if(h){var r=!1,F=!1;x<=f.max&&x>=f.min&&
(r=!0);if(x<=o&&x>=m){var F=!0,B=new Date(x),A;"PrevPeriod"==g?A="1m"==l.options.qv.predef_zoom?B.setMonth(B.getMonth()+1):"2m"==l.options.qv.predef_zoom?B.setMonth(B.getMonth()+2):"3m"==l.options.qv.predef_zoom?B.setMonth(B.getMonth()+3):"6m"==l.options.qv.predef_zoom?B.setMonth(B.getMonth()+6):"12m"==l.options.qv.predef_zoom?B.setFullYear(B.getFullYear()+1):A+(f.max-f.min):"PrevYear"==g&&(A=B.setFullYear(B.getFullYear()+1))}r&&(r={},r.x=x,r.y=w,r.name=p,n.data.push(r));F&&(r={},r.x=A,r.y=w,r.name=
p,r.real_x=t,z.data.push(r))}else n.data.push({x:x,y:w,name:p})}l.addSeries(n);h&&l.addSeries(z);d++}}function na(a,b){if(a.length<b)return 0;var e=(a[a.length-1].x-a[a.length-b].x)/1E3/3600/24/(365/12);return 1>=e?1:2>=e?2:3>=e?3:6>=e?6:12}function oa(a,b){function e(a,b,c,h,f,d,g,m,o){var k=b.userControlId(),a=qv.util.dom.createSelect(a,x(k)+"_group_options");qv.util.XAxisDataType(b)==QueryViewerDataType.DateTime&&(qv.util.dom.createOption(a,"Seconds","Seconds"==b._groupOption,gx.getMessage("GXPL_QViewerSeconds")),
o&&(qv.util.dom.createOption(a,"Minutes","Minutes"==b._groupOption,gx.getMessage("GXPL_QViewerMinutes")),m&&qv.util.dom.createOption(a,"Hours","Hours"==b._groupOption,gx.getMessage("GXPL_QViewerHours"))));if(F||qv.util.XAxisDataType(b)==QueryViewerDataType.Date)qv.util.dom.createOption(a,"Days","Days"==b._groupOption,gx.getMessage("GXPL_QViewerDays")),g&&(qv.util.dom.createOption(a,"Weeks","Weeks"==b._groupOption,gx.getMessage("GXPL_QViewerWeeks")),d&&(qv.util.dom.createOption(a,"Months","Months"==
b._groupOption,gx.getMessage("GXPL_QViewerMonths")),f&&(qv.util.dom.createOption(a,"Quarters","Quarters"==b._groupOption,gx.getMessage("GXPL_QViewerQuarters")),h&&(qv.util.dom.createOption(a,"Semesters","Semesters"==b._groupOption,gx.getMessage("GXPL_QViewerSemesters")),c&&qv.util.dom.createOption(a,"Years","Years"==b._groupOption,gx.getMessage("GXPL_QViewerYears"))))));return a}var c=a[0];U=c.options.qv.viewerId;var h=qv.collection[U],f=document.getElementById(x(U)),d=document.getElementById(U+"_footer"),
g=c.get("xaxis").getExtremes(),m=g.dataMax-g.dataMin;jQuery.each(a,function(a,b){b.options.qv.dataMax=g.dataMax;b.options.qv.dataMin=g.dataMin});var o=2628288E3<m,k=5255712E3<m,q=7884E6<m,E=15768E6<m,m=31536E6<m;h._groupOption=h._groupOption||(qv.util.XAxisDataType(h)==QueryViewerDataType.Date?"Days":"Seconds");var l=new gx.date.gxdate(""),w=new gx.date.gxdate("");l.Value.setTime(g.dataMin+6E4*l.Value.getTimezoneOffset());w.Value.setTime(g.dataMax+6E4*w.Value.getTimezoneOffset());var n=!0,z=!0,p=
!0,r=!0,G=!0,F=!0,v=!0,s=!0;gx.date.year(l)==gx.date.year(w)&&(n=!1,6>=gx.date.month(l)&&7<=gx.date.month(w)||(z=!1,3>=gx.date.month(l)&&4<=gx.date.month(w)||(6>=gx.date.month(l)&&7<=gx.date.month(w)||9>=gx.date.month(l)&&10<=gx.date.month(w))||(p=!1,gx.date.month(l)==gx.date.month(w)&&(r=!1,gx.date.day(l)-gx.date.dow(l)==gx.date.day(w)-gx.date.dow(w)&&(G=!1,gx.date.day(l)==gx.date.day(w)&&(F=!1,gx.date.hour(l)==gx.date.hour(w)&&(v=!1,gx.date.minute(l)==gx.date.minute(w)&&(s=!1))))))));(function(a,
b,c,h,f,d,g,m,o,k,l,q,E,w){function n(a){return qv.util.dom.createDiv(a,"","QVTimelineHeaderGroup","",{height:ha+"px",flexGrow:1},"")}function z(a,b,e){return qv.util.dom.createAnchor(a,e,{cursor:"pointer",paddingLeft:"6px"},b)}var t=b.userControlId(),a=qv.util.dom.createDiv(a,"","QVTimelineHeader","",{display:"flex",flexDirection:"row",flexWrap:"wrap"},""),p=n(a),r=n(a),G=n(a),p=qv.util.dom.createDiv(p,"","","",{"float":"left"},"");qv.util.dom.createText(p,gx.getMessage("GXPL_QViewerJSChartZoom"));
if(c){z(p,gx.getMessage("GXPL_QViewerJSChartZoomLevelToOneMonth"),t+"_Zoom_1m");if(h){z(p,gx.getMessage("GXPL_QViewerJSChartZoomLevelToTwoMonth"),t+"_Zoom_2m");if(f){z(p,gx.getMessage("GXPL_QViewerJSChartZoomLevelToThreeMonth"),t+"_Zoom_3m");if(d){z(p,gx.getMessage("GXPL_QViewerJSChartZoomLevelToSixMonth"),t+"_Zoom_6m");g&&z(p,gx.getMessage("GXPL_QViewerJSChartZoomLevelToOneYear"),t+"_Zoom_12m")}}}}z(p,gx.getMessage("GXPL_QViewerJSChartZoomLevelToAll"),t+"_Zoom_0m");c=qv.util.dom.createDiv(r,"","",
"",{"float":"right",paddingLeft:"12px"},"");qv.util.dom.createSpan(c,x(t)+"_groupby_text","","",{whiteSpace:"nowrap",paddingRight:"6px"},null,gx.getMessage("GXPL_QViewerGroupBy"));e(c,b,m,o,k,l,q,E,w);b=qv.util.dom.createDiv(G,"","","",{"float":"right",paddingLeft:"12px"},"");qv.util.dom.createInput(b,x(t)+"_compare_enable","checkbox",{verticalAlign:"text-bottom"});qv.util.dom.createSpan(b,x(t)+"_compare_text","","",{whiteSpace:"nowrap",paddingRight:"6px",paddingLeft:"6px"},null,gx.getMessage("GXPL_QViewerCompareWith"));
t=qv.util.dom.createSelect(b,x(t)+"_compare_options");qv.util.dom.createOption(t,"PrevPeriod",false,gx.getMessage("GXPL_QViewerPreviousPeriod"));qv.util.dom.createOption(t,"PrevYear",false,gx.getMessage("GXPL_QViewerPreviousYear"));return a})(f,h,o,k,q,E,m,n,z,p,r,G,v,s);la(d,U);ka(U);gx.dom.el(f.id+"_compare_enable").onclick=function(){Z(a)};gx.dom.el(f.id+"_compare_options").onchange=function(){gx.dom.el(f.id+"_compare_enable").checked&&Z(a)};gx.dom.el(f.id+"_group_options").onchange=function(){Z(a)};
var d=function(b){var e=gx.dom.el(f.id+"_compare_enable").checked;if(b>0){var h,d;d=c.get("xaxis").getExtremes().dataMax;h=d-b*2628028800;var g=e?false:true;jQuery.each(a,function(a,b){b.get("xaxis").setExtremes(h,d,g)});var m=c.options.qv;ea(c.options.qv.viewerId,(h-m.dataMin)/(m.dataMax-m.dataMin)*100,(d-m.dataMin)/(m.dataMax-m.dataMin)*100);A(c.options.qv.viewerId,true)}else{jQuery.each(a,function(a,b){b.zoomOut()});A(c.options.qv.viewerId,false)}B(W,"none");B(this.id,"underline");jQuery.each(a,
function(a,e){e.options.qv.predef_zoom=b+"m"});W=this.id;e&&Z(a)},o=[0,1,2,3,6,12],y;for(y in o)if(k=o[y],q=gx.dom.el(U+"_Zoom_"+k+"m"))q.onclick=d.closure(q,[k]);y=na(c.series[0].points,20);t(y);h=ma(h,b);new Highcharts.Chart(h)}function pa(b){var e=qv.collection[b.options.qv.viewerId];if(!c(e)){var h=e.SelectionAllowed(),d=!1;if(e.ItemClick)for(var g=0;g<e.Metadata.Axes.length;g++)if(e.Metadata.Axes[g].RaiseItemClick){d=!0;break}(d||h)&&jQuery.each(b.xAxis[0].ticks,function(e,c){c&&c.label&&(d&&
c.label.addClass("gx-qv-clickable-element"),c.label.on("click",function(){var g=d,m=qv.collection[b.options.qv.viewerId],o=!1;h&&!a(m)&&(o=v(m.Charts,c.pos));g&&(g=1==m.Chart.Categories.DataFields.length?qv.util.GetAxisByDataField(m,m.Chart.Categories.DataFields[0]).Name:"",f(m.ItemClickData,m,g,QueryViewerElementType.Axis,c.label.textStr,o,m.Data.Rows[e]),m.ItemClick())}))})}}var W=null,U=null,ha=35,R=50,S=10,ja=0,O="",aa=0,fa=0,ga=0,ba=0,Q=!1,P=!1,Y=!1;return{tryToRenderChart:function(b){var e=
"";(new Date).getTime();b.xml=b.xml||{};qv.services.GetRecordsetCacheKeyIfNeeded(b,function(b,c){var h=!1;b!=c.xml.recordsetCacheKey&&(c.xml.recordsetCacheKey=b,h=!0);qv.util.anyError(b)?(e=qv.util.getErrorFromText(b),qv.util.renderError(c,e)):(h&&qv.services.parseRecordsetCacheKeyXML(c),qv.services.GetMetadataIfNeeded(c,function(b,c){var h=false;if(b!=c.xml.metadata){c.xml.metadata=b;h=true}(new Date).getTime();if(qv.util.anyError(b)){e=qv.util.getErrorFromText(b);qv.util.renderError(c,e)}else{h&&
qv.services.parseMetadataXML(c);c.Metadata.ParserResult.Success?qv.services.GetDataIfNeeded(c,function(b,c){var h=false;if(b!=c.xml.data){c.xml.data=b;h=true}(new Date).getTime();if(qv.util.anyError(b)){e=qv.util.getErrorFromText(b);qv.util.renderError(c,e)}else{h&&qv.services.parseDataXML(c);h=qv.util.GetContainerControlClasses(c);h!=""&&qv.util.SetUserControlClass(c,h);h=qv.util.ProcessDataAndMetadata(c);if(h==""){var f=c.userControlId(),h=qv.util.dom.getEmptyContainer(c);if((a(c)||k(c))&&h.offsetHeight==
0)h.style.height="400px";if(a(c)){qv.util.dom.createDiv(h,x(f),"QVTimelineHeaderContainer","",{width:"100%",height:ha+"px"},"");var d=qv.util.dom.createDiv(h,L(f),"","",{width:"100%",height:"calc(100% - "+ha+"px - "+R+"px)"},"");qv.util.dom.createDiv(h,f+"_footer","gx-qv-footer","",{width:"100%",height:R+"px"},"");h.style.padding=DEFAULTCHARTSPACING+"px";h=d}if(k(c))for(var d=c.Chart.Series.DataFields.length,g=parseInt(100/d),m=100%d,f=a(c)?L(f):f,o=0;o<d;o++)qv.util.dom.createDiv(h,f+"_chart"+o.toString(),
"","",{width:"100%",height:(g+(o<m?1:0)).toString()+"%"},"");h=[];if(k(c))for(d=0;d<c.Chart.Series.ByIndex.length;d++){g=M(c,c.Chart.Series.ByIndex[d],d);h.push(g)}else{g=M(c,null,null);h.push(g)}if(c.RealChartType==QueryViewerChartType.CircularGauge){d=qv.util.GetThemeStyleSheet(c);d.insertRule("#"+c.ContainerName+" .highcharts-tooltip-box {fill: none !important; stroke-width: 0 !important; }",d.cssRules.length)}Highcharts.setOptions({lang:{months:[gx.getMessage("GXPL_QViewerJanuary"),gx.getMessage("GXPL_QViewerFebruary"),
gx.getMessage("GXPL_QViewerMarch"),gx.getMessage("GXPL_QViewerApril"),gx.getMessage("GXPL_QViewerMay"),gx.getMessage("GXPL_QViewerJune"),gx.getMessage("GXPL_QViewerJuly"),gx.getMessage("GXPL_QViewerAugust"),gx.getMessage("GXPL_QViewerSeptember"),gx.getMessage("GXPL_QViewerOctober"),gx.getMessage("GXPL_QViewerNovember"),gx.getMessage("GXPL_QViewerDecember")],weekdays:[gx.getMessage("GXPL_QViewerSunday"),gx.getMessage("GXPL_QViewerMonday"),gx.getMessage("GXPL_QViewerTuesday"),gx.getMessage("GXPL_QViewerWednesday"),
gx.getMessage("GXPL_QViewerThursday"),gx.getMessage("GXPL_QViewerFriday"),gx.getMessage("GXPL_QViewerSaturday")],shortMonths:[gx.getMessage("GXPL_QViewerJanuary").substring(0,3),gx.getMessage("GXPL_QViewerFebruary").substring(0,3),gx.getMessage("GXPL_QViewerMarch").substring(0,3),gx.getMessage("GXPL_QViewerApril").substring(0,3),gx.getMessage("GXPL_QViewerMay").substring(0,3),gx.getMessage("GXPL_QViewerJune").substring(0,3),gx.getMessage("GXPL_QViewerJuly").substring(0,3),gx.getMessage("GXPL_QViewerAugust").substring(0,
3),gx.getMessage("GXPL_QViewerSeptember").substring(0,3),gx.getMessage("GXPL_QViewerOctober").substring(0,3),gx.getMessage("GXPL_QViewerNovember").substring(0,3),gx.getMessage("GXPL_QViewerDecember").substring(0,3)],numericSymbols:null}});d=[];for(g=0;g<h.length;g++){HCChart=new Highcharts.Chart(h[g],pa);d.push(HCChart)}c.Charts=d;a(c)&&oa(d,h);c._ControlRenderedTo=c.RealType;qv.util.hideActivityIndicator(c)}else qv.util.renderError(c,h)}}):qv.util.renderError(c,c.Metadata.ParserResult.Message)}}))})},
GetMetadataChart:function(a){var b=qv.util.GetDesigntimeMetadata(a);(function(a,b){function e(a,b,c){for(var h=0;h<a.length;h++){var d=a[h];if(d.Name==b){d.Visible=c?QueryViewerVisible.Yes:QueryViewerVisible.No;break}}}if(a.PlotSeries==QueryViewerPlotSeries.InTheSameChart)for(var c=0;c<a.Charts[0].series.length;c++){var h=a.Charts[0].series[c],d=a.Chart.Series.ByIndex[c].FieldName;e(b,d,h.visible)}else for(c=0;c<a.Charts.length;c++)h=a.Charts[c].series[0],d=a.Chart.Series.ByIndex[c].FieldName,e(b,
d,h.visible)})(a,b);return b},GetRuntimeMetadata:function(a){for(var b=[],e,c=e=0;c<a.Metadata.Axes.length;c++){var h=a.Metadata.Axes[c];h.Visible!=QueryViewerVisible.Never&&(e+=1);b.push({Name:h.Name,Type:QueryViewerElementType.Axis,Axis:h.Axis,Position:h.Visible!=QueryViewerVisible.Never?e:null,Hidden:h.Visible==QueryViewerVisible.Never||h.Visible==QueryViewerVisible.No})}for(c=e=0;c<a.Metadata.Data.length;c++)h=a.Metadata.Data[c],h.Visible!=QueryViewerVisible.Never&&(e+=1),b.push({Name:h.Name,
Type:QueryViewerElementType.Datum,Axis:"",Position:h.Visible!=QueryViewerVisible.Never?e:null,Hidden:h.Visible==QueryViewerVisible.Never||h.Visible==QueryViewerVisible.No});if(a.PlotSeries==QueryViewerPlotSeries.InTheSameChart)for(e=0;e<a.Charts[0].series.length;e++)c=a.Charts[0].series[e],h=a.Chart.Series.ByIndex[e].FieldName,h=qv.util.GetElementInCollection(b,"Name",h),h.Hidden=!c.visible;else for(e=0;e<a.Charts.length;e++)c=a.Charts[e].series[0],h=a.Chart.Series.ByIndex[e].FieldName,h=qv.util.GetElementInCollection(b,
"Name",h),h.Hidden=!c.visible;return b},GetDataChart:function(a){return a.xml.data},getSparklineChartOptions:function(a,b,e,c,h,d){a={chart:{}};a.chart.renderTo=b;a.chart.margin=0;a.chart.type=e;a.chart.styledMode=!0;c&&(a.chart.className="highcharts-no-background");a.title={};a.title.text="";a.credits={};a.credits.enabled=!1;a.xAxis={};a.xAxis.visible=!1;a.yAxis={};a.yAxis.visible=!1;a.legend={};a.legend.enabled=!1;a.tooltip={};a.tooltip.enabled=!1;a.plotOptions={};a.plotOptions.series={};a.plotOptions.series.animation=
!1;a.plotOptions.series.connectNulls=!0;a.plotOptions.series.enableMouseTracking=!1;a.plotOptions.series.lineWidth=1;a.plotOptions.series.shadow=!1;a.plotOptions.series.states={};a.plotOptions.series.states.hover={};a.plotOptions.series.states.hover.lineWidth=1;a.plotOptions.series.marker={};a.plotOptions.series.marker.radius=0;a.plotOptions.series.marker.states={};a.plotOptions.series.marker.states.hover={};a.plotOptions.series.marker.states.hover.radius=2;""!=h&&(a.plotOptions.series.step=h);a.series=
[];for(b=0;b<d.length;b++)a.series.push(d[b]);return a},IsDatetimeXAxis:function(a){return c(a)},IsSingleSerieChart:function(a){return d(a)||b(a)},IsAreaChart:function(a){return a.RealChartType==QueryViewerChartType.Area||a.RealChartType==QueryViewerChartType.StackedArea||a.RealChartType==QueryViewerChartType.StackedArea100||a.RealChartType==QueryViewerChartType.SmoothArea||a.RealChartType==QueryViewerChartType.StepArea},IsLineChart:function(b){return b.RealChartType==QueryViewerChartType.Line||b.RealChartType==
QueryViewerChartType.StackedLine||b.RealChartType==QueryViewerChartType.StackedLine100||b.RealChartType==QueryViewerChartType.SmoothLine||b.RealChartType==QueryViewerChartType.StepLine||b.RealChartType==QueryViewerChartType.Sparkline||a(b)},IsSplittedChart:function(a){return k(a)},IsGaugeChart:function(a){return s(a)},Select:function(a,b){for(var e=[],c=0;c<a.Data.Rows.length;c++){var h=a.Data.Rows[c],d=!0;for(j=0;j<b.length;j++){var f=b[j];if(h[f.DataField]&&qv.util.trim(h[f.DataField])!=qv.util.trim(f.Value)){d=
!1;break}}d&&e.push(c)}if(0<e.length){c=a.Charts;for(h=0;h<c.length;h++)for(var d=c[h],f=!1,g=0;g<e.length;g++)for(var m=e[g],o=0;o<d.series.length;o++)d.series[o].points[m].select(!0,f),f||(f=!0)}else n(a.Charts)},Deselect:function(a){n(a.Charts)}}}();
qv.card=function(){function a(a,b){if(0!=a.ConditionalStyles.length)for(var c=0;c<a.ConditionalStyles.length;c++){var d=a.ConditionalStyles[c];if(qv.util.satisfyStyle(b,d))return qv.util.css.parseStyle(d.StyleOrClass)}return qv.util.css.parseStyle(a.Style)}function c(a,b,c,d){function g(a,b){var e=gx.date.now(),c;switch(a){case QueryViewerTrendPeriod.LastYear:c=gx.date.addyr(e,-1);break;case QueryViewerTrendPeriod.LastSemester:c=gx.date.addmth(e,-6);break;case QueryViewerTrendPeriod.LastQuarter:c=
gx.date.addmth(e,-3);break;case QueryViewerTrendPeriod.LastMonth:c=gx.date.addmth(e,-1);break;case QueryViewerTrendPeriod.LastWeek:c=gx.date.dtadd(e,-604800);break;case QueryViewerTrendPeriod.LastDay:c=gx.date.dtadd(e,-86400);break;case QueryViewerTrendPeriod.LastHour:c=gx.date.dtadd(e,-3600);break;case QueryViewerTrendPeriod.LastMinute:c=gx.date.dtadd(e,-60);break;case QueryViewerTrendPeriod.LastSecond:c=gx.date.dtadd(e,-1)}return qv.util.dateToString(c,b==QueryViewerDataType.DateTime)}var k={};
if(a.IncludeTrend)if(a.TrendPeriod==QueryViewerTrendPeriod.SinceTheBeginning||""==a.TrendPeriod)k=0;else for(var e=g(a.TrendPeriod,d),k=a.Data.Rows.length-1,h=a.Data.Rows.length-2;0<=h&&!(a.Data.Rows[h][c]<e);h--)k=h;else k=a.Data.Rows.length-1;return k=function(a,b,e,c,h,d){var f=null,g=null,k=null,l=null,q=[],n={AnyTrend:!1};if(""!=e){for(var r=h.length-1,B=0,t=0,A=0,x=0,v=0,s=0,y=null,u=null;a<=r;a++)if(void 0!=h[a][e]&&void 0!=h[a][c]){var B=B+1,K=new gx.date.gxdate(h[a][e],"Y4MD"),J=parseFloat(h[a][c]);
q.push({x:K.Value.getTime()-6E4*K.Value.getTimezoneOffset(),y:J});if(null==f&&null==g)g=f=J,k=h[a][e],l=h[a][e];else if(J>g&&(l=h[a][e],g=J),J<f)k=h[a][e],f=J;a>=b&&(null==y&&null==u&&(y=K,u=J),K=d==QueryViewerDataType.Date?gx.date.daysDiff(K,y):gx.date.secDiff(K,y),J-=u,t+=K,A+=J,x+=K*J,v+=K*K,s+=J*J)}n.AnyTrend=1<B;n.Slope=(B*x-t*A)/(B*v-t*t);n.Intercept=(A-n.Slope*t)/B;n.R2=Math.pow((B*x-t*A)/Math.sqrt((B*v-t*t)*(B*s-A*A)),2)}b={};b.LinearRegression=n;b.MinValue=f;b.MinWhen=k;b.MaxValue=g;b.MaxWhen=
l;b.ChartSeriesData=q;return b}(a.IncludeSparkline||a.IncludeMaxAndMin?0:k,k,c,b.DataField,a.Data.Rows,d)}function d(a,b,c,d){function g(a,b){function e(a,b,c){var h=[];if(c)for(c=0;c<b.length;c++)h.push(b[c][a]);else h.push(b[b.length-1][a]);return h}for(var c=[],d=0;d<a.Metadata.Axes.length;d++){var f=a.Metadata.Axes[d];if(!f.IsComponent){var k={};k.Name=f.Name;k.Values=e(f.DataField,a.Data.Rows,b);c.push(k)}}for(d=0;d<a.Metadata.Data.length;d++)f=a.Metadata.Data[d],f.IsComponent||(k={},k.Name=
f.Name,k.Values=e(f.DataField,a.Data.Rows,b),c.push(k));return c}for(var k=null,e=0;e<b.Metadata.Data.length;e++)if(b.Metadata.Data[e].Name==c){k=b.Metadata.Data[e];break}null!=k&&(a.Name=k.Name,a.Type=QueryViewerElementType.Datum,a.Axis="",c=d?qv.util.aggregateData(b.Metadata.Data,b.Data.Rows):b.Data.Rows[b.Data.Rows.length-1],a.Value=c[k.DataField],a.Context=g(b,d))}function b(a,b){return a+"_card_sparkline_"+b}function l(a,c,d){d=b(a.userControlId(),d);return qv.chart.getSparklineChartOptions(a,
d,"line",!0,"",[{data:c}])}function g(a,b,c,d){var g={textAlign:"center",paddingTop:"0px",paddingRight:"5px",paddingBottom:"0px",paddingLeft:"5px"},a=qv.util.dom.createTable(a,"",{}),k;k=qv.util.dom.createRow(a);k=qv.util.dom.createCell(k,1,"",g,"");qv.util.dom.createSpan(k,"","qv-card-max-and-min-value",c,{},null,b);k=qv.util.dom.createRow(a);k=qv.util.dom.createCell(k,1,"",g,"");qv.util.dom.createSpan(k,"","qv-card-max-and-min-title",c,{},null,d);return a}function s(a){var a=new gx.date.gxdate(a,
"Y4MD"),b=gx.date.now(),a=gx.date.secDiff(b,a);return gx.getMessage("GXPL_QViewerTimeAgo").replace("{0}",qv.util.seconsdToText(a))}function k(a,b,c,d){""!=b?(d=qv.util.formatNumber(parseFloat(b),d,c.Picture,!1),b=qv.util.formatNumber(parseFloat(100*b/c.TargetValue),2,"ZZZZZZZZZZZZZZ9.99",!1)+"%"):b=d="";switch(a.ShowDataAs){case QueryViewerShowDataAs.Values:return d;case QueryViewerShowDataAs.Percentages:return b;case QueryViewerShowDataAs.ValuesAndPercentages:return d+" ("+b+")";default:return d}}
function u(d){function r(a,b,e){var e=0<e.LinearRegression.Slope?"keyboard_arrow_up":0>e.LinearRegression.Slope?"keyboard_arrow_down":"drag_handle",c;c=""==b.TrendPeriod?gx.getMessage("GXPL_QViewerSinceTheBeginningTrend"):gx.getMessage("GXPL_QViewer"+b.TrendPeriod+"Trend");var h={width:"0px",marginLeft:"5px"};b.IncludeSparkline||(h.position="relative",h.top="2px");h.fontSize="36px";return e=qv.util.dom.createIcon(a,c,h,e)}for(var f=0<d.Data.Rows.length,v=!0,n="",u,e=0;e<d.Metadata.Axes.length;e++){var h=
d.Metadata.Axes[e];if(h.DataType==QueryViewerDataType.Date||h.DataType==QueryViewerDataType.DateTime){v=!1;n=h.DataField;u=h.DataType;break}}var w;f&&(w=v?qv.util.aggregateData(d.Metadata.Data,d.Data.Rows):d.Data.Rows[d.Data.Rows.length-1]);var F=qv.util.dom.getEmptyContainer(d);h=d.IsAutoResize()?e="":e="100%";var e=qv.util.dom.createTable(F,qv.util.GetContainerControlClasses(d),{width:e,height:h}),e=qv.util.dom.createRow(e),F=qv.util.dom.createCell(e,1,"center",{},""),e=d.Orientation==QueryViewerOrientation.Horizontal?
"100%":"",h=d.Orientation==QueryViewerOrientation.Vertical?"100%":"",F=qv.util.dom.createTable(F,"",{width:e,height:h,whiteSpace:"nowrap"}),o;d.Orientation==QueryViewerOrientation.Horizontal&&(o=qv.util.dom.createRow(F));h=[];for(e=0;e<d.Metadata.Data.length;e++){var m=d.Metadata.Data[e];if(m.Visible==QueryViewerVisible.Yes||m.Visible==QueryViewerVisible.Always){var G=qv.util.ParseNumericPicture(m.DataType,m.Picture).DecimalPrecision,N,p,E;f?(N=w[m.DataField],p=k(d,w[m.DataField],m,G),E=s(w[n])):
E=p=N="";if((gx.lang.gxBoolean(d.IncludeTrend)||gx.lang.gxBoolean(d.IncludeSparkline)||gx.lang.gxBoolean(d.IncludeMaxAndMin))&&f){var z=c(d,m,n,u);h.push(z)}var H=a(m,N);N={};var M="qv-card-element-value";qv.util.startsWith(H,"{")&&qv.util.endsWith(H,"}")?N=JSON.parse(H):M=H;H=null;d.ItemClick&&m.RaiseItemClick&&(M+=(""==M?"":" ")+"gx-qv-clickable-element",H=function(){qv.card.fireItemClickEvent(event,d,v)});d.Orientation==QueryViewerOrientation.Vertical&&(o=qv.util.dom.createRow(F));var I=d.Orientation==
QueryViewerOrientation.Horizontal?"10px":"",D=d.Orientation==QueryViewerOrientation.Vertical?"10px":"",I=qv.util.dom.createCell(o,1,"center",{paddingRight:I,paddingLeft:I,paddingBottom:D,paddingTop:D},""),I=qv.util.dom.createTable(I,"",{}),D=qv.util.dom.createRow(I),D=qv.util.dom.createCell(D,1,"center",{},""),D=qv.util.dom.createTable(D,"",{}),D=qv.util.dom.createRow(D),B=qv.util.dom.createCell(D,1,"center",{},"");qv.util.dom.createSpan(B,d.getContainerControl().id+"_"+m.Name,M,""!=n?E:"",N,H,p);
var B=qv.util.dom.createCell(D,1,"",{},"");f&&(d.IncludeTrend&&!d.IncludeSparkline&&z.LinearRegression.AnyTrend)&&r(B,d,z);D=qv.util.dom.createRow(I);D=qv.util.dom.createCell(D,1,"center",{},"");span1=qv.util.dom.createSpan(D,"","qv-card-element-title",""!=n?E:"",{},null,m.Title);d.IncludeSparkline&&(""!=n&&f)&&(D=qv.util.dom.createRow(I),D=qv.util.dom.createCell(D,1,"",{},""),D=qv.util.dom.createTable(D,"",{width:"100%"}),D=qv.util.dom.createRow(D),B=qv.util.dom.createCell(D,1,"",{width:"100%"},
""),qv.util.dom.createDiv(B,b(d.userControlId(),e),"","",{height:"50px",width:"100%",minWidth:"100px"},""),B=qv.util.dom.createCell(D,1,"",{width:"0%"},""),f&&(d.IncludeTrend&&z.LinearRegression.AnyTrend)&&r(B,d,z));d.IncludeMaxAndMin&&(""!=n&&f)&&(D=qv.util.dom.createRow(I),D=qv.util.dom.createCell(D,1,"center",{},""),D=qv.util.dom.createTable(D,"",{"margin-top":"10px"}),D=qv.util.dom.createRow(D),B=qv.util.dom.createCell(D,1,"",{},""),g(B,k(d,z.MinValue,m,G),s(z.MinWhen),gx.getMessage("GXPL_QViewerCardMinimum")),
B=qv.util.dom.createCell(D,1,"",{},""),g(B,k(d,z.MaxValue,m,G),s(z.MaxWhen),gx.getMessage("GXPL_QViewerCardMaximum")))}}if(d.IncludeSparkline&&""!=n&&f)for(e=0;e<d.Metadata.Data.length;e++)f=l(d,h[e].ChartSeriesData,e),new Highcharts.Chart(f);d._ControlRenderedTo=d.RealType;qv.util.hideActivityIndicator(d)}return{tryToRenderCard:function(a){var b="";(new Date).getTime();a.xml=a.xml||{};qv.services.GetRecordsetCacheKeyIfNeeded(a,function(a,c){var d=!1;a!=c.xml.recordsetCacheKey&&(c.xml.recordsetCacheKey=
a,d=!0);qv.util.anyError(a)?(b=qv.util.getErrorFromText(a),qv.util.renderError(c,b)):(d&&qv.services.parseRecordsetCacheKeyXML(c),qv.services.GetMetadataIfNeeded(c,function(a,e){var c=false;if(a!=e.xml.metadata){e.xml.metadata=a;c=true}(new Date).getTime();if(qv.util.anyError(a)){b=qv.util.getErrorFromText(a);qv.util.renderError(e,b)}else{c&&qv.services.parseMetadataXML(e);e.Metadata.ParserResult.Success?qv.services.GetDataIfNeeded(e,function(a,e){var c=false;if(a!=e.xml.data){e.xml.data=a;c=true}(new Date).getTime();
if(qv.util.anyError(a)){b=qv.util.getErrorFromText(a);qv.util.renderError(e,b)}else{c&&qv.services.parseDataXML(e);u(e)}}):qv.util.renderError(e,e.Metadata.ParserResult.Message)}}))})},GetMetadataCard:function(a){return qv.util.GetDesigntimeMetadata(a)},GetDataCard:function(a){return a.xml.data},fireItemClickEvent:function(a,b,c){a=a.target.id;a=a.substr(a.lastIndexOf("_")+1);d(b.ItemClickData,b,a,c);b.ItemClick()}}}();
qv.map=function(){function a(a){if(a.MapType==QueryViewerMapType.Choropleth||a.MapType==QueryViewerMapType.Bubble&&a.Metadata.Axes[0].DataType==QueryViewerDataType.Character||a.MapType==QueryViewerMapType.Bubble&&a.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&"F0"!=a.Chart.Series.DataFields[0])return a.Chart.Series.ByIndex[0].Color.Color?"#"+a.Chart.Series.ByIndex[0].Color.Color:"#0F5B78";if(a.MapType==QueryViewerMapType.Bubble&&a.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&
"F0"==a.Chart.Series.DataFields[0])return a.Metadata.Axes[0].Style?a.Metadata.Axes[0].Style.substring(6,a.Metadata.Axes[0].Style.length):"#0F5B78"}function c(b){var c=[];if(b.Metadata.Axes[0].DataType==QueryViewerDataType.Character){if(0<b.Chart.Categories.DataFields.length&&0<b.Chart.Series.DataFields.length)for(var d=0;d<b.Chart.Categories.Values.length;d++){var f=b.Chart.Categories.Values[d].Value,g=parseFloat(b.Chart.Series.ByIndex[0].Points[d].Value);b.MapLibrary===QueryViewerMapLibrary.ECharts?
c.push({name:f,value:g}):c.push([axisvalue,g])}}else if(b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint)for(var c=[],m,k=b.Metadata.Axes[0],d=0;d<b.Data.Rows.length;d++){f=b.Data.Rows[d][k.DataField];f=f.substring(7,f.length-1);for(g=0;g<f.length;g++)if(" "==f[g])var l=parseFloat(f.substring(0,g)),n=parseFloat(f.substring(g+1,f.length));f=[l,n];g=parseFloat(b.Chart.Series.ByIndex[0].Points[d].Value);"F0"==b.Chart.Series.DataFields[0]?c.push({coord:[f[0],f[1]],additionalData:b.Data.Rows[d]}):
0==b.Chart.colorAxis.dataClasses.length?c.push({coord:[f[0],f[1]],value:g,itemStyle:{color:a(b)},additionalData:b.Data.Rows[d]}):(m=b.Chart.Series.ByIndex[0].Points[d].Color.Color,v(m)&&(m="#"+m),c.push({coord:[f[0],f[1]],value:g,itemStyle:{color:m},additionalData:b.Data.Rows[d]}))}return c}function d(a,b,c,d,f,g,k,l,n){function E(a,c){var e={};e.Name=a.Name;var d=qv.util.GetPictureProperties(a.DataType,a.Picture);a.DataType!=QueryViewerDataType.GeoPoint?(d=qv.util.ApplyPicture(c,a.Picture,a.DataType,
d),e.Values=[d]):e.Values=b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&b.MapType==QueryViewerMapType.Bubble?c[z.DataField]:[c];return e}var z=b.Metadata.Axes[0];a.Name=c;a.Type=d;a.Axis="";a.Value=f;a.Selected=g;a.Context=[];z.IsComponent||(d=b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&b.MapType==QueryViewerMapType.Bubble?E(z,b.Data.Rows[n]):b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&b.MapType==QueryViewerMapType.Choropleth?E(z,l[n].name):E(z,l[n].Value),
a.Context.push(d));for(c=0;c<b.Metadata.Data.length;c++)d=b.Metadata.Data[c],d.IsComponent||(d=b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&b.MapType==QueryViewerMapType.Choropleth?E(d,k[n].value):E(d,k[n].Value),a.Context.push(d));a.Filters=[]}function b(a){a.on("mousedown",function(){a.getZr().setCursorStyle("auto")});a.on("mousemove",function(){a.getZr().setCursorStyle("auto")});a.on("mouseup",function(){a.getZr().setCursorStyle("auto")});a.on("mouseover",function(){a.getZr().setCursorStyle("auto")});
a.on("mouseout",function(){a.getZr().setCursorStyle("auto")})}function l(a,b){a.on("mousedown",function(c){b.MapType==QueryViewerMapType.Choropleth?a.getZr().setCursorStyle("pointer"):"markPoint"===c.componentType?a.getZr().setCursorStyle("pointer"):a.getZr().setCursorStyle("auto")});a.on("mousemove",function(c){b.MapType==QueryViewerMapType.Choropleth?a.getZr().setCursorStyle("pointer"):"markPoint"===c.componentType?a.getZr().setCursorStyle("pointer"):a.getZr().setCursorStyle("auto")});a.on("mouseup",
function(c){b.MapType==QueryViewerMapType.Choropleth?a.getZr().setCursorStyle("pointer"):"markPoint"===c.componentType?a.getZr().setCursorStyle("pointer"):a.getZr().setCursorStyle("auto")});a.on("mouseover",function(c){b.MapType==QueryViewerMapType.Choropleth?a.getZr().setCursorStyle("pointer"):"markPoint"===c.componentType?a.getZr().setCursorStyle("pointer"):a.getZr().setCursorStyle("auto")});a.on("mouseout",function(c){b.MapType==QueryViewerMapType.Choropleth?a.getZr().setCursorStyle("pointer"):
"markPoint"===c.componentType?a.getZr().setCursorStyle("pointer"):a.getZr().setCursorStyle("auto")})}function g(a,b){a.on("click",function(f){if(b.MapType==QueryViewerMapType.Choropleth||b.MapType==QueryViewerMapType.Bubble&&"markPoint"===f.componentType){var g=b.Chart.Series.ByIndex[0],o=qv.util.formatNumber(f.value,g.NumberFormat.DecimalPrecision,g.Picture,!1),m=b.Chart.Series.ByIndex[0].Points,l;b.MapType==QueryViewerMapType.Bubble&&b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint?l=b.Data.Rows:
b.MapType==QueryViewerMapType.Choropleth&&b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint?m=l=k(c(b),a,b):l=b.Chart.Categories.Values;var n;n=a.getOption();if(b.SelectionAllowed())if(b.MapType==QueryViewerMapType.Choropleth)n=n.series[0].selectedMap,n=!0==n[Object.keys(n)[0]]?!0:!1;else{var p;0==b.Chart.colorAxis.dataClasses.length?p=n.series[0].color:(p=b.Chart.Series.ByIndex[0].Points[f.dataIndex].Color.Color,v(p)&&(p="#"+p));n=a.BubbleSelect==f.dataIndex&&n.series[0].markPoint.data[f.dataIndex].itemStyle.color==
p?!0:a.BubbleSelect==f.dataIndex&&n.series[0].markPoint.data[f.dataIndex].itemStyle.color!=p?!1:a.BubbleSelect!=f.dataIndex&&n.series[0].markPoint.data[f.dataIndex].itemStyle.color==p?!0:!1}else n=!1;f.dataIndex>l.length-1&&Number.isNaN(f.value)||(d(b.ItemClickData,b,g.FieldName,QueryViewerElementType.Datum,o,n,m,l,f.dataIndex),b.ItemClick())}})}function s(a,b,c){function d(a,b){for(var c=a[0],e=a[1],h=!1,f=0,g=b.length-1;f<b.length;g=f++){var k=b[f][0],l=b[f][1],n=b[g][0],g=b[g][1];l>e!=g>e&&c<(n-
k)*(e-l)/(g-l)+k&&(h=!1==h?!0:!1)}return h}return function(a,b,c){var e=[];if(b.Region==QueryViewerRegion.Country&&(b.Country==QueryViewerCountry.US||b.Country==QueryViewerCountry.ES||b.Country==QueryViewerCountry.PT||b.Country==QueryViewerCountry.FR||b.Country==QueryViewerCountry.GQ||b.Country==QueryViewerCountry.MU)){for(var h=[[QueryViewerCountry.US,["US-AK","US-HI","US-PR"]],[QueryViewerCountry.ES,["ES-CN","ES-IB"]],[QueryViewerCountry.PT,["PT-20","PT-30"]],[QueryViewerCountry.FR,["FR-GF","FR-RE",
"FR-GP","FR-MQ","FR-YT"]],[QueryViewerCountry.GQ,["GQ-AN","GQ-BS","GQ-BN"]],[QueryViewerCountry.MU,["MU-RO","MU-CC","MU-AG"]]],f,g,k,l,n,w,B,t=0;t<h.length;t++)if(h[t][0]==b.Country){l=h[t];break}for(b=0;b<c._coordSysMgr._coordinateSystems[0].regions.length;b++)for(h=0;h<l[1].length;h++)for(t=0;t<a.length;t++)if(c._coordSysMgr._coordinateSystems[0].regions[b].name==l[1][h]){if(f=d(a[t].coord,c._coordSysMgr._coordinateSystems[0].regions[b].properties.specialArea),!0==f){height=c._coordSysMgr._coordinateSystems[0].regions[b].properties.specialAreaHeight;
g=c._coordSysMgr._coordinateSystems[0].regions[b]._rect.x;f=c._coordSysMgr._coordinateSystems[0].regions[b]._rect.y;k=c._coordSysMgr._coordinateSystems[0].regions[b]._rect.width;void 0!=c._coordSysMgr._coordinateSystems[0].regions[b].properties.AreaWidth&&c._coordSysMgr._coordinateSystems[0].regions[b].properties.coordlimit?(n=c._coordSysMgr._coordinateSystems[0].regions[b].properties.coordlimit[0],w=c._coordSysMgr._coordinateSystems[0].regions[b].properties.coordlimit[1],B=c._coordSysMgr._coordinateSystems[0].regions[b].properties.AreaWidth,
areaHeight=c._coordSysMgr._coordinateSystems[0].regions[b].properties.AreaHeight,g-=[(n-a[t].coord[0])/B*k],f=f+height-Math.abs((w-a[t].coord[1])/areaHeight*height)):(g=a[t].coord[0]+(g-a[t].coord[0])+k,f=a[t].coord[1]*height/90+f);a[t].coord=[g,f];w=a[t];w.name=null;w.name=c._coordSysMgr._coordinateSystems[0].regions[b].name;e.push(w);break}}else for(f=0;f<c._coordSysMgr._coordinateSystems[0].regions[b].geometries.length;f++)if(d(a[t].coord,c._coordSysMgr._coordinateSystems[0].regions[b].geometries[f].exterior)){w=
a[t];g=!1;for(k=0;k<e.length;k++)e[k].coord===w.coord&&e[k].value===w.value&&(g=!0);g||(w=a[t],w.name=null,w.name=c._coordSysMgr._coordinateSystems[0].regions[b].name,e.push(w))}return e}if(b.Region==QueryViewerRegion.World&&b.MapType!=QueryViewerMapType.Choropleth)return a;for(l=0;l<a.length;l++){h=!1;for(b=0;b<c._coordSysMgr._coordinateSystems[0].regions.length&&!1==h;b++)for(f=0;f<c._coordSysMgr._coordinateSystems[0].regions[b].geometries.length&&!1==h;f++)if(d(a[l].coord,c._coordSysMgr._coordinateSystems[0].regions[b].geometries[f].exterior)){w=
a[l];w.name=null;w.name=c._coordSysMgr._coordinateSystems[0].regions[b].name;e.push(w);h=!0;break}}return e}(a,b,c)}function k(a,b,c){for(var d=[],b=s(a,c,b),a=[],f=0;f<b.length;f++)d.push({name:b[f].name,value:0,additionalData:[b[f].additionalData]});for(b=0;b<d.length;b++){for(var f=d[b],g=!1,k=[],l=0;l<a.length;l++)a[l].name===f.name&&(k=a[l].additionalData,k.push(f.additionalData[0]),a[l].additionalData=k,g=!0);!1==g&&a.push(f)}for(b=0;b<a.length;b++)d=qv.util.aggregateData(c.Metadata.Data,a[b].additionalData,
c),a[b].value=d[c.Metadata.Data[0].DataField];return a}function u(b){var c;if(b.MapType==QueryViewerMapType.Choropleth&&0==b.Chart.colorAxis.dataClasses.length)return c={min:0,maxColor:a(b)};if(b.MapType==QueryViewerMapType.Choropleth&&0!=b.Chart.colorAxis.dataClasses.length||b.MapType==QueryViewerMapType.Bubble&&0!=b.Chart.colorAxis.dataClasses.length)return c=b.Chart.colorAxis;b.MapType==QueryViewerMapType.Bubble&&0==b.Chart.colorAxis.dataClasses.length&&(c=[]);return c}function q(a){var b;if(a.MapType==
QueryViewerMapType.Choropleth)return b={enabled:!0};a.MapType==QueryViewerMapType.Bubble&&(b=0!=a.Chart.colorAxis.dataClasses.length?{enabled:!0}:{enabled:!1});return b}function r(b){var d;if(b.MapType==QueryViewerMapType.Choropleth)return d=[{name:qv.util.getTranslation(b.Title),type:"map",borderColor:"gray",colorByPoint:!1,data:c(b),joinBy:["name","hc-key"],dataLabels:{enabled:!0,format:"{point.name}"}}];b.MapType==QueryViewerMapType.Bubble&&(d=0==b.Chart.colorAxis.dataClasses.length?b.Chart.Series.ByIndex[0].Color.Color?
[{color:"#E0E0E0",enableMouseTracking:!1},{name:qv.util.getTranslation(b.Title),type:"mapbubble",joinBy:["name","hc-key"],data:c(b),styledMode:!1,color:a(b),showInLegend:!0,minSize:4,maxSize:"12%"}]:[{enableMouseTracking:!1},{name:qv.util.getTranslation(b.Title),type:"mapbubble",joinBy:["name","hc-key"],data:c(b),colorIndex:b.Metadata.Data[0].colorIndex,opacity:0.5,showInLegend:!0,minSize:4,maxSize:"12%"}]:[{color:"#E0E0E0",enableMouseTracking:!1},{name:qv.util.getTranslation(b.Title),type:"mapbubble",
joinBy:["name","hc-key"],data:c(b),styledMode:!1,showInLegend:!0,minSize:4,maxSize:"12%"}]);return d}function f(a){var b;if(a.MapType==QueryViewerMapType.Choropleth)return b={};a.MapType==QueryViewerMapType.Bubble&&(b={});return b}function v(a){var b=/[0-9A-Fa-f]{6}/g,a=b.test(a)?!0:!1;b.lastIndex=0;return a}function n(b,c,d){var f=[],g;if(d.MapType==QueryViewerMapType.Choropleth&&d.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint)for(var k=0;k<b.length;k++)for(var l=0;l<c._coordSysMgr._coordinateSystems[0].regions.length;l++){if(c._coordSysMgr._coordinateSystems[0].regions[l].name==
b[k].name){0!=d.Chart.colorAxis.dataClasses.length?void 0!=c._coordSysMgr._coordinateSystems[0].regions[l].properties.center?(g=d.Chart.Series.ByIndex[0].Points[k].Color.Color,v(g)&&(g="#"+g),f.push({name:b[k].name,coord:[c._coordSysMgr._coordinateSystems[0].regions[l].properties.center[0],c._coordSysMgr._coordinateSystems[0].regions[l].properties.center[1]],value:b[k].value,itemStyle:{color:g}})):f.push({name:b[k].name,coord:[c._coordSysMgr._coordinateSystems[0].regions[l].center[0],c._coordSysMgr._coordinateSystems[0].regions[l].center[1]],
value:b[k].value,itemStyle:{color:g}}):void 0!=c._coordSysMgr._coordinateSystems[0].regions[l].properties.center?f.push({name:b[k].name,coord:[c._coordSysMgr._coordinateSystems[0].regions[l].properties.center[0],c._coordSysMgr._coordinateSystems[0].regions[l].properties.center[1]],value:b[k].value,itemStyle:{color:a(d)}}):f.push({name:b[k].name,coord:[c._coordSysMgr._coordinateSystems[0].regions[l].center[0],c._coordSysMgr._coordinateSystems[0].regions[l].center[1]],value:b[k].value,itemStyle:{color:a(d)}});
break}}else for(k=0;k<d.Chart.Categories.Values.length;k++)for(l=0;l<c._coordSysMgr._coordinateSystems[0].regions.length;l++)if(c._coordSysMgr._coordinateSystems[0].regions[l].name==d.Chart.Categories.Values[k].Value){0!=d.Chart.colorAxis.dataClasses.length?void 0!=c._coordSysMgr._coordinateSystems[0].regions[l].properties.center?(g=d.Chart.Series.ByIndex[0].Points[k].Color.Color,v(g)&&(g="#"+g),f.push({name:d.Chart.Categories.Values[k].Value,coord:[c._coordSysMgr._coordinateSystems[0].regions[l].properties.center[0],
c._coordSysMgr._coordinateSystems[0].regions[l].properties.center[1]],value:b[k].value,itemStyle:{color:g}})):f.push({name:d.Chart.Categories.Values[k].Value,coord:[c._coordSysMgr._coordinateSystems[0].regions[l].center[0],c._coordSysMgr._coordinateSystems[0].regions[l].center[1]],value:b[k].value,itemStyle:{color:g}}):void 0!=c._coordSysMgr._coordinateSystems[0].regions[l].properties.center?f.push({name:d.Chart.Categories.Values[k].Value,coord:[c._coordSysMgr._coordinateSystems[0].regions[l].properties.center[0],
c._coordSysMgr._coordinateSystems[0].regions[l].properties.center[1]],value:b[k].value,itemStyle:{color:a(d)}}):f.push({name:d.Chart.Categories.Values[k].Value,coord:[c._coordSysMgr._coordinateSystems[0].regions[l].center[0],c._coordSysMgr._coordinateSystems[0].regions[l].center[1]],value:b[k].value,itemStyle:{color:a(d)}});break}return f}function y(e,d){function f(a,b,c){var e=[],d=function(a){for(var b=qv.util.GetPictureProperties(a.Chart.Series.ByIndex[0].DataType,a.Chart.Series.ByIndex[0].Picture),
c=[],e,d=0;d<a.Chart.colorAxis.dataClasses.length;d++)e=a.Chart.colorAxis.dataClasses[d].Operator,e=e==QueryViewerConditionOperatorSymbol.Interval?qv.util.ApplyPicture(a.Chart.colorAxis.dataClasses[d].from,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,b)+e+qv.util.ApplyPicture(a.Chart.colorAxis.dataClasses[d].to,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,b):e==QueryViewerConditionOperatorSymbol.Equal?""+qv.util.ApplyPicture(a.Chart.colorAxis.dataClasses[d].from,
a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,b):e==QueryViewerConditionOperatorSymbol.LessThan||e==QueryViewerConditionOperatorSymbol.LessOrEqual?e+" "+qv.util.ApplyPicture(a.Chart.colorAxis.dataClasses[d].to,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,b):e+" "+qv.util.ApplyPicture(a.Chart.colorAxis.dataClasses[d].from,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,b),c.push(e);return c}(a),g=function(a){for(var b=a.MapType==QueryViewerMapType.Bubble&&
a.Metadata.Axes[0].DataType==QueryViewerDataType.Character?[""]:[],c,e=0;e<a.Chart.colorAxis.dataClasses.length;e++)c=a.Chart.colorAxis.dataClasses[e].color,b.push(c);return b}(a),a=function(a,b,c,e){var d=[];if(a.Metadata.Axes[0].DataType==QueryViewerDataType.Character)b={name:"serie",type:"map",markPoint:{nameProperty:"iso-code",data:b}};else var b=s(b,a,e),f=Math.max.apply(Math,b.map(function(a){return a.value})),e=a.getContainerControl(),g=Math.min(e.offsetWidth,e.offsetHeight),b={name:"serie",
type:"map",markPoint:{data:b,symbolSize:function(a){return void 0==a?8:Math.sqrt(a/f)*g/10}}};d.push(b);for(b=0;b<a.Chart.colorAxis.dataClasses.length;b++)d.push({name:c[b],type:"map",data:[]});return d}(a,b,d,c);e.push(d,g,a);return e}function q(a,b){b.TextStyle.fontFamily&&(a.fontFamily=b.TextStyle.fontFamily);b.TextStyle.fontSize&&(a.fontSize=b.TextStyle.fontSize);b.TextStyle.fontStyle&&(a.fontStyle=b.TextStyle.fontStyle);b.TextStyle.fontWeight&&(a.fontWeight=b.TextStyle.fontWeight);b.TextStyle.color&&
(a.color=b.TextStyle.color);b.BoxStyle.backgroundColor&&(a.backgroundColor=qv.util.color.resolveColor(b.BoxStyle.backgroundColor,b.BoxStyle.opacity));b.BoxStyle.borderColor&&(a.borderColor=b.BoxStyle.borderColor);b.BoxStyle.borderWidth&&(a.padding=3,a.borderWidth=b.BoxStyle.borderWidth)}0==e.offsetHeight&&(e.style.height="400px",e.style.overflow="hidden");var o=echarts.init(e),m=function(a){function b(a,c){if(a.fontFamily&&!c.fontFamily)c.fontFamily=a.fontFamily;if(a.fontSize&&!c.fontSize)c.fontSize=
a.fontSize;if(a.fontStyle&&!c.fontStyle)c.fontStyle=a.fontStyle;if(a.fontWeight&&!c.fontWeight)c.fontWeight=a.fontWeight;if(a.color&&!c.color)c.color=a.color}function c(a,b){if(a.fontFamily)b.fontFamily=qv.util.css.resolveVariable(a.fontFamily);if(a.fontSize)b.fontSize=parseFloat(qv.util.css.resolveVariable(a.fontSize));if(a.fontStyle)b.fontStyle=qv.util.css.resolveVariable(a.fontStyle);if(a.fontWeight)b.fontWeight=qv.util.css.resolveVariable(a.fontWeight);if(a.color)b.color=qv.util.css.resolveVariable(a.color)}
function e(a,b){if(a.backgroundColor)b.backgroundColor=qv.util.css.resolveVariable(a.backgroundColor);if(a.opacity)b.opacity=qv.util.css.resolveVariable(a.opacity);if(a.borderWidth)b.borderWidth=parseFloat(qv.util.css.resolveVariable(a.borderWidth));if(a.borderColor)b.borderColor=qv.util.css.resolveVariable(a.borderColor)}function d(a,b,f){f.BackgroundColor=f.BackgroundColor||"white";f.SelectionColor=f.SelectionColor||"lightcoral";f.Opacity=f.Opacity||"1";f.TextStyle=f.TextStyle||{fontFamily:"Source Sans Pro"};
f.Title=f.Title||{TextStyle:{}};f.SeriesLabels=f.SeriesLabels||{TextStyle:{},BoxStyle:{}};f.Legend=f.Legend||{TextStyle:{},BoxStyle:{}};f.Tooltip=f.Tooltip||{TextStyle:{},BoxStyle:{}};for(var g=0;g<a.length;g++){var h=a[g];if(h instanceof CSSStyleRule){var k=h.style;if(h.selectorText==="."+b)c(k,f.TextStyle);else if(h.selectorText==="."+b+" .gx-qv-selected-element")f.SelectionColor=qv.util.css.resolveVariable(k.backgroundColor);else if(h.selectorText==="."+b+".qv-map"){f.BackgroundColor=qv.util.css.resolveVariable(k.backgroundColor);
f.Opacity=qv.util.css.resolveVariable(k.opacity)}else h.selectorText==="."+b+" .gx-qv-title"?c(k,f.Title.TextStyle):h.selectorText==="."+b+" .gx-qv-legend-box"?e(k,f.Legend.BoxStyle):h.selectorText==="."+b+" .gx-qv-legend-text"?c(k,f.Legend.TextStyle):h.selectorText==="."+b+" .gx-qv-series-labels-box"?e(k,f.SeriesLabels.BoxStyle):h.selectorText==="."+b+" .gx-qv-series-labels-text"?c(k,f.SeriesLabels.TextStyle):h.selectorText==="."+b+" .gx-qv-tooltip-box"?e(k,f.Tooltip.BoxStyle):h.selectorText==="."+
b+" .gx-qv-tooltip-text"&&c(k,f.Tooltip.TextStyle)}else h instanceof CSSImportRule?d(h.styleSheet.rules||h.styleSheet.cssRules,b,f):h instanceof CSSLayerBlockRule&&d(h.cssRules,b,f)}}var f=qv.util.GetThemeStyleSheet(a),f=f.rules||f.cssRules,a=qv.util.GetContainerControlClass(a),g={};d(f,a,g);b(g.TextStyle,g.Title.TextStyle);b(g.TextStyle,g.Legend.TextStyle);b(g.TextStyle,g.SeriesLabels.TextStyle);b(g.TextStyle,g.Tooltip.TextStyle);return g}(d);o.clear();var r={backgroundColor:qv.util.color.resolveColor(m.BackgroundColor,
m.Opacity),series:function(b,e){var d=a(b),f=gx.lang.gxBoolean(b.ShowValues)&&b.MapType===QueryViewerMapType.Bubble,g=b.getContainerControl(),h=Math.min(g.offsetWidth,g.offsetHeight),k=qv.util.GetPictureProperties(b.Chart.Series.ByIndex[0].DataType,b.Chart.Series.ByIndex[0].Picture),g={type:"map",map:qv.map.getMapDirectory(b).mapKey,roam:true,scaleLimit:{min:1},selectedMode:b.SelectionAllowed()?"single":false,label:{show:false,formatter:"{c}"},emphasis:{label:{show:false},itemStyle:{borderWidth:0.5}},
select:{label:{show:false},itemStyle:{borderWidth:0.5}}};if(b.MapType===QueryViewerMapType.Choropleth){g.nameProperty="iso-code";if(b.Metadata.Axes[0].DataType==QueryViewerDataType.Character)g.data=c(b);q(g.label,e.SeriesLabels);g.select.itemStyle.areaColor=e.SelectionColor;g.emphasis.itemStyle.borderWidth=1;g.emphasis.itemStyle.areaColor=null;g.emphasis.itemStyle.borderColor=qv.util.color.lightenDarkenColor(d,50)}else if(b.MapType==QueryViewerMapType.Bubble&&b.Metadata.Axes[0].DataType==QueryViewerDataType.Character){var l=
b.Chart.Series.ByIndex[0].MaxValue;if(b.Chart.colorAxis.dataClasses.length===0)g.color=d;g.nameProperty="iso-code";g.emphasis.itemStyle.areaColor="#eeeeee";g.select.itemStyle.areaColor="#eeeeee";g.data=c(b);g.showLegendSymbol=false;g.markPoint={symbol:"circle",symbolSize:function(a){return Math.sqrt(a/l)*h/10},label:{show:f,formatter:function(a){return qv.util.ApplyPicture(a.value,b.Chart.Series.ByIndex[0].Picture,b.Chart.Series.ByIndex[0].DataType,k)}},itemStyle:{opacity:0.6,borderColor:qv.util.color.lightenDarkenColor(d,
50),borderWidth:1},emphasis:{label:{show:f},itemStyle:{opacity:0.7,borderColor:qv.util.color.lightenDarkenColor(d,100),borderWidth:2}}};q(g.markPoint.label,e.SeriesLabels)}else if(b.MapType==QueryViewerMapType.Bubble&&b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint){g.color=d;g.nameProperty="iso-code";g.emphasis.itemStyle.areaColor="#eeeeee";g.select.itemStyle.areaColor="#eeeeee";g.data=[];g.markPoint={symbol:"circle",label:{show:f,formatter:function(a){return qv.util.ApplyPicture(a.value,
b.Chart.Series.ByIndex[0].Picture,b.Chart.Series.ByIndex[0].DataType,k)}},itemStyle:{opacity:0.6,borderColor:qv.util.color.lightenDarkenColor(d,50),borderWidth:1},emphasis:{label:{show:f},itemStyle:{opacity:0.7,borderColor:qv.util.color.lightenDarkenColor(d,100),borderWidth:2}}};q(g.markPoint.label,e.SeriesLabels)}return g}(d,m),title:{text:qv.util.getTranslation(d.Title),left:"center",textStyle:m.Title.TextStyle},dataRange:function(b,c){function e(a,b){var c=a;if(qv.util.isRTL(b))var d=a.split("-"),
c=d[0].trim(),d=d[1].trim(),c=c.split(" "),d=d.split(" "),c=d[1]+" "+d[0]+" - "+c[1]+" "+c[0];return c}function d(c){return c!=null?c:a(b)}var g,h=qv.util.GetPictureProperties(b.Chart.Series.ByIndex[0].DataType,b.Chart.Series.ByIndex[0].Picture);if(b.MapType==QueryViewerMapType.Choropleth&&b.Chart.colorAxis.dataClasses.length!=0){g=[];for(var k=0;k<b.Chart.colorAxis.dataClasses.length;k++){var l={},m=f(b,"",null)[0];b.Chart.colorAxis.dataClasses[k].Operator==QueryViewerConditionOperatorSymbol.Interval?
l={start:b.Chart.colorAxis.dataClasses[k].from,end:b.Chart.colorAxis.dataClasses[k].to,color:d(b.Chart.colorAxis.dataClasses[k].color),label:e(m[k],b)}:b.Chart.colorAxis.dataClasses[k].Operator==QueryViewerConditionOperatorSymbol.Equal||b.Chart.colorAxis.dataClasses[k].Operator==QueryViewerConditionOperatorSymbol.NotEqual?l={value:b.Chart.colorAxis.dataClasses[k].from,color:d(b.Chart.colorAxis.dataClasses[k].color),label:m[k]}:b.Chart.colorAxis.dataClasses[k].Operator==QueryViewerConditionOperatorSymbol.GreaterThan?
l={start:b.Chart.colorAxis.dataClasses[k].from,color:d(b.Chart.colorAxis.dataClasses[k].color),label:m[k]}:b.Chart.colorAxis.dataClasses[k].Operator==QueryViewerConditionOperatorSymbol.GreaterOrEqual?l={start:b.Chart.colorAxis.dataClasses[k].from-1,color:d(b.Chart.colorAxis.dataClasses[k].color),label:m[k]}:b.Chart.colorAxis.dataClasses[k].Operator==QueryViewerConditionOperatorSymbol.LessThan?l={end:b.Chart.colorAxis.dataClasses[k].to,color:d(b.Chart.colorAxis.dataClasses[k].color),label:m[k]}:b.Chart.colorAxis.dataClasses[k].Operator==
QueryViewerConditionOperatorSymbol.LessOrEqual&&(l={end:b.Chart.colorAxis.dataClasses[k].to+1,color:d(b.Chart.colorAxis.dataClasses[k].color),label:m[k]});g.push(l)}g={x:qv.util.isRTL(b)?"right":"left",orient:"vertical",splitList:g,textStyle:c.TextStyle}}else if(b.MapType==QueryViewerMapType.Choropleth&&b.Chart.colorAxis.dataClasses.length==0){g={min:0,calculable:true,orient:"horizontal",left:"center",color:[a(b),"white"],textStyle:c.TextStyle,inverse:qv.util.isRTL(b),formatter:function(a){return qv.util.ApplyPicture(a,
b.Chart.Series.ByIndex[0].Picture,b.Chart.Series.ByIndex[0].DataType,h)}};if(b.Metadata.Axes[0].DataType==QueryViewerDataType.Character){k=b.Chart.Series.ByIndex[0].MaxValue;g.max=k}}if(b.MapType==QueryViewerMapType.Choropleth){if(c.BoxStyle.backgroundColor)g.backgroundColor=qv.util.color.resolveColor(c.BoxStyle.backgroundColor,c.BoxStyle.opacity);if(c.BoxStyle.borderColor)g.borderColor=c.BoxStyle.borderColor;if(c.BoxStyle.borderWidth)g.borderWidth=c.BoxStyle.borderWidth}return g}(d,m.Legend),tooltip:function(a,
b){var e=qv.util.GetPictureProperties(a.Chart.Series.ByIndex[0].DataType,a.Chart.Series.ByIndex[0].Picture),d;if(a.MapType==QueryViewerMapType.Bubble&&a.Metadata.Axes[0].DataType==QueryViewerDataType.Character||a.MapType==QueryViewerMapType.Choropleth)d={trigger:"item",textStyle:b.TextStyle,formatter:function(b){for(var c=0;c<o._coordSysMgr._coordinateSystems[0].regions.length;c++)if(o._coordSysMgr._coordinateSystems[0].regions[c].name==b.name)return Number.isNaN(b.value)?qv.util.isRTL(a)?qv.util.dom.createSpan(null,
"","","",{direction:"ltr",unicodeBidi:"bidi-override",whiteSpace:"nowrap"},null,"0 : "+o._coordSysMgr._coordinateSystems[0].regions[c].properties.name).outerHTML:o._coordSysMgr._coordinateSystems[0].regions[c].properties.name+" : 0":qv.util.isRTL(a)?qv.util.dom.createSpan(null,"","","",{direction:"ltr",unicodeBidi:"bidi-override",whiteSpace:"nowrap"},null,qv.util.ApplyPicture(b.value,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,e)+" : "+o._coordSysMgr._coordinateSystems[0].regions[c].properties.name).outerHTML:
o._coordSysMgr._coordinateSystems[0].regions[c].properties.name+" : "+qv.util.ApplyPicture(b.value,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,e)}};else if(a.MapType==QueryViewerMapType.Bubble&&a.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint){coordData=c(a);d={trigger:"item",textStyle:b.TextStyle,formatter:function(b){var c=a.Chart.Series.ByIndex[0].Name;if(Number.isNaN(b.value))for(c=0;c<o._coordSysMgr._coordinateSystems[0].regions.length;c++){if(o._coordSysMgr._coordinateSystems[0].regions[c].name==
b.name)return o._coordSysMgr._coordinateSystems[0].regions[c].properties.name}else return b.value!=void 0?qv.util.isRTL(a)?qv.util.dom.createSpan(null,"","","",{direction:"ltr",unicodeBidi:"bidi-override",whiteSpace:"nowrap"},null,qv.util.ApplyPicture(b.value,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,e)+" :"+c+"<br />"+b.data.coord[1]+" "+gx.getMessage("GXPL_QViewerMapLongitude")+"<br />"+b.data.coord[0]+" "+gx.getMessage("GXPL_QViewerMapLatitude")).outerHTML:gx.getMessage("GXPL_QViewerMapLatitude")+
" "+b.data.coord[0]+"<br />"+gx.getMessage("GXPL_QViewerMapLongitude")+" "+b.data.coord[1]+"<br />"+c+": "+qv.util.ApplyPicture(b.value,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,e):qv.util.isRTL(a)?qv.util.dom.createSpan(null,"","","",{direction:"ltr",unicodeBidi:"bidi-override",whiteSpace:"nowrap"},null,b.data.coord[1]+" "+gx.getMessage("GXPL_QViewerMapLongitude")+"<br />"+b.data.coord[0]+" "+gx.getMessage("GXPL_QViewerMapLatitude")).outerHTML:gx.getMessage("GXPL_QViewerMapLatitude")+
" "+b.data.coord[0]+"<br />"+gx.getMessage("GXPL_QViewerMapLongitude")+" "+b.data.coord[1]}}}if(b.BoxStyle.backgroundColor)d.backgroundColor=qv.util.color.resolveColor(b.BoxStyle.backgroundColor,b.BoxStyle.opacity);if(b.BoxStyle.borderColor)d.borderColor=b.BoxStyle.borderColor;if(b.BoxStyle.borderWidth)d.borderWidth=b.BoxStyle.borderWidth;return d}(d,m.Tooltip)};b(o);o.setOption(r);var u=qv.util.GetPictureProperties(d.Chart.Series.ByIndex[0].DataType,d.Chart.Series.ByIndex[0].Picture);o.lastSelected=
null;o.BubbleSelect=null;d.SelectionAllowed()&&l(o,d);d.ItemClick&&d.Metadata.Data[0].RaiseItemClick&&g(o,d);if(d.MapType==QueryViewerMapType.Bubble){var p=n(c(d),o,d),p=d.Metadata.Axes[0].DataType==QueryViewerDataType.Character?n(c(d),o,d):c(d),r=f(d,p,o),r={color:r[1],series:r[2],legend:{orient:"vertical",x:"left",y:"bottom",selectedMode:!1,data:r[0],textStyle:m.Legend.TextStyle,formatter:function(a){return a}}};if(d.SelectionAllowed())o.on("click",function(a){if(a.componentType==="markPoint"){var b=
o.getOption(),c;if(d.Chart.colorAxis.dataClasses.length==0)c=b.series[0].color;else{c=d.Chart.Series.ByIndex[0].Points[a.dataIndex].Color.Color;v(c)&&(c="#"+c)}if(o.lastSelected!=a.dataIndex){if(o.lastSelected!=null)if(d.Chart.colorAxis.dataClasses.length==0)b.series[0].markPoint.data[o.lastSelected].itemStyle={color:b.series[0].color};else{colorLastBubble=d.Chart.Series.ByIndex[0].Points[o.lastSelected].Color.Color;v(colorLastBubble)&&(colorLastBubble="#"+colorLastBubble);b.series[0].markPoint.data[o.lastSelected].itemStyle=
{color:colorLastBubble}}b.series[0].markPoint.data[a.dataIndex].itemStyle={color:m.SelectionColor};o.lastSelected=a.dataIndex}else{b.series[0].markPoint.data[a.dataIndex].itemStyle={color:c};o.lastSelected=null}o.BubbleSelect=a.dataIndex;o.setOption(b)}});if(0!=d.Chart.colorAxis.dataClasses.length&&(m.Legend.BoxStyle.backgroundColor&&(r.legend.backgroundColor=qv.util.color.resolveColor(m.Legend.BoxStyle.backgroundColor,m.Legend.BoxStyle.opacity)),m.Legend.BoxStyle.borderColor&&(r.legend.borderColor=
m.Legend.BoxStyle.borderColor),m.Legend.BoxStyle.borderWidth))r.legend.borderWidth=m.Legend.BoxStyle.borderWidth;o.setOption(r)}else d.MapType==QueryViewerMapType.Choropleth&&(d.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&(p=k(c(d),o,d),maxValue=Math.max.apply(Math,p.map(function(a){return a.value})),r={series:{data:p},dataRange:{max:maxValue}}),o.setOption(r),gx.lang.gxBoolean(d.ShowValues)&&(dataValues=d.Metadata.Axes[0].DataType==QueryViewerDataType.Character?n(c(d),o,d):n(p,o,d),
r={series:{markPoint:{symbol:"circle",symbolSize:function(){return 0},label:{show:!0,color:"black",formatter:function(a){return qv.util.ApplyPicture(a.value,d.Chart.Series.ByIndex[0].Picture,d.Chart.Series.ByIndex[0].DataType,u)}},data:dataValues}}},q(r.series.markPoint.label,m.SeriesLabels)),o.setOption(r));d.Charts=[o];(function(a){var b="try { qv.map.CheckMapSize("+a.me()+") } catch (e) {}";a.IntervalCheckChartSize=setInterval(b,500)})(d);d._ControlRenderedTo=d.RealType}return{tryToRenderMap:function(a){var b=
"";(new Date).getTime();a.xml=a.xml||{};qv.services.GetRecordsetCacheKeyIfNeeded(a,function(c,d){var g=!1;c!=d.xml.recordsetCacheKey&&(d.xml.recordsetCacheKey=c,g=!0);qv.util.anyError(c)?(b=qv.util.getErrorFromText(c),qv.util.renderError(d,b)):(g&&qv.services.parseRecordsetCacheKeyXML(d),qv.services.GetMetadataIfNeeded(d,function(c,d){var g=false;if(c!=d.xml.metadata){d.xml.metadata=c;g=true}(new Date).getTime();if(qv.util.anyError(c)){b=qv.util.getErrorFromText(c);qv.util.renderError(d,b)}else{g&&
qv.services.parseMetadataXML(d);d.Metadata.ParserResult.Success?qv.services.GetDataIfNeeded(d,function(c,d){var g=false;if(c!=d.xml.data){d.xml.data=c;g=true}(new Date).getTime();if(qv.util.anyError(c)){b=qv.util.getErrorFromText(c);qv.util.renderError(d,b)}else{g&&qv.services.parseDataXML(d);g=qv.util.GetContainerControlClasses(a);g!=""&&qv.util.SetUserControlClass(a,g);g=qv.util.ProcessDataAndMetadata(a);if(g==""){g=a.getContainerControl();qv.util.hideActivityIndicator(a);if(a.MapLibrary==QueryViewerMapLibrary.Highcharts){Highcharts.mapChart(g,
{chart:a.MapType==QueryViewerMapType.Bubble&&a.Chart.Series.ByIndex[0].Color.Color||a.MapType==QueryViewerMapType.Choropleth&&a.Chart.colorAxis.dataClasses.length!=0&&!a.Chart.Series.ByIndex[0].Color.Color||a.MapType==QueryViewerMapType.Bubble&&a.Chart.colorAxis.dataClasses.length!=0&&!a.Chart.Series.ByIndex[0].Color.Color?{map:qv.map.getMapDirectory(a).mapKey,styledMode:false}:{map:qv.map.getMapDirectory(a).mapKey,styledMode:true},title:{text:qv.util.getTranslation(a.Title)},mapNavigation:{enabled:true,
buttonOptions:{verticalAlign:"bottom"}},tooltip:f(a),series:r(a),colorAxis:u(a),legend:q(a)});a._ControlRenderedTo=a.RealType}else echarts.getMap(qv.map.getMapDirectory(a).mapKey)==null?qv.util.renderError(a,gx.getMessage("GXPL_QViewerNoMapSupport")):y(g,a)}else qv.util.renderError(a,g)}}):qv.util.renderError(d,d.Metadata.ParserResult.Message)}}))})},getMapDirectory:function(a){var b="QueryViewer/"+(a.MapLibrary===QueryViewerMapLibrary.Highchart?"highcharts/":"Echarts/"),c;c={};if(a.Region==QueryViewerRegion.Country)b=
b+"countries/"+a.Country.toLowerCase()+"-all.js",c="countries/"+a.Country.toLowerCase()+"/"+a.Country.toLowerCase()+"-all";else if(a.Region==QueryViewerRegion.Continent){c="custom/";b+="continents/";switch(a.Continent){case QueryViewerContinent.SouthAmerica:a="south-america";break;case QueryViewerContinent.NorthAmerica:a="north-america";break;default:a=a.Continent.toLowerCase()}c+=a;b+=a+".js"}else a.MapLibrary==QueryViewerMapLibrary.Highcharts?(c="custom/world-highres",b+="continents/world-highres.js"):
(c="world",b+="World/world.js");return c={mapKey:c,mapDir:b}},GetMetadataMap:function(a){return qv.util.GetDesigntimeMetadata(a)},GetDataMap:function(a){return a.xml.data},CheckMapSize:function(a){var b=a.getContainerControl();if(b.offsetWidth!=a.Chart._lastWidth||b.offsetHeight!=a.Chart._lastHeight)a.Charts[0].resize({width:b.offsetWidth+"px",height:b.offsetHeight+"px"}),a.Chart._lastWidth=b.offsetWidth,a.Chart._lastHeight=b.offsetHeight},IsAfricanCountry:function(a){return 0<="DZ AO BJ BW BF BI CM CV CF TD KM CD DJ EG GQ ER SZ ET GA GM GH GN GW CI KE LS LR LY MG MW ML MR MU MA MZ NA NE NG CG RW ST SN SC SL SO ZA SS SD TZ TG TN UG EH ZM ZW".split(" ").indexOf(a)},
IsAsianCountry:function(a){return 0<="AF AZ AM BH BD BT BN KH CN CY TL GE IN ID IR IQ IL JP JO KZ KW KG LA LB MY MV MN MM NP KP OM PK PS PH QA RU SA SG KR LK PS SY TW TJ TH TR TM AE UZ VN YE".split(" ").indexOf(a)},IsEuropeanCountry:function(a){return 0<="AL AD AT AZ AM BY BE BA BG HR CY CZ DK EE FO FI FR GE DE GR HU IS IE IT XK LV LI LT LU MT MD MC ME NL MK NO PL PT RO RU SM RS SK SI ES SE CH TR UA GB VA".split(" ").indexOf(a)},IsNorthAmericanCountry:function(a){return 0<="AI AG BB BZ BM VG CA CR CU DM DO SV GL GD GT HT HN JM MX NI PA PR LC KN VC BS US TT".split(" ").indexOf(a)},
IsOceanianCountry:function(a){return 0<="AU CK FJ ID KI MY MH FM NR NC NZ PW PG PH WS SB TK TO TV VU".split(" ").indexOf(a)},IsSouthAmericanCountry:function(a){return 0<="AR BO BR CL CO EC GF GY PY PE SR TT UY VE".split(" ").indexOf(a)},Select:function(a,b){var c=a.Charts[0].getOption();c.series[0].selectedMode="single";a.Charts[0].setOption(c);a._selectedValue=b[0].Value;a.Charts[0].dispatchAction({type:"select",seriesIndex:0,name:a._selectedValue});c=a.Charts[0].getOption();c.series[0].selectedMode=
!1;a.Charts[0].setOption(c)},Deselect:function(a){a.Charts[0].dispatchAction({type:"unselect",seriesIndex:0,name:a._selectedValue});a._selectedValue=void 0}}}();
